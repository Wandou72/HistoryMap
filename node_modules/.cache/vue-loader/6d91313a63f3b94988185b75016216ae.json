{"remainingRequest":"C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\node_modules\\vue-loader\\dist\\index.js??ruleSet[0].use[1]!C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentD.vue?vue&type=template&id=754c12f2&scoped=true","dependencies":[{"path":"C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentD.vue","mtime":1652716486920},{"path":"C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\node_modules\\vue-loader\\dist\\templateLoader.js","mtime":1628298225000},{"path":"C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\node_modules\\vue-loader\\dist\\index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgkKICAgIDxzdmcgaWQgPSAic3ZnRCIgPgoJCTx0ZXh0IGlkID0gJ3R4RCc+U2VsZWN0IE1vZGU6e3ttYXRyaXhGbGFnfX08L3RleHQ+CgkJPHJlY3QKCXggPSAwCgk6eSA9ICdoZWlnaHREIC0gNTAnCgloZWlnaHQgPSA1MAoJd2lkdGggPSA2MAoJZmlsbCA9ICdvcmFuZ2UnPgoJPC9yZWN0PgoJPHRleHQKCWR4ID0gMzAKCTpkeSA9ICdoZWlnaHREIC0gMTcnCgl0ZXh0LWFuY2hvciA9ICdtaWRkbGUnCglmaWxsID0gJ3doaXRlJwoJZm9udC1zaXplID0gMjUKCWZvbnQtd2VpZ2h0ID0gJ2JvbGQnCgk+QgoJPC90ZXh0PgoJPC9zdmc+Cgo="},{"version":3,"sources":["C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentD.vue"],"names":[],"mappings":";;IAEI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACnB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACjD,CAAC,CAAC,CAAC,CAAC;CACL,EAAE,EAAE;CACJ,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;CAClB,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;CACV,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;CACT,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACN,CAAC,CAAC,CAAC,CAAC;CACJ,CAAC,EAAE,EAAE,CAAC;CACN,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;CACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACrB,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;CACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;CACnB,CAAC;CACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CACN,CAAC,CAAC,CAAC,CAAC,CAAC","file":"C:/Users/admin/Desktop/WYSIWYG/归档/src/components/componentD.vue","sourceRoot":"","sourcesContent":["<template>\n\t\n    <svg id = \"svgD\" >\n\t\t<text id = 'txD'>Select Mode:{{matrixFlag}}</text>\n\t\t<rect\n\tx = 0\n\t:y = 'heightD - 50'\n\theight = 50\n\twidth = 60\n\tfill = 'orange'>\n\t</rect>\n\t<text\n\tdx = 30\n\t:dy = 'heightD - 17'\n\ttext-anchor = 'middle'\n\tfill = 'white'\n\tfont-size = 25\n\tfont-weight = 'bold'\n\t>B\n\t</text>\n\t</svg>\n\n</template>\n\n<script>\nimport * as d3 from \"d3\"\n\n//import axios from 'axios'\n\nexport default {\n\tname: 'componentD',\n\tdata(){\n\t\treturn {\n\t\t\theightD:this.$store.state.height * 0.5,\n\t\t\twidthD:this.$store.state.width * 0.3,\n\t\t\thovered:'',\n\t\t\tnodesLength:0,\n\t\t\t\n\t\t}\n\t},\n\tmounted(){\n\t\td3.select(\"#txD\")\n\t\t.attr(\"dy\",70)\n\t\t.attr(\"dx\",this.widthD-150)\n\t\t.style(\"display\",'none')\n\t\t//console.log(this.$store.state.data_overall)\n\t\td3.select(\"#svgD\")\n\t\t.attr(\"width\",this.widthD)\n\t\t.attr(\"height\",this.heightD);\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendTitle',\n\t\t\tid:'DTitle',\n\t\t\tclass:'classD',\n\t\t\tsvg:'svgD',\n\t\t\tdx:'24px',\n\t\t\tdy:'36px',\n\t\t\tsize:'20px'\n\t\t\t\n\t\t})\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendBtn',\n\t\t\tsvgID:'svgD',\n\t\t\tbtnID:'Dbtn',\n\t\t\twidth:this.widthD,\n\t\t\ttext:'switch'\n\t\t})\n\t\t\n\t\td3.select(\"#svgD\").select(\"#Dbtn\")\n\t\t.on(\"click\",()=>{\n\t\t\tif(this.matrixFlag=='tree'){\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeMatrixFlag',\n\t\t\t\t\tflag:'matrix'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeMatrixFlag',\n\t\t\t\t\tflag:'tree'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t})\n\t\t.style(\"display\",'none')\n\t},\n\tcomputed:{\n\t\tmatrixElement1(){\n\t\t\treturn this.matrixElement+'1'\n\t\t},\n\t\tmatrixElement(){\n\t\t\treturn this.$store.state.matrixElement\n\t\t},\n\t\tmatrixFlag(){\n\t\t\treturn this.$store.state.matrixFlag\n\t\t},\n\t\ttreeTypeFlag(){\n\t\t\treturn this.$store.state.treeTypeFlag\n\t\t},\n\t\ttreeD(){\n\t\t\treturn this.treeData+'1'\n\t\t},\n\t\ttreeData(){\n\t\t\treturn this.$store.state.objB.treeData\n\t\t},\n\t\tcircled(){\n\t\t\treturn this.$store.state.objD.circled\n\t\t},\n\t\tcircledLength(){\n\t\t\treturn this.circled.length\n\t\t},\n\t\tD_title(){\n\t\t\treturn this.$store.state.objD.title\n\t\t},\n\t\tdata_overall(){\n\t\t\treturn this.$store.state.data_overall\n\t\t},\n\t\tleaf(){\n\t\t\treturn this.$store.state.leaf\n\t\t},\n\t\tselected(){\n\t\t\treturn this.$store.state.selected\n\t\t},\n\t\t\n\t\tcolorScale(){\n\t\t\treturn d3.scale.linear().domain([0,this.nodesLength]).range([\"#aaa7aa\",\"#4e7f78\"]);\n\t\t},\n\t},\n\tmethods:{\n\t\t\n\t\tD_TipRemove(){\n\t\t\td3.select(\"#svgD\").selectAll(\".tips\").remove()\n\t\t},\n\t\tD_createTip(d){\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tlet XY = mouseXY(event);\n\t\t\t\n\t\t\td3.select(\"#svgD\").append(\"rect\")\n\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t.style(\"width\",d.name.length *15 +10)\n\t\t\t.attr(\"rx\",20);\n\t\t\t\n\t\t\td3.select(\"#svgD\").append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t//.text(d.name)\n\t\t\t.text('company ***')\n\t\t\t\n\t\t\td3.select(\"#svgD\").append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.text('专利数:'+d.patent_num)\n\t\t},\n\t\tinner(x){\n\t\t\tlet D_nodes;\n\t\t\tlet inner = [];\n\t\t\tlet temp = [];\n\t\t\tlet indid = \"\";\n\t\t\tlet indname = \"\";\n\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\tif(this.data_overall[i].name2 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name3 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name4 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name5 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name6 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name7 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name8 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var i = 0;i<this.data_overall.length;i++){\n\t\t\t\tif(indid == this.data_overall[i].id){\n\t\t\t\t\tindname = this.data_overall[i].industry_name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tinner = {name:x,children:temp};\n\t\t\tconsole.log(\"indname\"+indname)\n\t\t\tlet r = this.widthD * 0.65;\n\t\t\t\n\t\t\tlet pack = d3.layout.pack()\n\t\t\t.size([r,r])\n\t\t\t.value(function(d){return d.patent_num});\n\t\t\t\n\t\t\tD_nodes = pack.nodes(inner);\n\t\t\tthis.nodesLength = D_nodes.length;\n\t\t\tD_nodes.sort(function(a,b){\n\t\t\t\treturn a.patent_num-b.patent_num\n\t\t\t}); \n\t\t\t//let color2 = d3.scale.linear().domain([0,D_nodes.length]).range([\"#aaa7aa\",\"#4e7f78\"]);\n\t\t\t//console.log(D_nodes)\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.data(D_nodes)\n\t\t\t.enter()\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"class\",\"classD\")\n\t\t\t.attr(\"id\",function(d){return d.name;})\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.data(D_nodes)\n\t\t\t.attr(\"transform\",\"translate(70,50)\")\n\t\t\t.attr(\"cx\",function(d){return d.x;})\n\t\t\t.attr(\"cy\",function(d){return d.y;})\n\t\t\t.attr(\"r\",function(d){return d.r;})\n\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\tthis.hovered = d.name\n\t\t\t\tthis.D_TipRemove()\n\t\t\t\tthis.D_createTip(d)\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t})\n\t\t\t.on(\"mousemove\",d=>{\n\t\t\t\tthis.D_TipRemove()\n\t\t\t\tthis.D_createTip(d)\n\t\t\t\n\t\t\t})\n\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\tthis.hovered = ''\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.D_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewD',\n\t\t\t\t\twidth:this.widthD,\n\t\t\t\t\theight:this.heightD,\n\t\t\t\t\tobj:'tips(company)',\n\t\t\t\t\tname:d.name + ':'+ this.selected,\n\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\tdesc: 'hover company' + d.name,\n\t\t\t\t\t// desc:'the patent number of ' + d.name + ' in ' + this.selected + ' is ' + d.patent_num,\n          data:{\n            industry:this.selected,\n            company:[d.name],\n            province:[],\n            attribute:'patent_num'\n          }\n\t\t\t\t})\n\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t})\n\t\t\t.on(\"click\",(d)=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:\"elementClear\",\n\t\t\t\t\tflag:'company'\n\t\t\t\t})\n\n\t\t\t\t//这里也要存储\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:\"clearStatesB\",\n\t\t\t\t\tflag:'company'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewD',\n\t\t\t\t\twidth:this.widthD,\n\t\t\t\t\theight:this.heightD,\n\t\t\t\t\tobj:'select company',\n\t\t\t\t\tname:d.name + ':'+ this.selected,\n\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\tdesc: 'select company' + d.name,\n\t\t\t\t\t// desc:'the patent number of ' + d.name + ' in ' + this.selected + ' is ' + d.patent_num,\n\t\t\t\t\tvisualKeys:{},\n          data:{\n            industry:this.selected,\n            company:[d.name],\n            province:[],\n            attribute:'patent_num'\n          }\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.$store.commit('ClickRecordState')\n\t\t\t\t// 这里要存储\n\t\t\t\tif(this.matrixFlag=='tree'){\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:\"updateTreeData\",\n\t\t\t\t\t\t//treeTypeFlag :'company',\n\t\t\t\t\t\tname:d.name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype : 'changeMatrixElement',\n\t\t\t\t\t\telement : d.name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t//console.log(this.$store.state.objD.circled)\n\t\t\t})\n\t\t\t.style(\"stroke\",\"none\")\n\t\t\t.style(\"stroke-width\",2)\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.transition().delay(function(d,i){return i+ d.r*3}).duration(500)\n\t\t\t.style(\"fill\",(d,i)=>{return d.patent_num?this.colorScale(i):\"none\";});\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.data(D_nodes)\n\t\t\t.exit()\n\t\t\t.remove()\n\t\t},\n\t\tale(){\n\t\t\t//console.log(this.$store.state.data_overall)\n\t\t}\n\t},\n\twatch:{\n\t\tleaf(val){\n\t\t\tif(val){\n\t\t\t\tthis.inner(this.selected);\n\t\t\t\td3.select(\"#Dbtn\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t\td3.select(\"#txD\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#svgD\")\n\t\t\t\t.selectAll(\"circle\")\n\t\t\t\t.remove();\n\t\t\t\td3.select(\"#DTitle\")\n\t\t\t\t.text('')\n\t\t\t\td3.select(\"#Dbtn\")\n\t\t\t\t.style(\"display\",'none')\n\t\t\t\td3.select(\"#txD\")\n\t\t\t\t.style(\"display\",'none')\n\t\t\t}\n\t\t},\n\t\tselected(val){\n\t\t\tif(this.leaf){\n\t\t\t\tthis.inner(val);\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tD_title(val){\n\t\t\t//console.log(val)\n\t\t\tif(this.leaf){\n\t\t\t\td3.select(\"#DTitle\")\n\t\t\t\t.text(val + '产业包含企业情况')\n\t\t\t}\n\t\t},\n\t\thovered(val){\n\t\t\t\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>d.name != val)\n\t\t\t.style(\"fill\",(d,i)=>{return d.patent_num?this.colorScale(i):\"none\";});\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>this.treeData.indexOf(d.name) != -1)\n\t\t\t.style(\"fill\",'#25f4ff')\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>{return d.name == val && d.depth!= 0})\n\t\t\t.style(\"fill\",\"red\");\n\t\t},\n\t\t\n\t\ttreeD(){\n\t\n\t\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t\t.filter(d=>this.treeData.indexOf(d.name) != -1)\n\t\t\t\t.style(\"fill\",'#25f4ff')\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t\t.filter(d=>this.treeData.indexOf(d.name) == -1)\n\t\t\t\t.style(\"fill\",(d,i)=>{return d.patent_num?this.colorScale(i):\"none\";});\n\t\t\t\t\n\t\t},\n\t\tmatrixElement1(){\n\t\t\td3.selectAll(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>{\n\t\t\t\tif(this.matrixElement.indexOf(d.name) != -1){\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\n\t\t\td3.selectAll(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>{\n\t\t\t\tif(this.matrixElement.indexOf(d.name) == -1){\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t\t.style(\"stroke\",\"none\")\n\t\t}\n\t\t\n\t}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\n</style>\n"]}]}