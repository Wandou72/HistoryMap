{"ast":null,"code":"import * as d3 from \"d3\"; //import axios from 'axios'\n\nexport default {\n  name: 'componentD',\n\n  data() {\n    return {\n      heightD: this.$store.state.height * 0.5,\n      widthD: this.$store.state.width * 0.3,\n      hovered: '',\n      nodesLength: 0\n    };\n  },\n\n  mounted() {\n    d3.select(\"#txD\").attr(\"dy\", 70).attr(\"dx\", this.widthD - 150).style(\"display\", 'none'); //console.log(this.$store.state.data_overall)\n\n    d3.select(\"#svgD\").attr(\"width\", this.widthD).attr(\"height\", this.heightD);\n    this.$store.commit({\n      type: 'appendTitle',\n      id: 'DTitle',\n      class: 'classD',\n      svg: 'svgD',\n      dx: '24px',\n      dy: '36px',\n      size: '20px'\n    });\n    this.$store.commit({\n      type: 'appendBtn',\n      svgID: 'svgD',\n      btnID: 'Dbtn',\n      width: this.widthD,\n      text: 'switch'\n    });\n    d3.select(\"#svgD\").select(\"#Dbtn\").on(\"click\", () => {\n      if (this.matrixFlag == 'tree') {\n        this.$store.commit({\n          type: 'changeMatrixFlag',\n          flag: 'matrix'\n        });\n      } else {\n        this.$store.commit({\n          type: 'changeMatrixFlag',\n          flag: 'tree'\n        });\n      }\n    }).style(\"display\", 'none');\n  },\n\n  computed: {\n    matrixElement1() {\n      return this.matrixElement + '1';\n    },\n\n    matrixElement() {\n      return this.$store.state.matrixElement;\n    },\n\n    matrixFlag() {\n      return this.$store.state.matrixFlag;\n    },\n\n    treeTypeFlag() {\n      return this.$store.state.treeTypeFlag;\n    },\n\n    treeD() {\n      return this.treeData + '1';\n    },\n\n    treeData() {\n      return this.$store.state.objB.treeData;\n    },\n\n    circled() {\n      return this.$store.state.objD.circled;\n    },\n\n    circledLength() {\n      return this.circled.length;\n    },\n\n    D_title() {\n      return this.$store.state.objD.title;\n    },\n\n    data_overall() {\n      return this.$store.state.data_overall;\n    },\n\n    leaf() {\n      return this.$store.state.leaf;\n    },\n\n    selected() {\n      return this.$store.state.selected;\n    },\n\n    colorScale() {\n      return d3.scale.linear().domain([0, this.nodesLength]).range([\"#aaa7aa\", \"#4e7f78\"]);\n    }\n\n  },\n  methods: {\n    D_TipRemove() {\n      d3.select(\"#svgD\").selectAll(\".tips\").remove();\n    },\n\n    D_createTip(d) {\n      function mouseXY(e) {\n        e = e || window.event;\n        return {\n          \"x\": e.offsetX,\n          \"y\": e.offsetY\n        };\n      }\n\n      let XY = mouseXY(event);\n      d3.select(\"#svgD\").append(\"rect\").attr(\"id\", \"tipBack\").attr(\"class\", \"tips\").attr(\"x\", XY.x + 10).attr(\"y\", XY.y - 30).style(\"width\", d.name.length * 15 + 10).attr(\"rx\", 20);\n      d3.select(\"#svgD\").append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x + 20).attr(\"dy\", XY.y - 5).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"white\") //.text(d.name)\n      .text('company ***');\n      d3.select(\"#svgD\").append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x + 20).attr(\"dy\", XY.y + 15).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"white\").text('专利数:' + d.patent_num);\n    },\n\n    inner(x) {\n      let D_nodes;\n      let inner = [];\n      let temp = [];\n      let indid = \"\";\n      let indname = \"\";\n\n      for (let i = 0; i < this.data_overall.length; i++) {\n        if (this.data_overall[i].name2 == x) {\n          temp.push({\n            name: this.data_overall[i].comp_name,\n            patent_num: this.data_overall[i].patent_num\n          });\n          indid = i + 1;\n        } else if (this.data_overall[i].name3 == x) {\n          temp.push({\n            name: this.data_overall[i].comp_name,\n            patent_num: this.data_overall[i].patent_num\n          });\n          indid = i + 1;\n        } else if (this.data_overall[i].name4 == x) {\n          temp.push({\n            name: this.data_overall[i].comp_name,\n            patent_num: this.data_overall[i].patent_num\n          });\n          indid = i + 1;\n        } else if (this.data_overall[i].name5 == x) {\n          temp.push({\n            name: this.data_overall[i].comp_name,\n            patent_num: this.data_overall[i].patent_num\n          });\n          indid = i + 1;\n        } else if (this.data_overall[i].name6 == x) {\n          temp.push({\n            name: this.data_overall[i].comp_name,\n            patent_num: this.data_overall[i].patent_num\n          });\n          indid = i + 1;\n        } else if (this.data_overall[i].name7 == x) {\n          temp.push({\n            name: this.data_overall[i].comp_name,\n            patent_num: this.data_overall[i].patent_num\n          });\n          indid = i + 1;\n        } else if (this.data_overall[i].name8 == x) {\n          temp.push({\n            name: this.data_overall[i].comp_name,\n            patent_num: this.data_overall[i].patent_num\n          });\n          indid = i + 1;\n        }\n      }\n\n      for (var i = 0; i < this.data_overall.length; i++) {\n        if (indid == this.data_overall[i].id) {\n          indname = this.data_overall[i].industry_name;\n          break;\n        }\n      }\n\n      inner = {\n        name: x,\n        children: temp\n      };\n      console.log(\"indname\" + indname);\n      let r = this.widthD * 0.65;\n      let pack = d3.layout.pack().size([r, r]).value(function (d) {\n        return d.patent_num;\n      });\n      D_nodes = pack.nodes(inner);\n      this.nodesLength = D_nodes.length;\n      D_nodes.sort(function (a, b) {\n        return a.patent_num - b.patent_num;\n      }); //let color2 = d3.scale.linear().domain([0,D_nodes.length]).range([\"#aaa7aa\",\"#4e7f78\"]);\n      //console.log(D_nodes)\n\n      d3.select(\"#svgD\").selectAll(\"circle\").data(D_nodes).enter().append(\"circle\").attr(\"class\", \"classD\").attr(\"id\", function (d) {\n        return d.name;\n      });\n      d3.select(\"#svgD\").selectAll(\"circle\").data(D_nodes).attr(\"transform\", \"translate(70,50)\").attr(\"cx\", function (d) {\n        return d.x;\n      }).attr(\"cy\", function (d) {\n        return d.y;\n      }).attr(\"r\", function (d) {\n        return d.r;\n      }).on(\"mouseover\", d => {\n        this.hovered = d.name;\n        this.D_TipRemove();\n        this.D_createTip(d);\n        this.$store.commit({\n          type: 'userMouseover'\n        });\n      }).on(\"mousemove\", d => {\n        this.D_TipRemove();\n        this.D_createTip(d);\n      }).on(\"mouseout\", d => {\n        this.hovered = '';\n        setTimeout(() => {\n          this.D_TipRemove();\n        }, 1500);\n        this.$store.commit({\n          type: 'userMouseout',\n          view: 'viewD',\n          width: this.widthD,\n          height: this.heightD,\n          obj: 'tips(company)',\n          name: d.name + ':' + this.selected,\n          value: d.patent_num,\n          desc: 'the patent number of ' + d.name + ' in ' + this.selected + ' is ' + d.patent_num,\n          data: {\n            industry: this.selected,\n            company: [d.name],\n            province: [],\n            attribute: 'patent_num'\n          }\n        });\n      }).on(\"click\", d => {\n        this.$store.commit({\n          type: \"elementClear\",\n          flag: 'company'\n        });\n        this.$store.commit({\n          type: 'userClick',\n          view: 'viewD',\n          width: this.widthD,\n          height: this.heightD,\n          obj: 'select company',\n          name: d.name + ':' + this.selected,\n          value: d.patent_num,\n          desc: 'the patent number of ' + d.name + ' in ' + this.selected + ' is ' + d.patent_num,\n          visualKeys: {},\n          data: {\n            industry: this.selected,\n            company: [d.name],\n            province: [],\n            attribute: 'patent_num'\n          }\n        });\n\n        if (this.matrixFlag == 'tree') {\n          this.$store.commit({\n            type: \"updateTreeData\",\n            //treeTypeFlag :'company',\n            name: d.name\n          });\n        } else {\n          this.$store.commit({\n            type: 'changeMatrixElement',\n            element: d.name\n          });\n        } //console.log(this.$store.state.objD.circled)\n\n      }).style(\"stroke\", \"none\").style(\"stroke-width\", 2).style(\"fill\", \"white\").transition().delay(function (d, i) {\n        return i + d.r * 3;\n      }).duration(500).style(\"fill\", (d, i) => {\n        return d.patent_num ? this.colorScale(i) : \"none\";\n      });\n      d3.select(\"#svgD\").selectAll(\"circle\").data(D_nodes).exit().remove();\n    },\n\n    ale() {//console.log(this.$store.state.data_overall)\n    }\n\n  },\n  watch: {\n    leaf(val) {\n      if (val) {\n        this.inner(this.selected);\n        d3.select(\"#Dbtn\").style(\"display\", 'inline');\n        d3.select(\"#txD\").style(\"display\", 'inline');\n      } else {\n        d3.select(\"#svgD\").selectAll(\"circle\").remove();\n        d3.select(\"#DTitle\").text('');\n        d3.select(\"#Dbtn\").style(\"display\", 'none');\n        d3.select(\"#txD\").style(\"display\", 'none');\n      }\n    },\n\n    selected(val) {\n      if (this.leaf) {\n        this.inner(val);\n      }\n    },\n\n    D_title(val) {\n      //console.log(val)\n      if (this.leaf) {\n        d3.select(\"#DTitle\").text(val + '产业包含企业情况');\n      }\n    },\n\n    hovered(val) {\n      d3.select(\"#svgD\").selectAll(\"circle\").filter(d => d.name != val).style(\"fill\", (d, i) => {\n        return d.patent_num ? this.colorScale(i) : \"none\";\n      });\n      d3.select(\"#svgD\").selectAll(\"circle\").filter(d => this.treeData.indexOf(d.name) != -1).style(\"fill\", '#25f4ff');\n      d3.select(\"#svgD\").selectAll(\"circle\").filter(d => {\n        return d.name == val && d.depth != 0;\n      }).style(\"fill\", \"red\");\n    },\n\n    treeD() {\n      d3.select(\"#svgD\").selectAll(\"circle\").filter(d => this.treeData.indexOf(d.name) != -1).style(\"fill\", '#25f4ff');\n      d3.select(\"#svgD\").selectAll(\"circle\").filter(d => this.treeData.indexOf(d.name) == -1).style(\"fill\", (d, i) => {\n        return d.patent_num ? this.colorScale(i) : \"none\";\n      });\n    },\n\n    matrixElement1() {\n      d3.selectAll(\"#svgD\").selectAll(\"circle\").filter(d => {\n        if (this.matrixElement.indexOf(d.name) != -1) {\n          return true;\n        }\n      }).style(\"stroke\", \"red\");\n      d3.selectAll(\"#svgD\").selectAll(\"circle\").filter(d => {\n        if (this.matrixElement.indexOf(d.name) == -1) {\n          return true;\n        }\n      }).style(\"stroke\", \"none\");\n    }\n\n  }\n};","map":{"version":3,"sources":["C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentD.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t\n    <svg id = \"svgD\" >\n\t\t<text id = 'txD'>Select Mode:{{matrixFlag}}</text>\n\t\t<rect\n\tx = 0\n\t:y = 'heightD - 50'\n\theight = 50\n\twidth = 60\n\tfill = 'orange'>\n\t</rect>\n\t<text\n\tdx = 30\n\t:dy = 'heightD - 17'\n\ttext-anchor = 'middle'\n\tfill = 'white'\n\tfont-size = 25\n\tfont-weight = 'bold'\n\t>B\n\t</text>\n\t</svg>\n\n</template>\n\n<script>\nimport * as d3 from \"d3\"\n\n//import axios from 'axios'\n\nexport default {\n\tname: 'componentD',\n\tdata(){\n\t\treturn {\n\t\t\theightD:this.$store.state.height * 0.5,\n\t\t\twidthD:this.$store.state.width * 0.3,\n\t\t\thovered:'',\n\t\t\tnodesLength:0,\n\t\t\t\n\t\t}\n\t},\n\tmounted(){\n\t\td3.select(\"#txD\")\n\t\t.attr(\"dy\",70)\n\t\t.attr(\"dx\",this.widthD-150)\n\t\t.style(\"display\",'none')\n\t\t//console.log(this.$store.state.data_overall)\n\t\td3.select(\"#svgD\")\n\t\t.attr(\"width\",this.widthD)\n\t\t.attr(\"height\",this.heightD);\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendTitle',\n\t\t\tid:'DTitle',\n\t\t\tclass:'classD',\n\t\t\tsvg:'svgD',\n\t\t\tdx:'24px',\n\t\t\tdy:'36px',\n\t\t\tsize:'20px'\n\t\t\t\n\t\t})\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendBtn',\n\t\t\tsvgID:'svgD',\n\t\t\tbtnID:'Dbtn',\n\t\t\twidth:this.widthD,\n\t\t\ttext:'switch'\n\t\t})\n\t\t\n\t\td3.select(\"#svgD\").select(\"#Dbtn\")\n\t\t.on(\"click\",()=>{\n\t\t\tif(this.matrixFlag=='tree'){\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeMatrixFlag',\n\t\t\t\t\tflag:'matrix'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeMatrixFlag',\n\t\t\t\t\tflag:'tree'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t})\n\t\t.style(\"display\",'none')\n\t},\n\tcomputed:{\n\t\tmatrixElement1(){\n\t\t\treturn this.matrixElement+'1'\n\t\t},\n\t\tmatrixElement(){\n\t\t\treturn this.$store.state.matrixElement\n\t\t},\n\t\tmatrixFlag(){\n\t\t\treturn this.$store.state.matrixFlag\n\t\t},\n\t\ttreeTypeFlag(){\n\t\t\treturn this.$store.state.treeTypeFlag\n\t\t},\n\t\ttreeD(){\n\t\t\treturn this.treeData+'1'\n\t\t},\n\t\ttreeData(){\n\t\t\treturn this.$store.state.objB.treeData\n\t\t},\n\t\tcircled(){\n\t\t\treturn this.$store.state.objD.circled\n\t\t},\n\t\tcircledLength(){\n\t\t\treturn this.circled.length\n\t\t},\n\t\tD_title(){\n\t\t\treturn this.$store.state.objD.title\n\t\t},\n\t\tdata_overall(){\n\t\t\treturn this.$store.state.data_overall\n\t\t},\n\t\tleaf(){\n\t\t\treturn this.$store.state.leaf\n\t\t},\n\t\tselected(){\n\t\t\treturn this.$store.state.selected\n\t\t},\n\t\t\n\t\tcolorScale(){\n\t\t\treturn d3.scale.linear().domain([0,this.nodesLength]).range([\"#aaa7aa\",\"#4e7f78\"]);\n\t\t},\n\t},\n\tmethods:{\n\t\t\n\t\tD_TipRemove(){\n\t\t\td3.select(\"#svgD\").selectAll(\".tips\").remove()\n\t\t},\n\t\tD_createTip(d){\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tlet XY = mouseXY(event);\n\t\t\t\n\t\t\td3.select(\"#svgD\").append(\"rect\")\n\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t.style(\"width\",d.name.length *15 +10)\n\t\t\t.attr(\"rx\",20);\n\t\t\t\n\t\t\td3.select(\"#svgD\").append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t//.text(d.name)\n\t\t\t.text('company ***')\n\t\t\t\n\t\t\td3.select(\"#svgD\").append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.text('专利数:'+d.patent_num)\n\t\t},\n\t\tinner(x){\n\t\t\tlet D_nodes;\n\t\t\tlet inner = [];\n\t\t\tlet temp = [];\n\t\t\tlet indid = \"\";\n\t\t\tlet indname = \"\";\n\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\tif(this.data_overall[i].name2 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name3 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name4 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name5 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name6 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name7 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t\telse if(this.data_overall[i].name8 == x){\n\t\t\t\t\ttemp.push({name:this.data_overall[i].comp_name,patent_num:this.data_overall[i].patent_num});\n\t\t\t\t\tindid = i+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(var i = 0;i<this.data_overall.length;i++){\n\t\t\t\tif(indid == this.data_overall[i].id){\n\t\t\t\t\tindname = this.data_overall[i].industry_name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tinner = {name:x,children:temp};\n\t\t\tconsole.log(\"indname\"+indname)\n\t\t\tlet r = this.widthD * 0.65;\n\t\t\t\n\t\t\tlet pack = d3.layout.pack()\n\t\t\t.size([r,r])\n\t\t\t.value(function(d){return d.patent_num});\n\t\t\t\n\t\t\tD_nodes = pack.nodes(inner);\n\t\t\tthis.nodesLength = D_nodes.length;\n\t\t\tD_nodes.sort(function(a,b){\n\t\t\t\treturn a.patent_num-b.patent_num\n\t\t\t}); \n\t\t\t//let color2 = d3.scale.linear().domain([0,D_nodes.length]).range([\"#aaa7aa\",\"#4e7f78\"]);\n\t\t\t//console.log(D_nodes)\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.data(D_nodes)\n\t\t\t.enter()\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"class\",\"classD\")\n\t\t\t.attr(\"id\",function(d){return d.name;})\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.data(D_nodes)\n\t\t\t.attr(\"transform\",\"translate(70,50)\")\n\t\t\t.attr(\"cx\",function(d){return d.x;})\n\t\t\t.attr(\"cy\",function(d){return d.y;})\n\t\t\t.attr(\"r\",function(d){return d.r;})\n\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\tthis.hovered = d.name\n\t\t\t\tthis.D_TipRemove()\n\t\t\t\tthis.D_createTip(d)\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t})\n\t\t\t.on(\"mousemove\",d=>{\n\t\t\t\tthis.D_TipRemove()\n\t\t\t\tthis.D_createTip(d)\n\t\t\t\n\t\t\t})\n\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\tthis.hovered = ''\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.D_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewD',\n\t\t\t\t\twidth:this.widthD,\n\t\t\t\t\theight:this.heightD,\n\t\t\t\t\tobj:'tips(company)',\n\t\t\t\t\tname:d.name + ':'+ this.selected,\n\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\tdesc:'the patent number of ' + d.name + ' in ' + this.selected + ' is ' + d.patent_num,\n          data:{\n            industry:this.selected,\n            company:[d.name],\n            province:[],\n            attribute:'patent_num'\n          }\n\t\t\t\t})\n\t\t\t})\n\t\t\t.on(\"click\",(d)=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:\"elementClear\",\n\t\t\t\t\tflag:'company'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewD',\n\t\t\t\t\twidth:this.widthD,\n\t\t\t\t\theight:this.heightD,\n\t\t\t\t\tobj:'select company',\n\t\t\t\t\tname:d.name + ':'+ this.selected,\n\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\tdesc:'the patent number of ' + d.name + ' in ' + this.selected + ' is ' + d.patent_num,\n\t\t\t\t\tvisualKeys:{},\n          data:{\n            industry:this.selected,\n            company:[d.name],\n            province:[],\n            attribute:'patent_num'\n          }\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tif(this.matrixFlag=='tree'){\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:\"updateTreeData\",\n\t\t\t\t\t\t//treeTypeFlag :'company',\n\t\t\t\t\t\tname:d.name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype : 'changeMatrixElement',\n\t\t\t\t\t\telement : d.name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t//console.log(this.$store.state.objD.circled)\n\t\t\t})\n\t\t\t.style(\"stroke\",\"none\")\n\t\t\t.style(\"stroke-width\",2)\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.transition().delay(function(d,i){return i+ d.r*3}).duration(500)\n\t\t\t.style(\"fill\",(d,i)=>{return d.patent_num?this.colorScale(i):\"none\";});\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.data(D_nodes)\n\t\t\t.exit()\n\t\t\t.remove()\n\t\t},\n\t\tale(){\n\t\t\t//console.log(this.$store.state.data_overall)\n\t\t}\n\t},\n\twatch:{\n\t\tleaf(val){\n\t\t\tif(val){\n\t\t\t\tthis.inner(this.selected);\n\t\t\t\td3.select(\"#Dbtn\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t\td3.select(\"#txD\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#svgD\")\n\t\t\t\t.selectAll(\"circle\")\n\t\t\t\t.remove();\n\t\t\t\td3.select(\"#DTitle\")\n\t\t\t\t.text('')\n\t\t\t\td3.select(\"#Dbtn\")\n\t\t\t\t.style(\"display\",'none')\n\t\t\t\td3.select(\"#txD\")\n\t\t\t\t.style(\"display\",'none')\n\t\t\t}\n\t\t},\n\t\tselected(val){\n\t\t\tif(this.leaf){\n\t\t\t\tthis.inner(val);\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tD_title(val){\n\t\t\t//console.log(val)\n\t\t\tif(this.leaf){\n\t\t\t\td3.select(\"#DTitle\")\n\t\t\t\t.text(val + '产业包含企业情况')\n\t\t\t}\n\t\t},\n\t\thovered(val){\n\t\t\t\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>d.name != val)\n\t\t\t.style(\"fill\",(d,i)=>{return d.patent_num?this.colorScale(i):\"none\";});\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>this.treeData.indexOf(d.name) != -1)\n\t\t\t.style(\"fill\",'#25f4ff')\n\t\t\t\n\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>{return d.name == val && d.depth!= 0})\n\t\t\t.style(\"fill\",\"red\");\n\t\t},\n\t\t\n\t\ttreeD(){\n\t\n\t\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t\t.filter(d=>this.treeData.indexOf(d.name) != -1)\n\t\t\t\t.style(\"fill\",'#25f4ff')\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t\t.filter(d=>this.treeData.indexOf(d.name) == -1)\n\t\t\t\t.style(\"fill\",(d,i)=>{return d.patent_num?this.colorScale(i):\"none\";});\n\t\t\t\t\n\t\t},\n\t\tmatrixElement1(){\n\t\t\td3.selectAll(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>{\n\t\t\t\tif(this.matrixElement.indexOf(d.name) != -1){\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\n\t\t\td3.selectAll(\"#svgD\").selectAll(\"circle\")\n\t\t\t.filter(d=>{\n\t\t\t\tif(this.matrixElement.indexOf(d.name) == -1){\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t})\n\t\t\t.style(\"stroke\",\"none\")\n\t\t}\n\t\t\n\t}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}