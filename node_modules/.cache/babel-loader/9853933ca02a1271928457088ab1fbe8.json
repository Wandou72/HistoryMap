{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\n_pushScopeId(\"data-v-40dcbef4\");\n\nconst _hoisted_1 = {\n  id: \"svgA\"\n};\nconst _hoisted_2 = [\"y\"];\nconst _hoisted_3 = [\"dy\"];\n\n_popScopeId();\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"svg\", _hoisted_1, [_createElementVNode(\"rect\", {\n    x: \"0\",\n    y: $data.heightA - 50,\n    height: \"50\",\n    width: \"60\",\n    fill: \"orange\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_2), _createElementVNode(\"text\", {\n    dx: \"30\",\n    dy: $data.heightA - 17,\n    \"text-anchor\": \"middle\",\n    fill: \"white\",\n    \"font-size\": \"25\",\n    \"font-weight\": \"bold\"\n  }, \"A \", 8\n  /* PROPS */\n  , _hoisted_3)]);\n}","map":{"version":3,"sources":["C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentA.vue"],"names":[],"mappings":";;;;;AAEO,EAAA,EAAE,EAAG;;;;;;;;uBAAV,mBAAA,CAiBM,KAjBN,EAAA,UAAA,EAiBM,CAhBJ,mBAAA,CAMI,MANJ,EAMI;AALP,IAAA,CAAC,EAAG,GAKG;AAJN,IAAA,CAAC,EAAI,KAAA,CAAA,OAAA,GAAO,EAIN;AAHP,IAAA,MAAM,EAAG,IAGF;AAFP,IAAA,KAAK,EAAG,IAED;AADP,IAAA,IAAI,EAAG;AACA,GANJ,E,IAAA,E;;AAAA,I,UAAA,CAgBI,EATP,mBAAA,CAQO,MARP,EAQO;AAPP,IAAA,EAAE,EAAG,IAOE;AANN,IAAA,EAAE,EAAI,KAAA,CAAA,OAAA,GAAO,EAMP;AALP,mBAAc,QAKP;AAJP,IAAA,IAAI,EAAG,OAIA;AAHP,iBAAY,IAGL;AAFP,mBAAc;AAEP,GARP,EAOC,IAPD,EAQA;AAAA;AARA,IAQA,UARA,CASO,CAjBN,C","sourcesContent":["<template>\n\n  <svg id = \"svgA\" >\n    <rect\n\tx = 0\n\t:y = 'heightA - 50'\n\theight = 50\n\twidth = 60\n\tfill = 'orange'>\n\t</rect>\n\t<text\n\tdx = 30\n\t:dy = 'heightA - 17'\n\ttext-anchor = 'middle'\n\tfill = 'white'\n\tfont-size = 25\n\tfont-weight = 'bold'\n\t>A\n\t</text>\n  </svg>\n\n</template>\n\n<script>\nimport * as d3 from \"d3\"\n\nimport axios from 'axios'\n\nexport default {\n\tname: 'componentA',\n\tdata(){\n\t\treturn {\n\t\t\theightA:this.$store.state.height * 0.5,\n\t\t\twidthA:this.$store.state.width * 0.3,\n\t\t\thovered:'',\n\t\t\tselected:'',\n\t\t\tleaf:false,\n\t\t\tbar_title:'',\n\t\t\tpanel:false,\n\t\t\tremoveFlag:false,\n\t\t\ttimeOut:null,\n      \n\t\t}\n\t},\n\tmounted(){\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype :'changeSvg',\n\t\t\tsvg :'svgA',\n\t\t\twidth : this.widthA,\n\t\t\theight : this.heightA\n\t\t})\n\t\tthis.$store.commit({\n\t\t\ttype:'appendBtn',\n\t\t\tsvgID:'svgA',\n\t\t\tbtnID:'Abtn',\n\t\t\twidth:this.widthA,\n\t\t\ttext:'show'\n\t\t})\n\n\t\td3.select(\"#Abtn\")\n\t\t.on(\"click\",()=>{\n\t\t\t//console.log(this.$store.state.screenShot)\n\t\t\tthis.$store.commit('showGraph')\n\t\t\t\n\t\t})\n\n\t\taxios.get('data.csv')\n\t\t.then(response=>{\n\t\t\tlet a = d3.csv.parse(response.data);\n\t\t\tthis.$store.commit({\n\t\t\t\ttype :\"changeGlobal\",\n\t\t\t\tkey :'geo',\n\t\t\t\tvalue :a\n\t\t\t});\n\t\t\t//console.log(this.$store.state.geo);\n\t\t\tlet b = this.wholeTree(this.$store.state.geo);\n\t\t\tthis.$store.commit({\n\t\t\t\ttype :\"changeGlobal\",\n\t\t\t\tkey :'data_overall',\n\t\t\t\tvalue :b\n\t\t\t});\n\t\t\t//console.log(this.$store.state.data_overall);\n\t\t})\n\t\t.then(()=>{\n\t\t\tconst c = JSON.parse(JSON.stringify(this.dataToFlare(this.$store.state.data_overall)))\n\t\t\tthis.$store.commit({\n\t\t\t\ttype :\"changeGlobal\",\n\t\t\t\tkey :'flare',\n\t\t\t\tvalue :c\n\t\t\t});\n\t\t})\n\t\t.then(()=>{\n\t\t\t//console.log(this.$store.state.flare)\n\t\t\tthis.createSun(this.$store.state.flare)\n\t\t})\n\t\t//appendLine(svg,width,height,color,stroke,id){\n\t\tthis.$store.commit({\n\t\t\ttype :\"appendLine\",\n\t\t\tid :'lineA',\n\t\t\tsvg :'svgA',\n\t\t\twidth:this.widthA,\n\t\t\theight:this.heightA * 2 / 3 - 20,\n\t\t\tcolor: 'mediumseagreen',\n\t\t\tstroke:1\n\t\t});\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendTitle',\n\t\t\tid:'AbarTitle',\n\t\t\tsvg:'svgA',\n\t\t\tdx:'24px',\n\t\t\tdy:16+this.heightA *2/3,\n\t\t\tsize:14\n\t\t\t\n\t\t})\n\t\t\n\t},\n\tcomputed:{\n\t\tuserData(){\n\t\t\treturn this.$store.state.user.actionList\n\t\t},\n\t\tglobal(){\n\t\t\treturn this.$store.state.geo\n\t\t},\n\t\ttreeData(){\n\t\t\treturn this.$store.state.objB.treeData\n\t\t},\n\t\ttreeDataLength(){\n\t\t\treturn this.treeData.length\n\t\t},\n\t\ttreeDataIndex2(){\n\t\t\treturn this.treeData[1]? this.treeData[1] : undefined\n\t\t},\n\t\trootName(){\n\t\t\treturn this.$store.state.objB.rootName\n\t\t},\n\t\tdepth(){\n\t\t\treturn this.$store.state.objB.depth\n\t\t},\n\t\tflare(){\n\t\t\treturn this.$store.state.flare\n\t\t},\n\t\tselected(){\n\t\t\treturn this.$store.state.selected\n\t\t},\n\t\tvisualStates(){\n\t\t\treturn this.$store.state.visualStates\n\t\t}\n\n\n\n\n\n\t\t// \tselected: payload.selected,\n\t\t// \ttreeTypeFlag: payload.treeTypeFlag,\n\t\t// \tmatrixElement: payload.matrixElement,\n\t\t// \tgraphBtn: payload.graphBtn,\n\t\t// \tobjB: payload.objB,\n\t\t// \tobjC: payload.objC,\n\t\t// \tobjD: payload.objD,\n\t\t// \tobjE: payload.objE\n\n\t},\n\tmethods:{\n\t\tlog(){\n\t\t\tconsole.log(this.$store.state.screenShot)\n\t\t},\n\t\tshot(id){\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'getImg',\n\t\t\t\tid:id\n\t\t\t})\n\t\t},\n\t\tA_createTip(d,svgID,fillColor,fillOpacity,num){\n\t\t\tif (arguments.length <3){\n\t\t\t\tfillColor = 'black'\n\t\t\t}\n\t\t\tif(arguments.length<4){\n\t\t\t\tfillOpacity = 0.7\n\t\t\t}\n\t\t\tif (arguments.length<5){\n\t\t\t\tnum = d.patent_num\n\t\t\t}\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tlet XY = mouseXY(event);\n\t\t\t\n\t\t\td3.select(\"#\"+svgID).append(\"rect\")\n\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr('fill',fillColor)\n\t\t\t.style(\"opacity\",fillOpacity)\n\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t.style(\"width\",d.name.length>10?d.name.length *15 +10:140)\n\t\t\t.attr(\"rx\",20);\n\t\t\t\n\t\t\td3.select(\"#\"+svgID).append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.text(d.name)\n\t\t\t\n\t\t\td3.select(\"#\"+svgID).append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.text('专利数:'+num)\n\t\t},\n\t\tA_TipRemove(svgID){\n\t\t\td3.select(\"#\"+svgID).selectAll(\".tips\").remove()\n\t\t},\n\t\ttip_appendText(x,y,gID,text,fillColor){\n\t\t\tif(arguments.length<5){\n\t\t\t\tfillColor = 'white'\n\t\t\t}\n\t\t\td3.select(\"#\"+gID).append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",x)\n\t\t\t.attr(\"dy\",y)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", fillColor)\n\t\t\t.text(text)\n\t\t},\n\t\tpanel_createTip(d){\n\t\t\t\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tlet XY = mouseXY(event);\n\t\t\tlet len = d.name.length>10?d.name.length *15 +10:140\n\t\t\tif(XY.x>this.$store.state.width * 0.70){\n\t\t\t\tXY.x -= len + 50\n\t\t\t}\n\t\t\td3.select(\"#panel\").append(\"rect\")\n\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.style(\"height\",100)\n\t\t\t.attr('fill','#000000')\n\t\t\t.style(\"opacity\",1)\n\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t.style(\"width\",len)\n\t\t\t.attr(\"rx\",20);\n\t\t\t\n\t\t\tthis.tip_appendText(XY.x+20,XY.y-5,'panel',d.name);\n\t\t\tthis.tip_appendText(XY.x+20,XY.y+15,'panel','view:'+'Svg' + d.view.substring(d.view.length-1,d.view.length));\n\t\t\tthis.tip_appendText(XY.x+20,XY.y+35,'panel','action:'+d.obj)\n\t\t\tthis.tip_appendText(XY.x+20,XY.y+55,'panel','data:'+d.data);\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t},\n\t\tcreateBar(x){\n\t\t\tlet B_tree = d3.layout.tree()\n\t\t\t.size([300,300]);\n\t\t\tlet B_nodes = B_tree.nodes(x);\n\t\t\tB_nodes = B_nodes.filter(d=> ! d.children);\n\t\t\tB_nodes.sort((a,b)=>{\n\t\t\t\treturn b.patent_num - a.patent_num\n\t\t\t})\n\t\t\tlet ind_temp = [];\n\t\t\tif(B_nodes.length<=5){\n\t\t\t\tind_temp = B_nodes\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor(let i =0;i<5;i++){\n\t\t\t\t\tind_temp.push(B_nodes[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tlet bar_data = ind_temp;\n\t\t\t//console.log(bar_data);\n\t\t\tlet bar_color = d3.scale.category20();\n\t\t\tlet bar_scale = d3.scale.linear().domain([bar_data[bar_data.length-1].patent_num,bar_data[0].patent_num]).range([40,this.widthA/3]);\n\t\t\tlet pd = 8,wd = 8;\n\t\t\td3.select(\"#svgA\").selectAll(\".bar1\")\n\t\t\t.data(bar_data)\n\t\t\t.enter()\n\t\t\t.append(\"rect\")\n\t\t\t.attr(\"class\",\"bar1\")\n\t\t\t.attr(\"rx\",5)\n\t\t\t.style(\"fill\",(d,i)=>bar_color(i))\n\t\t\t.attr(\"x\",this.widthA/2)\n\t\t\t.attr(\"y\",(d,i)=> 40 + i * (pd+wd) +this.heightA*2/3 - 14)\n\t\t\t.attr(\"height\",0)\n\t\t\t.attr(\"width\",0)\n\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\td3.select(\"#svgA\").selectAll(\"path\")\n\t\t\t\t.filter(data=>data.name == d.name)\n\t\t\t\t.style(\"fill\",\"#ff0000\");\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t\t\n\t\t\t})\n\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\td3.select(\"#svgA\").selectAll(\"path\")\n\t\t\t\t.filter(data=>data.name != this.selected)\n\t\t\t\t.style(\"fill\",\"#fcf6db\")\n\t\t\t\td3.select(\"#svgA\").selectAll(\"path\")\n\t\t\t\t.filter(data=>data.name == this.selected)\n\t\t\t\t.style(\"fill\",\"#06ddf4\")\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewA',\n\t\t\t\t\tobj:'tips(industry)',\n\t\t\t\t\tname:d.name,\n\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\theight:this.heightA,\n\t\t\t\t\twidth:this.widthA,\n\t\t\t\t\tdesc:'the overall patent number in ' + d.name +' is ' + d.patent_num,\n\t\t\t\t\t\n          data:{\n            industry:d.name,\n            company:[],\n            province:[],\n            attribute:'patent_num'\n          }\n\t\t\t\t})\n\n\t\t\t\t// this.$store.commit('recordState')\n\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".bar1\")\n\t\t\t.data(bar_data)\n\t\t\t.attr(\"width\",0)\n\t\t\t.style(\"fill\",(d,i)=>bar_color(i))\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t.attr(\"height\",wd)\n\t\t\t.attr(\"width\",d=>bar_scale(d.patent_num));\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".bar1\")\n\t\t\t.data(bar_data)\n\t\t\t.exit()\n\t\t\t.remove();\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".barText1\")\n\t\t\t.data(bar_data)\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"class\",\"barText1\")\n\t\t\t\n\t\t\t.attr(\"dx\",this.widthA/2 - 10)\n\t\t\t.attr(\"dy\",(d,i)=> 40 + i * (pd+wd) +10+this.heightA *2/3 -14)\n\t\t\t.attr(\"text-anchor\",\"end\")\n\t\t\t.text(d=>d.name)\n\t\t\t.attr(\"fill\",\"black\")\n\t\t\t.attr(\"font-size\", \"0px\")\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t.attr(\"font-size\", \"12px\")\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".barText1\")\n\t\t\t.data(bar_data)\n\t\t\t.text(d=>d.name)\n\t\t\t.attr(\"font-size\", \"0px\")\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t.attr(\"font-size\", \"12px\");\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".barText1\")\n\t\t\t.data(bar_data)\n\t\t\t.exit()\n\t\t\t.remove();\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".barTextTag1\")\n\t\t\t.data(bar_data)\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"class\",\"barTextTag1\")\n\t\t\t.attr(\"dx\",d=>bar_scale(d.patent_num) + this.widthA/2 +5)\n\t\t\t.attr(\"dy\",(d,i)=> 40 + i * (pd+wd) +10+this.heightA *2/3-14)\n\t\t\t.text(d=>d.patent_num)\n\t\t\t.attr(\"font-size\", \"0px\")\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t.attr(\"font-size\", \"12px\");\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".barTextTag1\")\n\t\t\t.data(bar_data)\n\t\t\t.text(d=>d.patent_num)\n\t\t\t.attr(\"font-size\", \"0px\")\n\t\t\t.attr(\"dx\",d=>bar_scale(d.patent_num) + this.widthA/2 +5)\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t.attr(\"font-size\", \"12px\");\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\".barTextTag1\")\n\t\t\t.data(bar_data)\n\t\t\t.exit()\n\t\t\t.remove();\n\t\t},\n\t\twholeTree(data){\n\t\t\tlet data_overall = [];\n\t\t\tlet keys = ['id','name1','name2','name3','name4','name5','name6','name7','name8','comp_name','patent_num','province'];\n\t\t\tfor(let i = 0;i<data.length;i++){\n\t\t\t\tlet obj = new Object();\n\t\t\t\tfor(let j = 0;j<keys.length;j++){\n\t\t\t\t\tobj[keys[j]] = data[i][keys[j]]\n\t\t\t\t}\n\t\t\t\tdata_overall.push(obj);\n\t\t\t\tif(data_overall[i].name2 == \"OLED\" && data_overall[i].name3 == \"制造工艺\"){\n\t\t\t\t\tdata_overall[i].name3 = \"OLED制造工艺\"\n\t\t\t\t}\n\t\t\t\tif(data_overall[i].name2 == \"OLED\" && data_overall[i].name3 == \"制造设备\"){\n\t\t\t\t\tdata_overall[i].name3 = \"OLED制造设备\"\n\t\t\t\t}\n\t\t\t\tif(data_overall[i].name2 == \"TFT-LCD\" && data_overall[i].name3 == \"制造工艺\"){\n\t\t\t\t\tdata_overall[i].name3 = \"TFT-LCD制造工艺\"\n\t\t\t\t}\n\t\t\t\tif(data_overall[i].name2 == \"TFT-LCD\" && data_overall[i].name3 == \"制造设备\"){\n\t\t\t\t\tdata_overall[i].name3 = \"TFT-LCD制造设备\"\n\t\t\t\t}\n\t\t\t\tif(data_overall[i].name7 == \"电致发光体(EL)\" && data_overall[i].name6 == \"电致发光体(EL)\"){\n\t\t\t\t\tdata_overall[i].name7 = \"电致发光体(EL)(2)\"\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\t//console.log(data_overall)\n\t\t\treturn data_overall\n\t\t\t\n\t\t\t\n\t\t},\n\t\t\n\t\tcreateSun(data){\n\t\t\tconst partition = d3.layout.partition()\n\t\t\t.value(function(d) { return d.patent_num +7000; });\n\t\t\t\n\t\t\tconst radius = (Math.min(this.widthA,this.heightA) / 3) - 10;\n\t\t\t\n\t\t\t//console.log('!!!')\n\t\t\t\n\t\t\tlet x = d3.scale.linear()\n\t\t\t\t\t.range([0, 2 * Math.PI]);\n\t\t\t\n\t\t\tlet y = d3.scale.sqrt()\n\t\t\t\t\t.range([0, radius]);\n\t\t\tconst arc = d3.svg.arc()\n\t\t\t.startAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x))); })\n\t\t\t.endAngle(function(d) { return Math.max(0, Math.min(2 * Math.PI, x(d.x + d.dx))); })\n\t\t\t.innerRadius(function(d) { return Math.max(0, y(d.y)); })\n\t\t\t.outerRadius(function(d) { return Math.max(0, y(d.y + d.dy)); });\n\t\t\t\n\t\t\tlet group_sun = d3.select(\"#svgA\").append(\"g\").attr(\"id\",\"sunrise\")\n\t\t\t.attr(\"transform\",\"translate(\"+ [500/2,500/3 ] +\")\");\n\t\t\t\n\t\t\tlet A_title = d3.select(\"#svgA\").append(\"text\");\n\t\t\t\n\t\t\tA_title.attr(\"dx\",\"24px\")\n\t\t\t.attr(\"dy\",\"30px\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"20px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.style(\"fill\",\"black\")\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.text(\"半导体显示产业结构图\");\n\t\t\t//console.log(partition.nodes(data))\n\t\t\tgroup_sun.selectAll(\"path\")\n\t\t\t\t\t.data(partition.nodes(data))\n\t\t\t\t\t.enter().append(\"path\")\n\t\t\t\t\t.attr(\"d\", arc)\n\t\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\tthis.hovered = d.name\n\t\t\t\t\t\tthis.A_TipRemove('svgA');\n\t\t\t\t\t\tthis.A_createTip(d,'svgA');\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseover'\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t\t.on(\"mousemove\",d=>{\n\t\t\t\t\t\tthis.A_TipRemove('svgA');\n\t\t\t\t\t\tthis.A_createTip(d,'svgA');\n\t\t\t\t\t})\n\t\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\tthis.hovered = ''\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.A_TipRemove('svgA');\n\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewA',\n\t\t\t\t\t\t\tobj:'tips(industry)',\n\t\t\t\t\t\t\tname:d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\twidth:this.widthA,\n\t\t\t\t\t\t\theight:this.heightA,\n\t\t\t\t\t\t\tdesc:'the overall patent number in ' + d.name +' is ' + d.patent_num,\n\t\t\t\t\t\t\tdata:{\n\t\t\t\t\t\t\t\tindustry:d.name,\n\t\t\t\t\t\t\t\tcompany:[],\n\t\t\t\t\t\t\t\tprovince:[],\n\t\t\t\t\t\t\t\tattribute:'patent_num'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\t// this.$store.commit('recordState')\n\t\t\t\t\t\t//this.shot('app')\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t\t// 选择产业节点\n\t\t\t\t\t.on(\"click\",d=>{\n\t\t\t\t\t\t// console.log(this.selected);\n\t\t\t\t\t\tthis.$store.commit(\"objBclear\");\n\t\t\t\t\t\tthis.selected = d.name;\n\t\t\t\t\t\t//console.log(this.selected);\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userClick',\n\t\t\t\t\t\t\tview:'viewA',\n\t\t\t\t\t\t\tobj:'select industry(overall)',\n\t\t\t\t\t\t\tname:d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\theight:this.heightA,\n\t\t\t\t\t\t\twidth:this.widthA,\n\t\t\t\t\t\t\t// desc:'the overall patent number in ' + d.name +' is ' + d.patent_num,\t\n\t\t\t\t\t\t\tdesc:'Select industry ' + d.name,\t\t\n\t\t\t\t\t\t\tdata:{\n\t\t\t\t\t\t\t\tindustry:d.name,\n\t\t\t\t\t\t\t\tcompany:[],\n\t\t\t\t\t\t\t\tprovince:[],\n\t\t\t\t\t\t\t\tattribute:'patent_num'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t// visualKeys: {}\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\t// this.$store.commit('recordState')\n\n\n\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!d.children){\n\t\t\t\t\t\t\tthis.leaf = true;\n\t\t\t\t\t\t\tthis.createBar(d.parent);\n\t\t\t\t\t\t\tthis.bar_title = d.parent.name\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(d.children){\n\t\t\t\t\t\t\tthis.leaf = false\n\t\t\t\t\t\t\tthis.createBar(d);\n\t\t\t\t\t\t\tthis.bar_title = d.name\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t//this.shot('app')\n\t\t\t\t\t\t\n\t\t\t\t\t})\n\t\t\t\t\t.style(\"fill\", \"#fcf6db\")\n\t\t\t\t\t.style(\"fill-opacity\",1)\n\t\t\t\t\t.style(\"stroke\",\"#6c6c6c\")\n\t\t\t\t\t\n\t\t},\n\n\t\tdataToFlare(x){\n\t\t\tvar data8 = [];\n\t\t\t\tvar data81 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name8){\n\t\t\t\t\t\tdata8.push({name:x[i].name8,parent:x[i].name7})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data8.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata81.push(data8[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data8[i].name!=data8[i-1].name){\n\t\t\t\t\t\tdata81.push(data8[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data81.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data81[i].name == x[j].name8){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata81[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar data7 = [];\n\t\t\t\tvar data71 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name7){\n\t\t\t\t\t\tdata7.push({name:x[i].name7,parent:x[i].name6})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(let i = 0;i<data7.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata71.push(data7[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data7[i].name!=data7[i-1].name){\n\t\t\t\t\t\tdata71.push(data7[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data71.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data71[i].name == x[j].name7){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata71[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//6\n\t\t\t\tvar data6 = [];\n\t\t\t\tvar data61 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name6){\n\t\t\t\t\t\tdata6.push({name:x[i].name6,parent:x[i].name5})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data6.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata61.push(data6[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data6[i].name!=data6[i-1].name){\n\t\t\t\t\t\tdata61.push(data6[i])\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data61.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data61[i].name == x[j].name6){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata61[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//5\n\t\t\t\tvar data5 = [];\n\t\t\t\tvar data51 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name5){\n\t\t\t\t\t\tdata5.push({name:x[i].name5,parent:x[i].name4})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data5.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata51.push(data5[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data5[i].name!=data5[i-1].name){\n\t\t\t\t\t\tdata51.push(data5[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data51.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data51[i].name == x[j].name5){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata51[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//4\n\t\t\t\tvar data4 = [];\n\t\t\t\tvar data41 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name4){\n\t\t\t\t\t\tdata4.push({name:x[i].name4,parent:x[i].name3})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data4.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata41.push(data4[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data4[i].name!=data4[i-1].name){\n\t\t\t\t\t\tdata41.push(data4[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data41.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data41[i].name == x[j].name4){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata41[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//3\n\t\t\t\tvar data3 = [];\n\t\t\t\tvar data31 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name3){\n\t\t\t\t\t\tdata3.push({name:x[i].name3,parent:x[i].name2})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data3.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata31.push(data3[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data3[i].name!=data3[i-1].name){\n\t\t\t\t\t\tdata31.push(data3[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data31.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data31[i].name == x[j].name3){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata31[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//2\n\t\t\t\tvar data2 = [];\n\t\t\t\tvar data21 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name2){\n\t\t\t\t\t\tdata2.push({name:x[i].name2,parent:x[i].name1})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data2.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata21.push(data2[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data2[i].name!=data2[i-1].name){\n\t\t\t\t\t\tdata21.push(data2[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data21.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data21[i].name == x[j].name2){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata21[i].patent_num = a\n\t\t\t\t}\n\n\t\t\t\tvar d1=[],\n\t\t\t\td2=[],\n\t\t\t\td3=[],\n\t\t\t\td4=[],\n\t\t\t\td5=[],\n\t\t\t\td6=[],\n\t\t\t\td7=[];\n\t\t\t\t//7\n\t\t\t\tfor(let i = 0;i<data71.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data81.length;j++){\n\t\t\t\t\t\tif(data71[i].name == data81[j].parent){\n\t\t\t\t\t\t\tchildren.push(data81[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\td7.push({name:data71[i].name,children:children,patent_num:data71[i].patent_num})\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{d7.push({name:data71[i].name,patent_num:data71[i].patent_num})}\n\t\t\t\t}\n\t\t\t\t//6\n\t\t\t\tfor(let i = 0;i<data61.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<d7.length;j++){\n\t\t\t\t\t\tif(data61[i].name == data71[j].parent){\n\t\t\t\t\t\t\tchildren.push(d7[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td6.push({name:data61[i].name,children:children,patent_num:data61[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d6.push({name:data61[i].name,patent_num:data61[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//5\n\t\t\t\tfor(let i = 0;i<data51.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data61.length;j++){\n\t\t\t\t\t\tif(data51[i].name == data61[j].parent){\n\t\t\t\t\t\t\tchildren.push(d6[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td5.push({name:data51[i].name,children:children,patent_num:data51[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d5.push({name:data51[i].name,patent_num:data51[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//4\n\t\t\t\tfor(let i = 0;i<data41.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data51.length;j++){\n\t\t\t\t\t\tif(data41[i].name == data51[j].parent){\n\t\t\t\t\t\t\tchildren.push(d5[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td4.push({name:data41[i].name,children:children,patent_num:data41[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d4.push({name:data41[i].name,patent_num:data41[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//3\n\t\t\t\tfor(let i = 0;i<data31.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data41.length;j++){\n\t\t\t\t\t\tif(data31[i].name == data41[j].parent){\n\t\t\t\t\t\t\tchildren.push(d4[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td3.push({name:data31[i].name,children:children,patent_num:data31[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d3.push({name:data31[i].name,patent_num:data31[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//2\n\t\t\t\tfor(let i = 0;i<data21.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data31.length;j++){\n\t\t\t\t\t\tif(data21[i].name == data31[j].parent){\n\t\t\t\t\t\t\tchildren.push(d3[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td2.push({name:data21[i].name,children:children,patent_num:data21[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d2.push({name:data21[i].name,patent_num:data21[i].patent_num})}\n\t\t\t\t\t}\n\n\t\t\t\tlet t_sum = 0;\n\t\t\t\tfor(let i = 0;i<d2.length;i++){\n\t\t\t\t\tt_sum += d2[i].patent_num\n\t\t\t\t}\n\t\t\t\td1={name:\"半导体显示\",children:d2,patent_num:t_sum};\n\t\t\t\t\n\t\t\t\t\treturn d1;\n\t\t},\n\t\taler2(){\n\t\t\t\n\t\t\t\n\t\t},\n\t\tcreatePanel(){\n\t\t\tlet w = this.$store.state.width * 0.85;\n\t\t\tlet h = this.$store.state.height * 0.7;\n\t\t\tlet data = this.userData;\n\t\t\tlet len = data.length;\n\t\t\tlet column = 8\n\t\t\tlet pd = 5,ph = h/(Math.ceil(len/column)+1);\n\t\t\tlet boxWidth = (w - 50)/(column) - pd\n\t\t\tlet boxHeight = 30\n\t\t\t\n\t\t\td3.select(\"body\")\n\t\t\t.append('svg')\n\t\t\t.attr(\"id\",'panel')\n\t\t\t.style(\"left\",this.$store.state.width * 0.08)\n\t\t\t.style(\"top\",this.$store.state.height * 0.1)\n\t\t\t.style(\"position\",'absolute')\n\t\t\t.attr(\"width\",w)\n\t\t\t.attr(\"height\",h)\n\t\t\t.style(\"background-color\",'#000000')\n\t\t\t.style(\"opacity\",0.7)\n\t\t\t\n\t\t\tlet actions = d3.select(\"#panel\").append(\"g\")\n\t\t\tlet color = d3.scale.category10()\n\t\t\tlet scale = d3.scale.linear().domain([1,5]).range([boxHeight,ph ])\n\t\t\tactions.selectAll(\"rect\")\n\t\t\t.data(data)\n\t\t\t.enter()\n\t\t\t.append('rect')\n\t\t\t.attr(\"width\",d=>d.lastTime?boxWidth*3/4:boxWidth)\n\t\t\t.attr('height',d=>d.lastTime?scale(d.lastTime):boxHeight)\n\t\t\t.attr(\"x\",(d,i)=> d.lastTime?(i%column) * (boxWidth + pd)+ pd + boxWidth/8:(i%column) * (boxWidth + pd)+ pd )\n\t\t\t.attr(\"y\",(d,i)=>d.lastTime?(Math.floor(i/column)+1) * ph-scale(d.lastTime)+30:(Math.floor(i/column)+1) * ph)\n\t\t\t.attr(\"rx\",10)\n\t\t\t.style(\"fill\",d=>color(d.view))\n\t\t\t.style(\"stroke-width\",3)\n\t\t\t.style(\"stroke\",d=>d.lastTime? 'None':'white')\n\t\t\t.on(\"mouseover\",(d)=>this.panel_createTip(d))\n\t\t\t.on(\"mousemove\",d=>{\n\t\t\t\tthis.A_TipRemove('panel');\n\t\t\t\tthis.panel_createTip(d)\n\t\t\t})\n\t\t\t.on(\"mouseout\",()=>{\n\t\t\t\tthis.A_TipRemove('panel')\n\t\t\t})\n\t\t\t\n\t\t\tactions.selectAll(\"text\")\n\t\t\t.data(data)\n\t\t\t.enter()\n\t\t\t.append('text')\n\t\t\t.attr(\"width\",boxWidth)\n\t\t\t.attr('height',boxHeight)\n\t\t\t.style(\"fill\",'white')\n\t\t\t.style(\"text-weight\",'bold')\n\t\t\t.attr(\"text-anchor\",'middle')\n\t\t\t.attr(\"dx\",(d,i)=> (i%column) * (boxWidth + pd)+ pd  + boxWidth/2)\n\t\t\t.attr(\"dy\",(d,i)=>(Math.floor(i/column)+1) * ph + 15)\n\t\t\t.on(\"mouseover\",(d)=>this.panel_createTip(d))\n\t\t\t.on(\"mousemove\",d=>{\n\t\t\t\tthis.A_TipRemove('panel');\n\t\t\t\tthis.panel_createTip(d)\n\t\t\t})\n\t\t\t.on(\"mouseout\",()=>{\n\t\t\t\tthis.A_TipRemove('panel')\n\t\t\t})\n\t\t\t.text(d=>d.obj)\n\n\t\t}\n\t},\n\twatch:{\n\t\tpanel(val){\n\t\t\tif(val){\n\t\t\t\tthis.createPanel()\n\t\t\t}\n\t\t\telse {\n\t\t\t\td3.select(\"#panel\")\n\t\t\t\t.remove()\n\t\t\t}\n\t\t},\n\t\thovered(val){\n\t\t\td3.select(\"#svgA\").selectAll(\"path\")\n\t\t\t.filter(d=>{return d.name == val})\n\t\t\t.style(\"fill\",\"#06ddf4\");\n\t\t\t\n\t\t\td3.select(\"#svgA\").selectAll(\"path\")\n\t\t\t.filter(d=>{return d.name != val && d.name != this.selected})\n\t\t\t.style(\"fill\",\"#fcf6db\")\n\t\t},\n\t\tselected(val){\n\t\t\td3.select(\"#svgA\").selectAll(\"path\")\n\t\t\t.filter(d=>{return d.name == val})\n\t\t\t.style(\"fill\",\"#06ddf4\");\n\t\t\td3.select(\"#svgA\").selectAll(\"path\")\n\t\t\t.filter(d=>{return d.name != val})\n\t\t\t.style(\"fill\",\"#fcf6db\");\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'changeDataD',\n\t\t\t\tselected:val,\n\t\t\t\tleaf:this.leaf\n\t\t\t})\n\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeState',\n\t\t\t\t\tAselected:val,\n\t\t\t\t\tAleaf:this.leaf\n\t\t\t\t})\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'changeGlobalD',\n\t\t\t\tkey:'title',\n\t\t\t\tvalue:val\n\t\t\t})\n\t\t\t// 需要在这里修改visualstates的参数\n\n\t\t},\n\t\tbar_title(val){\n\t\t\td3.select(\"#AbarTitle\")\n\t\t\t.text(val+\"叶子产业专利数排序\")\n\t\t},\n\t\tleaf(val){\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeDataD',\n\t\t\t\t\tselected:this.selected,\n\t\t\t\t\tleaf:val\n\t\t\t\t})\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeState',\n\t\t\t\t\tAselected:this.selected,\n\t\t\t\t\tAleaf:val\n\t\t\t\t})\n\n\t\t},\n\t\ttreeDataLength(val){\n\t\t\t\n\t\t\tlet tempDatat =[];\n\t\t\tlet tempDatat2 = [];\n\t\t\tlet tempDatat3 = [];\n\t\t\tlet tempDatat4 = [];\n\t\t\tlet tempDatat5 = [];\n\t\t\tif(val == 0){\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype : 'changeBflare',\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t}\n\t\t\telse if(val == 1){\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i].comp_name == this.treeData[0]){\n\t\t\t\t\t\ttempDatat.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet a = this.dataToFlare(tempDatat)\n\t\t\t\t//console.log(a)\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype : 'changeBflare',\n\t\t\t\t\tflare0 :a\n\t\t\t\t})\n\t\t\t}\n\t\t\telse if(val == 2){\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i]['name'+(this.depth+1)]==this.rootName&&this.$store.state.data_overall[i].comp_name == this.treeData[0]){\n\t\t\t\t\t\ttempDatat.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i]['name'+(this.depth+1)]==this.rootName&&this.$store.state.data_overall[i].comp_name == this.treeData[1]){\n\t\t\t\t\t\ttempDatat2.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i]['name'+(this.depth+1)]==this.rootName&&(this.$store.state.data_overall[i].comp_name == this.treeData[0]||\n\t\t\t\t\tthis.$store.state.data_overall[i].comp_name == this.treeData[1])){\n\t\t\t\t\t\ttempDatat3.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i]['name'+(this.depth+1)]==this.rootName&&(this.$store.state.data_overall[i].comp_name == this.treeData[0]||\n\t\t\t\t\tthis.$store.state.data_overall[i].comp_name == this.treeData[1])){\n\t\t\t\t\t\ttempDatat4.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i]['name'+(this.depth+1)]==this.rootName&&(this.$store.state.data_overall[i].comp_name == this.treeData[0]||\n\t\t\t\t\tthis.$store.state.data_overall[i].comp_name == this.treeData[1])){\n\t\t\t\t\t\ttempDatat5.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet a = this.dataToFlare(tempDatat);\n\t\t\t\tlet b = this.dataToFlare(tempDatat2);\n\t\t\t\tlet c = this.dataToFlare(tempDatat3);\n\t\t\t\tlet d = this.dataToFlare(tempDatat4);\n\t\t\t\tlet e = this.dataToFlare(tempDatat5);\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype : 'changeBflare',\n\t\t\t\t\tflare0 :a,\n\t\t\t\t\tflare1 :b,\n\t\t\t\t\tflareSum :c,\n\t\t\t\t\tflareSum2 :d,\n\t\t\t\t\tflareSum3 :e\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t},\n\t\ttreeDataIndex2(val){\n\t\t\tlet tempDatat =[];\n\t\t\tlet tempDatat2 = [];\n\t\t\tlet tempDatat3 = [];\n\t\t\tlet tempDatat4 = [];\n\t\t\tlet tempDatat5 = [];\n\t\t\t\n\t\t\tif(val){\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i].comp_name == this.treeData[0]){\n\t\t\t\t\t\ttempDatat.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i].comp_name == this.treeData[1]){\n\t\t\t\t\t\ttempDatat2.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i].comp_name == this.treeData[0]||\n\t\t\t\t\tthis.$store.state.data_overall[i].comp_name == this.treeData[1]){\n\t\t\t\t\t\ttempDatat3.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i].comp_name == this.treeData[0]||\n\t\t\t\t\tthis.$store.state.data_overall[i].comp_name == this.treeData[1]){\n\t\t\t\t\t\ttempDatat4.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<this.$store.state.data_overall.length;i++){\n\t\t\t\t\tif(this.$store.state.data_overall[i].comp_name == this.treeData[0]||\n\t\t\t\t\tthis.$store.state.data_overall[i].comp_name == this.treeData[1]){\n\t\t\t\t\t\ttempDatat5.push(this.$store.state.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet a = this.dataToFlare(tempDatat);\n\t\t\t\tlet b = this.dataToFlare(tempDatat2);\n\t\t\t\tlet c = this.dataToFlare(tempDatat3);\n\t\t\t\tlet d = this.dataToFlare(tempDatat4);\n\t\t\t\tlet e = this.dataToFlare(tempDatat5);\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype : 'changeBflare',\n\t\t\t\t\tflare0 :a,\n\t\t\t\t\tflare1 :b,\n\t\t\t\t\tflareSum :c,\n\t\t\t\t\tflareSum2 :d,\n\t\t\t\t\tflareSum3 :e\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}