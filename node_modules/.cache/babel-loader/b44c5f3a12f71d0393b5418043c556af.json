{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\n_pushScopeId(\"data-v-40ead675\");\n\nconst _hoisted_1 = {\n  id: \"svgB\"\n};\nconst _hoisted_2 = [\"y\"];\nconst _hoisted_3 = [\"dy\"];\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  id: \"svgB2\"\n}, null, -1\n/* HOISTED */\n);\n\n_popScopeId();\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [(_openBlock(), _createElementBlock(\"svg\", _hoisted_1, [_createCommentVNode(\" <rect @click = 'ale()'></rect> \"), _createCommentVNode(\" <text id = 'txt23' >click to show</text> \"), _createCommentVNode(\" <rect @click = 'ale()'></rect> \"), _createElementVNode(\"rect\", {\n    x: \"0\",\n    y: $data.heightB - 50,\n    height: \"50\",\n    width: \"60\",\n    fill: \"orange\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_2), _createElementVNode(\"text\", {\n    dx: \"30\",\n    dy: $data.heightB - 17,\n    \"text-anchor\": \"middle\",\n    fill: \"white\",\n    \"font-size\": \"25\",\n    \"font-weight\": \"bold\"\n  }, \"C \", 8\n  /* PROPS */\n  , _hoisted_3)])), _hoisted_4], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"sources":["C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentB.vue"],"names":[],"mappings":";;;;;AAES,EAAA,EAAE,EAAG;;;;;gCAqBb,mBAAA,CAEM,KAFN,EAEM;AAFD,EAAA,EAAE,EAAG;AAEJ,CAFN,EAAiB,IAAjB,EAAiB,CAAA;AAAA;AAAjB,C;;;;;4EArBG,mBAAA,CAoBG,KApBH,EAAA,UAAA,EAoBG,CAnBL,mBAAA,CAAA,kCAAA,CAmBK,EAlBL,mBAAA,CAAA,4CAAA,CAkBK,EAjBL,mBAAA,CAAA,kCAAA,CAiBK,EAhBL,mBAAA,CAMM,MANN,EAMM;AALP,IAAA,CAAC,EAAG,GAKG;AAJN,IAAA,CAAC,EAAI,KAAA,CAAA,OAAA,GAAO,EAIN;AAHP,IAAA,MAAM,EAAG,IAGF;AAFP,IAAA,KAAK,EAAG,IAED;AADP,IAAA,IAAI,EAAG;AACA,GANN,E,IAAA,E;;AAAA,I,UAAA,CAgBK,EATN,mBAAA,CAQO,MARP,EAQO;AAPP,IAAA,EAAE,EAAG,IAOE;AANN,IAAA,EAAE,EAAI,KAAA,CAAA,OAAA,GAAO,EAMP;AALP,mBAAc,QAKP;AAJP,IAAA,IAAI,EAAG,OAIA;AAHP,iBAAY,IAGL;AAFP,mBAAc;AAEP,GARP,EAOC,IAPD,EAQA;AAAA;AARA,IAQA,UARA,CASM,CApBH,C,GAqBH,U","sourcesContent":["<template>\n\t\n    <svg id = \"svgB\" >\n\t\t<!-- <rect @click = 'ale()'></rect> -->\n\t\t<!-- <text id = 'txt23' >click to show</text> -->\n\t\t<!-- <rect @click = 'ale()'></rect> -->\n\t\t<rect\n\tx = 0\n\t:y = 'heightB - 50'\n\theight = 50\n\twidth = 60\n\tfill = 'orange'>\n\t</rect>\n\t<text\n\tdx = 30\n\t:dy = 'heightB - 17'\n\ttext-anchor = 'middle'\n\tfill = 'white'\n\tfont-size = 25\n\tfont-weight = 'bold'\n\t>C\n\t</text>\n\t</svg>\n\t<svg id = 'svgB2'>\n\t\t\n\t</svg>\n\n</template>\n\n<script>\nimport * as d3 from \"d3\"\n\n//import axios from 'axios'\n\nexport default {\n\tname: 'componentB',\n\tdata(){\n\t\treturn {\n\t\t\theightB:this.$store.state.height * 0.85,\n\t\t\twidthB:this.$store.state.width * 0.4,\n\t\t\theightB2:this.$store.state.height * 0.15+5,\n\t\t\treportFlag:false,\n\t\t\t\n\t\t\t\tstoryFlag:false,\n\t\t\t\tstoryIndex:0,\n\t\t\t\tstory:{\n\t\t\t\t\t\n\t\t\t\tlist:['a1','is','a','a2','semiconductor','display','enterprise,',\n\t\t\t\t\t\t'with','a','total','of','a3','patents ','in','the','semiconductor',\n\t\t\t\t\t\t'display','industry.','The','main','secondary','industry','of','a1',\n\t\t\t\t\t\t'is','a4',',','with','a5','patents.','Its','overall','industrial',\n\t\t\t\t\t\t'distribution','involves','a6','secondary','industries','and','a7','leaf',\n\t\t\t\t\t\t'industries,','of','which','a8','has','the','largest','number','of','patents',\n\t\t\t\t\t\t'reaching','a9','patents.']\n\t\t\t}\n\t\t}\n\t},\n\tmounted(){\n\t\tthis.$store.commit({\n\t\t\ttype:'appendBtn',\n\t\t\tsvgID:'svgB2',\n\t\t\tbtnID:'Bbtn',\n\t\t\twidth:this.widthB,\n\t\t\ttext:'next'\n\t\t})\n\t\td3.select(\"#Bbtn\")\n\t\t.style(\"display\",'none')\n\t\t.attr(\"transform\",'translate('+[this.widthB-70,3]+')')\n\t\t.on(\"click\",()=>{\n\t\t\t\n\t\t\tthis.storyIndex==1? this.storyIndex = 2:this.storyIndex = 1\n\t\t})\n\t\t\n\t\t\n\t\td3.select(\"#svgB\")\n\t\t.attr(\"width\",this.widthB)\n\t\t.attr(\"height\",this.heightB)\n\t\td3.select(\"#svgB2\")\n\t\t.attr(\"width\",this.widthB)\n\t\t.attr(\"height\",this.heightB2)\n\t\td3.select(\"#svgB2\").append(\"g\").attr(\"id\",'storyText')\n\t\tthis.$store.commit({\n\t\t\ttype :\"appendLine\",\n\t\t\tid :'lineB',\n\t\t\tsvg :'svgB2',\n\t\t\twidth:this.widthB,\n\t\t\theight:1,\n\t\t\tcolor: 'mediumseagreen',\n\t\t\tstroke:1\n\t\t});\n\t\t//.attr(\"margin-left\",this.$store.state.width * 0.3)\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",\"gDia\")\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",\"gLinks1\")\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",'gCircles1')\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",\"gLinks2\")\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",'gCircles2')\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",'gTag1')\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",'gTag2')\n\t\td3.select(\"#svgB\").append(\"g\").attr(\"id\",\"report\")\n\t\t.attr(\"transform\",'translate('+[0,20]+')')\n\t\t\n\t\td3.select(\"#svgB\").append('g').attr(\"id\",'splitBtn')\n\t\t.style(\"cursor\",'pointer')\n\t\t.style(\"display\",'none')\n\t\t.on(\"click\",()=>{\n\t\t\t// here\n\t\t\tthis.$store.commit('objBSplitFlag')\n\t\t})\n\t\t.attr(\"transform\",\"translate(\"+ [this.widthB/7 * 5 - 45,0] +\")\");\n\t\td3.select(\"#splitBtn\").append(\"rect\").attr(\"height\",30).attr(\"width\",55)\n\t\t.attr(\"x\",30)\n\t\t.attr(\"y\",30)\n\t\t.attr(\"rx\",15)\n\t\t.style(\"fill\",\"#939393\");\n\t\td3.select(\"#splitBtn\").append(\"circle\")\n\t\t.attr(\"cx\",45)\n\t\t.attr(\"cy\",45)\n\t\t.attr(\"r\",13)\n\t\t.style(\"fill\",\"white\");\n\t\td3.select(\"#splitBtn\").append(\"text\")\n\t\t.attr(\"text-anchor\",'middle')\n\t\t.attr(\"dx\",57.5)\n\t\t.attr(\"dy\",26)\n\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t.attr(\"font-size\", \"14px\")\n\t\t.attr(\"font-weight\", \"bold\")\n\t\t.text(\"split\")\n\t\t\n\t\td3.select(\"#svgB\").append('g').attr(\"id\",'reportBtn')\n\t\t.style(\"cursor\",'pointer')\n\t\t.style(\"display\",'none')\n\t\t.on(\"click\",()=>{\n\t\t\t\n\t\t\tif(this.reportFlag){\n\t\t\t\tthis.reportFlag = false\n\t\t\t\t/*\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\tobj:'report(button)',\n\t\t\t\t\tname:this.treeData[0] +'vs'+this.treeData[1],\n\t\t\t\t\tvalue:'report:false',\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n            province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n            attribute:'comparison'\n          }\n          \n\t\t\t\t\t\n\t\t\t\t})*/\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.reportFlag = true\n\t\t\t\t/*\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\tobj:'report(button)',\n\t\t\t\t\tname:this.treeData[0] +'vs'+this.treeData[1],\n\t\t\t\t\tvalue:'report:true',\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n            province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n            attribute:'comparison'\n          }\n\t\t\t\t})*/\n\t\t\t}\n\t\t})\n\t\t.attr(\"transform\",\"translate(\"+ [this.widthB/7 * 5 +50,0] +\")\");\n\t\td3.select(\"#reportBtn\").append(\"rect\").attr(\"height\",30).attr(\"width\",55)\n\t\t.attr(\"x\",30)\n\t\t.attr(\"y\",30)\n\t\t.attr(\"rx\",15)\n\t\t.style(\"fill\",\"#939393\");\n\t\td3.select(\"#reportBtn\").append(\"circle\")\n\t\t.attr(\"cx\",45)\n\t\t.attr(\"cy\",45)\n\t\t.attr(\"r\",13)\n\t\t.style(\"fill\",\"white\");\n\t\t\n\t\td3.select(\"#reportBtn\").append(\"text\")\n\t\t.attr(\"text-anchor\",'middle')\n\t\t.attr(\"dx\",57.5)\n\t\t.attr(\"dy\",26)\n\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t.attr(\"font-size\", \"14px\")\n\t\t.attr(\"font-weight\", \"bold\")\n\t\t.text(\"report\")\n\t\t\n\t\td3.select(\"#svgB\").append(\"text\").attr(\"id\",\"Btitle\")\n\t\t.attr(\"dx\",\"24px\")\n\t\t.attr(\"dy\",\"36px\")\n\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t.attr(\"font-size\", \"24px\")\n\t\t.attr(\"font-weight\", \"bold\")\n\t\t.style(\"fill\",\"black\")\n\t\t.attr(\"text-anchor\",\"start\")\n\t\t.text(this.rootName + '产业树对比图')\n\t\t//.text(\"半导体显示产业树对比图\")\n\t\t.style(\"display\",\"none\");\n\t\t\n\t\td3.select(\"#svgB\").append(\"text\").attr(\"id\",\"Bleft\")\n\t\t.attr(\"dx\",20)\n\t\t.attr(\"text-anchor\",\"start\")\n\t\t.attr(\"dy\",this.heightB/8)\n\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t.attr(\"font-size\", \"13px\")\n\t\t.attr(\"font-weight\", \"bold\")\n\t\t.style(\"fill\",\"#000000\")\n\t\t.style(\"cursor\",\"pointer\")\n\t\t.on(\"click\",()=>{\n\t\t\t\n\t\tthis.$store.commit({\n\t\t\ttype :'delTreeData',\n\t\t\tindex:'left'\n\t\t})\n\t\t\t////////console.log(this.treeData)\n\t\t})\n\t\t//.text(\"江苏三月科技有限公司\")\n\t\t\n\t\td3.select(\"#svgB\").append(\"text\").attr(\"id\",\"Bright\")\n\t\t.attr(\"dx\",this.widthB - 50)\n\t\t.attr(\"text-anchor\",\"end\")\n\t\t.attr(\"dy\",this.heightB/8)\n\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t.attr(\"font-size\", \"13px\")\n\t\t.attr(\"font-weight\", \"bold\")\n\t\t.style(\"fill\",\"#000000\")\n\t\t.style(\"cursor\",\"pointer\")\n\t\t.on(\"click\",()=>{\n\t\t\t\n\t\tthis.$store.commit({\n\t\t\ttype :'delTreeData',\n\t\t\tindex:'right'\n      })\n\t\t})\n\t\t//.text(\"浙江工业大学\")\n\t\t\n\t\td3.select(\"#svgB\").select(\"#txt23\")\n\t\t.attr(\"dy\",60)\n\t\t.style(\"display\",'inline')\n\t\t\n\t\t.on(\"click\",()=>{\n\t\t\t//////console.log(this.asd)\n\t\t})\n\t},\n\tcomputed:{\n\t\tasd(){\n\t\t\treturn this.$store.state.user.actionList\n\t\t},\n\t\tstory_text(){\n\t\t\tlet a = d3.select(\"#storyText\")\n\t\t\treturn a\n\t\t},\n\t\ttreeD(){\n\t\t\treturn this.treeData +'1'\n\t\t},\n\t\tshowBtn(){\n\t\t\tif(this.treeData.length == 2){\n\t\t\t\treturn true\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false\n\t\t\t}\n\t\t},\n\t\ttreeTypeFlag(){\n\t\t\treturn this.$store.state.treeTypeFlag\n\t\t},\n\t\tB_nodes1(){\n\t\t\tif(this.treeData[0]){\n\t\t\t\tlet tempDatat = [];\n\t\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\t\tif(this.treeTypeFlag == 'company'){\n\t\t\t\t\t\tif(this.data_overall[i].comp_name == this.treeData[0] &&\n\t\t\t\t\t\tthis.data_overall[i]['name'+(this.depth+1)] == this.rootName){\n\t\t\t\t\t\t\ttempDatat.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.treeTypeFlag == 'province'){\n\t\t\t\t\t\tif(this.data_overall[i].province.substring(0,2) == this.treeData[0].substring(0,2) &&\n\t\t\t\t\t\tthis.data_overall[i]['name'+(this.depth+1)] == this.rootName){\n\t\t\t\t\t\t\ttempDatat.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet a = this.dataToFlare(tempDatat);\n\t\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\t\t\t\n\t\t\t\tlet b = B_tree1.nodes(a);\n\t\t\t\tfor(let i = 0;i<b.length;i++){\n\t\t\t\t\tb[i].x += this.heightB/6;\n\t\t\t\t\tb[i].y += this.widthB/20\n\t\t\t\t}\n\t\t\t\treturn b\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn []\n\t\t\t}\n\t\t},\n\t\tB_nodes2(){\n\t\t\tif(this.treeData[1]){\n\t\t\t\tlet tempDatat2 = [];\n\t\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\t\tif(this.treeTypeFlag == 'company'){\n\t\t\t\t\t\tif(this.data_overall[i].comp_name == this.treeData[1] &&\n\t\t\t\t\t\tthis.data_overall[i]['name'+(this.depth+1)] == this.rootName){\n\t\t\t\t\t\t\ttempDatat2.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.treeTypeFlag == 'province'){\n\t\t\t\t\t\tif(this.data_overall[i].province.substring(0,2) == this.treeData[1].substring(0,2) &&\n\t\t\t\t\t\tthis.data_overall[i]['name'+(this.depth+1)] == this.rootName){\n\t\t\t\t\t\t\ttempDatat2.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet a = this.dataToFlare(tempDatat2);\n\t\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\t\tlet b = B_tree1.nodes(a);\n\t\t\t\treturn b\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn []\n\t\t\t}\n\t\t},\n\t\tB_nodes3(){\n\t\t\tif(this.treeData[1]){\n\t\t\t\tlet tempDatat3 = [];\n\t\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\t\tif(this.treeTypeFlag =='company'){\n\t\t\t\t\t\tif(this.data_overall[i]['name'+(this.depth+1)] == this.rootName&&(this.data_overall[i].comp_name == this.treeData[0] || this.data_overall[i].comp_name == this.treeData[1])){\n\t\t\t\t\t\t\ttempDatat3.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.treeTypeFlag == 'province'){\n\t\t\t\t\t\tif(this.data_overall[i]['name'+(this.depth+1)] == this.rootName&&(this.data_overall[i].province.substring(0,2) == this.treeData[0].substring(0,2) || this.data_overall[i].province.substring(0,2) == this.treeData[1].substring(0,2))){\n\t\t\t\t\t\t\ttempDatat3.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet a = this.dataToFlare(tempDatat3);\n\t\t\t\tfor(let i = 0;i<this.depth;i++){\n\t\t\t\t\t\ta = a.children[0];\n\t\t\t\t}\n\t\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\t\tlet b = B_tree1.nodes(a);\n\t\t\t\tfor(let i = 0;i<b.length;i++){\n\t\t\t\t\t\t\t\tb[i].x += this.heightB/6;\n\t\t\t\t\t\t\t\tb[i].y += this.widthB/20\n\t\t\t\t}\n\t\t\t\t//////console.log(b)\n\t\t\t\treturn b\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn []\n\t\t\t}\n\t\t},\n\t\tB_nodes4(){\n\t\t\tif(this.treeData[1]){\n\t\t\t\tlet tempDatat3 = [];\n\t\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\t\tif(this.treeTypeFlag =='company'){\n\t\t\t\t\t\tif(this.data_overall[i]['name'+(this.depth+1)] == this.rootName&&(this.data_overall[i].comp_name == this.treeData[0] || this.data_overall[i].comp_name == this.treeData[1])){\n\t\t\t\t\t\t\ttempDatat3.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.treeTypeFlag == 'province'){\n\t\t\t\t\t\tif(this.data_overall[i]['name'+(this.depth+1)] == this.rootName&&(this.data_overall[i].province.substring(0,2) == this.treeData[0].substring(0,2) || this.data_overall[i].province.substring(0,2) == this.treeData[1].substring(0,2))){\n\t\t\t\t\t\t\ttempDatat3.push(this.data_overall[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet a = this.dataToFlare(tempDatat3);\n\t\t\t\tfor(let i = 0;i<this.depth;i++){\n\t\t\t\t\t\ta = a.children[0];\n\t\t\t\t}\n\t\t\t\tlet B_tree2 = d3.layout.tree()\n\t\t\t\t.size([(this.heightB *4/5), - (this.widthB*2/5 )]);\n\t\t\t\tlet b = B_tree2.nodes(a);\n\t\t\t\tfor(let i = 0;i<b.length;i++){\n\t\t\t\t\t\t\t\tb[i].x += this.heightB/6;\n\t\t\t\t\t\t\t\tb[i].y += this.widthB/20\n\t\t\t\t}\n\t\t\t\treturn b\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn []\n\t\t\t}\n\t\t},\n\t\tB_nodes31(){\n\t\t\tlet tempdatat = [];\n\t\t\tfor(let i = 0;i<this.B_nodes3.length;i++){\n\t\t\t\tif(this.D1.indexOf(this.B_nodes3[i].name) != -1){\n\t\t\t\t\ttempdatat.push(this.B_nodes3[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(let i = 0;i<tempdatat.length;i++){\n\t\t\t\ttempdatat[i].y = tempdatat[i].y - (tempdatat[i].y - tempdatat[0].y)/2 \n\t\t\t}\n\t\t\treturn tempdatat\n\t\t\t\n\t\t},\n\t\tB_nodes32(){\n\t\t\tlet tempdatat = [];\n\t\t\tfor(let i = 0;i<this.B_nodes4.length;i++){\n\t\t\t\tif(this.D2.indexOf(this.B_nodes4[i].name ) != -1){\n\t\t\t\t\ttempdatat.push(this.B_nodes4[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor(let i = 0;i<tempdatat.length;i++){\n\t\t\t\ttempdatat[i].y  += this.widthB - 80\n\t\t\t\n\t\t\t}\n\t\t\treturn tempdatat\n\t\t\t\n\t\t},\n\t\t\n\t\tdata_overall(){\n\t\t\treturn this.$store.state.data_overall\n\t\t},\n\t\trootName(){\n\t\t\treturn this.$store.state.objB.rootName\n\t\t},\n\t\tdepth(){\n\t\t\treturn this.$store.state.objB.depth\n\t\t},\n\t\tsplited(){\n\t\t\treturn this.$store.state.objB.splited\n\t\t},\n\t\ttreeData(){\n\t\t\treturn this.$store.state.objB.treeData\n\t\t},\n\t\ttreeDataLength(){\n\t\t\treturn this.treeData.length\n\t\t},\n\t\tflare0(){\n\t\t\treturn this.$store.state.objB.flare0\n\t\t},\n\t\tflare1(){\n\t\t\treturn this.$store.state.objB.flare1\n\t\t},\n\t\tflareSum(){\n\t\t\treturn this.$store.state.objB.flareSum\n\t\t},\n\t\tflareSum2(){\n\t\t\treturn this.$store.state.objB.flareSum2\n\t\t},\n\t\tflareSum3(){\n\t\t\treturn this.$store.state.objB.flareSum3\n\t\t},\n\t\tD1(){\n\t\t\tlet tempDatat=[];\n\t\t\tfor(let i = 0;i<this.B_nodes1.length;i++){\n\t\t\t\ttempDatat.push(this.B_nodes1[i].name);\n\t\t\t}\n\t\t\treturn tempDatat\n\t\t},\n\t\tD2(){\n\t\t\tlet tempDatat=[];\n\t\t\tfor(let i = 0;i<this.B_nodes2.length;i++){\n\t\t\t\ttempDatat.push(this.B_nodes2[i].name);\n\t\t\t}\n\t\t\treturn tempDatat\n\t\t},\n\t\tD3(){\n\t\t\tlet tempDatat=[];\n\n\t\t\t\tfor(let i = 0;i<this.B_nodes3.length;i++){\n\n\t\t\t\t\t\ttempDatat.push(this.B_nodes3[i].name);\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\n\t\t\treturn tempDatat\n\t\t}\n\t},\n\tmethods:{\n\t\tappendStory(container,nodeData,storyColor,indexInfo,list,posX,posY,width,fontsize,fontfamily,ref,index,nodeData2){\n\t\t\tlet story1 = nodeData;\n\t\t\tlet svgB = d3.select(\"#svgB\")\n\t\t\tvar a8 = (flag,node,splited,node2,index)=>{\n\t\t\t\tif(flag == 'create'){\n\t\t\t\t\tif(!splited){\n\t\t\t\t\t\td3.select(\"#gCircles\"+1).selectAll(\"circle\")\n\t\t\t\t\t\t.data(node)\n\t\t\t\t\t\t.filter(d=>d.name == getText('a8'))\n\t\t\t\t\t\t.style(\"stroke\",storyColor)\n\t\t\t\t\t\t.style('stroke-width',2)\n\t\t\t\t\t\tindex ==1? hoverTip(getText('a8'),node,this.B_nodes1):hoverTip(getText('a8'),node,this.B_nodes2)\n\t\t\t\t\t}\n\t\t\t\t\telse if(splited){\n\t\t\t\t\t\td3.select(\"#gCircles\"+index).selectAll(\"circle\")\n\t\t\t\t\t\t.data(node2)\n\t\t\t\t\t\t.filter(d=>d.name == getText('a8'))\n\t\t\t\t\t\t.style(\"stroke\",storyColor)\n\t\t\t\t\t\t.style('stroke-width',2)\n\t\t\t\t\t\t\n\t\t\t\t\t\tindex ==1? hoverTip(getText('a8'),node2,this.B_nodes1):hoverTip(getText('a8'),node2,this.B_nodes2)\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (flag == 'remove'){\n\t\t\t\t\tsvgB.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\t\t.style(\"stroke\",'black')\n\t\t\t\t\t\n\t\t\t\t\tsvgB.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\t\t.style(\"stroke\",'black')\n\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar a6All =(flag,type,node,ref,splited,node2,index)=>{\n\t\t\t\tlet nameL = ['OLED','QLED','应刷显示','TFT-LCD','MiniLED','MicroLED']\n\t\t\t\tlet list1 = [];\n\t\t\t\tfunction judgeIn(x,judgeType){\n\t\t\t\t\tlet flag1 = false;\n\t\t\t\t\tif(judgeType == 'secondary'){\n\t\t\t\t\t\tfor(let i = 0;i<nameL.length;i++){\n\t\t\t\t\t\t\tif (nameL[i] == x.name){\n\t\t\t\t\t\t\t\tflag1 = true\n\t\t\t\t\t\t\t\tlist1.push(x.name)\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn flag1\n\t\t\t\t\t}\n\t\t\t\t\telse if (judgeType == 'leaf'){\n\t\t\t\t\t\tif(!x.children){\n\t\t\t\t\t\t\tflag1 = true\n\t\t\t\t\t\t\tlist1.push(x.name)\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn flag1\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(flag == 'create'){\n\t\t\t\t\tif(!splited){\n\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(node)\n\t\t\t\t\t\t.filter(d=>judgeIn(d,type)&&ref.indexOf(d.name)!=-1)\n\t\t\t\t\t\t.style(\"stroke\",storyColor)\n\t\t\t\t\t\t.style(\"stroke-width\",2)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(list1.length<9){\n\t\t\t\t\t\t\tfor(let i = 0;i<list1.length;i++){\n\t\t\t\t\t\t\t\tif(ref.indexOf(list1[i])!=-1){\n\t\t\t\t\t\t\t\t\tindex ==1? hoverTip(list1[i],this.B_nodes3,this.B_nodes1):hoverTip(list1[i],this.B_nodes3,this.B_nodes2)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\telse if(splited){\n\t\t\t\t\t\td3.select(\"#gCircles\"+index).selectAll(\"circle\")\n\t\t\t\t\t\t.data(node2)\n\t\t\t\t\t\t.filter(d=>judgeIn(d,type)&&ref.indexOf(d.name)!=-1)\n\t\t\t\t\t\t.style(\"stroke\",storyColor)\n\t\t\t\t\t\t.style(\"stroke-width\",2)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(list1.length<9){\n\t\t\t\t\t\t\tfor(let i = 0;i<list1.length;i++){\n\t\t\t\t\t\t\t\tif(ref.indexOf(list1[i]!=-1)){\n\t\t\t\t\t\t\t\t\tindex ==1? hoverTip(list1[i],this.B_nodes31,this.B_nodes1):hoverTip(list1[i],this.B_nodes32,this.B_nodes2)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse if (flag == 'remove'){\n\t\t\t\t\tsvgB.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\t\t.style(\"stroke\",'black')\n\t\t\t\t\t\n\t\t\t\t\tsvgB.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\t\t.style(\"stroke\",'black')\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar secondary = (node,splited,index,node2,ref)=>{\n\t\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\t\tlet B_tree2 = d3.layout.tree()\n\t\t\t\t\t.size([(this.heightB *4/5),(this.widthB * (-2/5) )]);\n\t\t\t\tlet links;\n\t\t\t\tif(!splited){\n\t\t\t\t\tlinks = B_tree1.links(node)\n\t\t\t\t\t\n\t\t\t\t\tsvgB.select('#gLinks'+1).selectAll(\"path\")\n\t\t\t\t\t.data(links)\n\t\t\t\t\t.filter(d=>getParent(d.source,a3Name))\n\t\t\t\t\t.style(\"stroke\",storyColor)\n\t\t\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t\t\t//.transition()\n\t\t\t\t\t.style(\"stroke-width\",3)\n\t\t\t\t\t\n\t\t\t\t\tindex==1?hoverTip(getSecondary(nodeData,'name'),node,this.B_nodes1):hoverTip(getSecondary(nodeData,'name'),node,this.B_nodes2)\n\t\t\t\t}\n\t\t\t\telse if (splited){\n\t\t\t\t\tlinks = B_tree2.links(node2)\n\t\t\t\t\t\n\t\t\t\t\tlinks = links.filter(d=>{\n\t\t\t\t\t\t\tif(ref.indexOf(d.target.name) != -1){\n\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tsvgB.select('#gLinks'+index).selectAll(\"path\")\n\t\t\t\t\t.data(links)\n\t\t\t\t\t.filter(d=>getParent(d.source,a3Name))\n\t\t\t\t\t.style(\"stroke\",storyColor)\n\t\t\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t\t\t//.transition()\n\t\t\t\t\t.style(\"stroke-width\",3)\n\t\t\t\t\t\n\t\t\t\t\tindex == 1?hoverTip(getSecondary(nodeData,'name'),node2,this.B_nodes1):hoverTip(getSecondary(nodeData,'name'),node2,this.B_nodes2)\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\t// eslint-disable-next-line\n\t\t\tvar getParent =(x,name)=>{\n\t\t\t\tlet judgeList = [];\n\t\t\t\tfunction traverse(node){\n\t\t\t\t\tjudgeList.push(node);\n\t\t\t\t\tif (node.children){\n\t\t\t\t\t\tfor(let i = 0;i<node.children.length;i++){\n\t\t\t\t\t\t\ttraverse(node.children[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttraverse(this.$store.state.flare)\n\t\t\t\t\n\t\t\t\tfor(let i = 0;i<judgeList.length;i++){\n\t\t\t\t\tif(x.name == judgeList[i].name && judgeList[i].name == name){\n\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (x.name == judgeList[i].name && judgeList[i].parent){\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn getParent(judgeList[i].parent,name)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\tvar hoverTip=(name,data,data2)=>{\n\t\t\t\tlet pos ;\n\t\t\t\tlet d ;\n\t\t\t\tfor(let i = 0;i<data.length;i++){\n\t\t\t\t\tif(data[i].name == name){\n\t\t\t\t\t\tthis.splited||name=='半导体显示'? pos={x:data[i].y + 10,y:data[i].x }:pos={x:data[i].y + 50,y:data[i].x +50  };\n\t\t\t\t\t\td = data[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.B_createTip(d,0,data2,pos)\n\t\t\t}\n\t\t\t\n\t\t\tfunction getScale(x){\n\t\t\t\tif(x[0].patent_num<200){\n\t\t\t\t\treturn 'small-scale'\n\t\t\t\t}\n\t\t\t\telse if (x[0].patent_num<1000){\n\t\t\t\t\treturn 'middle-scale'\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn 'large-scale'\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfunction getText(x){\n\t\t\t\tif(x == 'a1'){\n\t\t\t\t\treturn indexInfo\n\t\t\t\t}\n\t\t\t\telse if(x=='a2'){\n\t\t\t\t\treturn getScale(nodeData)\n\t\t\t\t}\n\t\t\t\telse if(x=='a3'){\n\t\t\t\t\treturn nodeData[0].patent_num\n\t\t\t\t}\n\t\t\t\telse if(x == 'a4'){\n\t\t\t\t\treturn getSecondary(story1,'name')\n\t\t\t\t}\n\t\t\t\telse if(x == 'a5'){\n\t\t\t\t\treturn getSecondary(story1,'max')\n\t\t\t\t}\n\t\t\t\telse if(x == 'a6'){\n\t\t\t\t\treturn getSecondary(story1,'count')\n\t\t\t\t}\n\t\t\t\telse if(x == 'a7'){\n\t\t\t\t\treturn getLeaf(story1,'count')\n\t\t\t\t}\n\t\t\t\telse if(x == 'a8'){\n\t\t\t\t\treturn getLeaf(story1,'name')\n\t\t\t\t}\n\t\t\t\telse if(x == 'a9'){\n\t\t\t\t\treturn getLeaf(story1,'max')\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn x\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfunction getColor(x){\n\t\t\t\tif (x=='a1'||x=='a2'||x=='a3'||x=='a4'||x=='a5'||x=='a6'\n\t\t\t\t||x=='a7'||x=='a8'||x=='a9'){\n\t\t\t\t\treturn storyColor\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn '#000000'\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfunction getSecondary(x,flag){\n\t\t\t\tlet sol;\n\t\t\t\tlet max = 0;\n\t\t\t\tlet count = 0;\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(judgeSecondary(x[i]) && x[i].patent_num>max ){\n\t\t\t\t\t\tmax = x[i].patent_num;\n\t\t\t\t\t\tsol = x[i].name\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(judgeSecondary(x[i])){\n\t\t\t\t\t\tcount++\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(flag == 'name'){\n\t\t\t\t\treturn sol\n\t\t\t\t}\n\t\t\t\telse if (flag == 'max'){\n\t\t\t\t\treturn max\n\t\t\t\t}\n\t\t\t\telse if (flag == 'count'){\n\t\t\t\t\treturn count\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar judgeSecondary=(x)=>{\n\t\t\t\tlet nameL = ['OLED','QLED','应刷显示','TFT-LCD','MiniLED','MicroLED']\n\t\t\t\tfunction inNameL(x){\n\t\t\t\t\tfor(let i = 0;i<nameL.length;i++){\n\t\t\t\t\t\tif (nameL[i] == x){\n\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet judgeList = [];\n\t\t\t\tlet traverse =(node)=>{\n\t\t\t\t\tjudgeList.push(node);\n\t\t\t\t\tif (node.children){\n\t\t\t\t\t\tfor(let i = 0;i<node.children.length;i++){\n\t\t\t\t\t\t\ttraverse(node.children[i])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttraverse(this.$store.state.flare)\n\t\t\t\t\n\t\t\t\tfor(let i = 0;i<judgeList.length;i++){\n\t\t\t\t\tif (x.name == judgeList[i].name && inNameL(judgeList[i].name)){\n\t\t\t\t\t\t\n\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfunction getLeaf(x,flag){\n\t\t\t\tlet sol;\n\t\t\t\tlet max = 0;\n\t\t\t\tlet count = 0;\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(!x[i].children && x[i].patent_num>max){\n\t\t\t\t\t\tmax = x[i].patent_num;\n\t\t\t\t\t\tsol = x[i].name\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(!x[i].children){\n\t\t\t\t\t\tcount++\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(flag == 'name'){\n\t\t\t\t\treturn sol\n\t\t\t\t}\n\t\t\t\telse if (flag == 'max'){\n\t\t\t\t\treturn max\n\t\t\t\t}\n\t\t\t\telse if (flag == 'count'){\n\t\t\t\t\treturn count\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tif(arguments.length<9){\n\t\t\t\tfontsize = 14;\n\t\t\t}\n\t\t\tif(arguments.length<10){\n\t\t\t\tfontfamily = 'simsun, arial'\n\t\t\t}\n\t\t\tlet a3Name = getSecondary(nodeData,'name')\n\t\t\tlet positionStart = [{x:0,y:0}];\n\t\t\tlet startX = 0,startY = 0;\n\t\t\t\n\t\t\tfor(let i = 1;i<list.length;i++){\n\t\t\t\n\t\t\t\tif(list[i-1] == 'a1'){\n\t\t\t\t\tif(startX +getText('a1').length * fontsize + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+indexInfo.length * fontsize  \n\t\t\t\t\t\t//////console.log(startX)\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(list[i-1] == 'a2'){\n\t\t\t\t\tif(startX +getText('a2').length * fontsize/2 + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+getScale(nodeData).length* fontsize/2  \n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(list[i-1] == 'a3'){\n\t\t\t\t\t\n\t\t\t\t\tif(startX +getText('a3').toString().length * fontsize/2 + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+nodeData[0].patent_num.toString().length* fontsize/2  \n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(list[i-1] == 'a4'){\n\t\t\t\t\t//////console.log(judgeSecondary(story1[3]))\n\t\t\t\t\tif(startX +getText('a4').toString().length * fontsize + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\t\n\t\t\t\t\t\tstartX += 15+getSecondary(nodeData,'name').toString().length * fontsize\n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(list[i-1] == 'a5'){\n\t\t\t\t\tif(startX +getText('a5').toString().length * fontsize/2 + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+getSecondary(nodeData,'max').toString().length * fontsize/2\n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(list[i-1] == 'a6'){\n\t\t\t\t\tif(startX +getText('a6').toString().length * fontsize/2 + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+getSecondary(nodeData,'count').toString().length * fontsize/2\n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(list[i-1] == 'a7'){\n\t\t\t\t\tif(startX +getText('a7').toString().length * fontsize/2 + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+getLeaf(nodeData,'count').toString().length * fontsize/2\n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(list[i-1] == 'a8'){\n\t\t\t\t\tif(startX +getText('a8').toString().length * fontsize + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+getLeaf(nodeData,'name').toString().length * fontsize\n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\telse if(list[i-1] == 'a9'){\n\t\t\t\t\tif(startX +getText('a9').toString().length * fontsize/2 + list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=    15+getLeaf(nodeData,'max').toString().length * fontsize/2\n\t\t\t\t\t\t\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif(startX +list[i-1].length * fontsize/2+ list[i].length/2 * fontsize <width){\n\t\t\t\t\t\tstartX +=   list[i-1].length>12? fontsize+list[i-1].length * fontsize  /2 + 3:fontsize/2+list[i-1].length * fontsize  /2 + 7\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tstartX = 0;\n\t\t\t\t\t\tstartY += fontsize + 5;\n\t\t\t\t\t\tpositionStart.push({x:startX,y:startY})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"class\",'storyText')\n\t\t\t.attr('dx',(d,i)=>positionStart[i].x +posX)\n\t\t\t.attr('dy',(d,i)=>positionStart[i].y + posY)\n\t\t\t.style('font-size',fontsize)\n\t\t\n\t\t\t.style('fill',d=>getColor(d))\n\t\t\t.style(\"font-weight\",'bold')\n\t\t\t.text(d=>getText(d))\n\t\t\t\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.transition()\n\t\t\t.attr('dx',(d,i)=>positionStart[i].x +posX)\n\t\t\t.attr('dy',(d,i)=>positionStart[i].y + posY)\n\t\t\t.style('font-size',fontsize)\n\t\t\t.style(\"font-family\",fontfamily)\n\t\t\t.style('fill',d=>getColor(d))\n\t\t\t.text(d=>getText(d))\n\t\t\t\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.exit()\n\t\t\t.remove()\n\t\t\t\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.filter(d=>d =='a3'||d=='a1'||d=='a2')\n\t\t\t.on(\"mouseover\",()=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t\tthis.splited? hoverTip('半导体显示',nodeData2,nodeData):hoverTip('半导体显示',this.B_nodes3,nodeData)})\n\t\t\t.on(\"mouseout\",()=>{\n\t\t\t\t/*\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\tobj:'tips(text)',\n\t\t\t\t\tname:getText('a1')+':overall',\n\t\t\t\t\tvalue:getText('a3'),\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[getText('a1')]:[],\n            province:this.treeTypeFlag == 'province'?[getText('a1')]:[],\n            attribute:'overall'\n          }\n\t\t\t\t})*/\n\t\t\t\t//this.shot('app2')\n\t\t\t\tthis.B_TipRemove()})\n\t\t\t\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.filter((d)=> d == 'a4'|| d== 'a5')\n\t\t\t.on(\"mouseover\",()=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t\tsecondary(this.B_nodes3,this.splited,index,nodeData2,ref)})\n\t\t\t.on(\"mouseout\",()=>{\n\t\t\t\tsvgB.selectAll(\"path\")\n\t\t\t\t.style(\"stroke\",'black')\n\t\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t\t.style(\"stroke-width\",1);\n\t\t\t\t/*\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\tobj:'tips(text)',\n\t\t\t\t\tname:getText('a1') + ':main',\n\t\t\t\t\tvalue:getText('a5'),\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n          data:{\n            industry:getText('a4'),\n            company:this.treeTypeFlag == 'company'?[getText('a1')]:[],\n            province:this.treeTypeFlag == 'province'?[getText('a1')]:[],\n            attribute:'patent_num'\n          }\n\t\t\t\t})*/\n\t\t\t\t//this.shot('app2')\n\t\t\t\tthis.B_TipRemove()\n\t\t\t})\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.filter(d=>d =='a6')\n\t\t\t.on(\"mouseover\",()=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t\ta6All('create','secondary',this.B_nodes3,ref,this.splited,nodeData2,index)})\n\t\t\t.on(\"mouseout\",()=>{\n\t\t\t\t//this.shot('app2')\n\t\t\t\t/*\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\tobj:'tips(text)',\n\t\t\t\t\tname:getText('a1') + ':secondary',\n\t\t\t\t\tvalue:getText('a6'),\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[getText('a1')]:[],\n            province:this.treeTypeFlag == 'province'?[getText('a1')]:[],\n            attribute:'overall'\n          }\n\t\t\t\t})\n\t\t\t\t*/\n\t\t\t\ta6All('remove','secondary')})\n\t\t\t\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.filter(d=>d =='a7')\n\t\t\t.on(\"mouseover\",()=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t\ta6All('create','leaf',this.B_nodes3,ref,this.splited,nodeData2,index)}\n\t\t\t\t)\n\t\t\t.on(\"mouseout\",()=>{\n\t\t\t\t//this.shot('app2')\n\t\t\t\t/*\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\tobj:'tips(text)',\n\t\t\t\t\tname:getText('a1') + ':leaf',\n\t\t\t\t\tvalue:getText(\"a7\"),\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[getText('a1')]:[],\n            province:this.treeTypeFlag == 'province'?[getText('a1')]:[],\n            attribute:'overall'\n          }\n\t\t\t\t})\n\t\t\t\t*/\n\t\t\ta6All('remove','leaf',this.B_nodes3,ref,this.splited,nodeData2,index)})\n\t\t\t\n\t\t\tcontainer.selectAll(\".storyText\")\n\t\t\t.data(list)\n\t\t\t.filter(d=>d =='a8' || d == 'a9')\n\t\t\t.on('mouseover',()=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t\ta8('create',this.B_nodes3,this.splited,nodeData2,index)})\n\t\t\t.on('mouseout',()=>{\n\t\t\t\t/*\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\tobj:'tips(text)',\n\t\t\t\t\tname:getText('a1') + ':largest leaf',\n\t\t\t\t\tvalue:getText('a8') + ':' + getText('a9'),\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n          data:{\n            industry:getText('a8'),\n            company:this.treeTypeFlag == 'company'?[getText('a1')]:[],\n            province:this.treeTypeFlag == 'province'?[getText('a1')]:[],\n            attribute:'patent_num'\n          }\n\t\t\t\t})\n\t\t\t\t*/\n\t\t\ta8('remove')})\n\t\t\t\n\t\t},\n\t\tB_report(){\n\t\t\tfunction B_createTip2(dataset,i){\n\t\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t\t}\n\t\t\t\tlet XY = mouseXY(event);\n\t\t\t\t\n\t\t\t\td3.select(\"#svgB\").append(\"rect\")\n\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t.attr(\"class\",\"tips2\")\n\t\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t\t.style(\"width\",150)\n\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\n\t\t\t\td3.select(\"#svgB\").append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips2\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text(dataset[0].children[i].name)\n\t\t\t\t\n\t\t\t\td3.select(\"#svgB\").append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips2\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:' + dataset[0].children[i].patent_num)\n\t\t\t}\n\t\t\tfunction B_TipRemove2(){\n\t\t\t\td3.select(\"#svgB\").selectAll(\".tips2\").remove()\n\t\t\t}\n\t\t\tlet widthB = this.widthB\n\t\t\tfunction renderPie(a,b,dx,dy,group,name,title){\n\t\t\t\tif(a+b != 0){\n\t\t\t\t\tlet fill = [\"#5975ff\",\"#4cde71\"]\n\t\t\t\t\tlet data = [\n\t\t\t\t\t\t{startAngle:0,endAngle:a/(a+b) * 2 * Math.PI},\n\t\t\t\t\t\t{startAngle:a/(a+b)*2*Math.PI,endAngle:2 * Math.PI}\n\t\t\t\t\t];\n\t\t\t\t\t\n\t\t\t\t\tlet arc = d3.svg.arc().outerRadius(widthB/15)\n\t\t\t\t\t.innerRadius(widthB/18)\n\t\t\t\t\t\n\t\t\t\t\tgroup.selectAll(\".\"+name)\n\t\t\t\t\t.data(data)\n\t\t\t\t\t.enter()\n\t\t\t\t\t.append(\"path\")\n\t\t\t\t\t.attr(\"transform\",\"translate(\"+[dx,dy]+\")\")\n\t\t\t\t\t.attr(\"class\",name)\n\t\t\t\t\t.classed(\"tips\",true)\n\t\t\t\t\t.attr(\"fill\",(d,i)=>fill[i])\n\t\t\t\t\t.transition().duration(1000)\n\t\t\t\t\t.attrTween(\"d\",function(d){\n\t\t\t\t\t\tvar start = {startAngle : 0 , endAngle : 0};\n\t\t\t\t\t\tvar interpolate = d3.interpolate(start,d);\n\t\t\t\t\t\treturn function(t){return arc(interpolate(t));};\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tgroup.append(\"g\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"transform\",\"translate(\"+[dx,dy]+\")\")\n\t\t\t\t\t.selectAll(\".\"+name)\n\t\t\t\t\t.data(data)\n\t\t\t\t\t.enter()\n\t\t\t\t\t.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",(d,i)=>i==0? 13:-13)\n\t\t\t\t\t.attr(\"transform\", function(d) { return \"translate(\" + arc.centroid(d) + \")\"; })\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"16px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"text-anchor\",\"middle\")\n\t\t\t\t\t.style(\"fill\",\"white\")\n\t\t\t\t\t.transition().delay(1000)\n\t\t\t\t\t.text(function(d,i) { if(d.endAngle - d.startAngle != 0){\n\t\t\t\t\t\treturn i == 0? a:b\n\t\t\t\t\t} });\n\t\t\t\t\t\n\t\t\t\t\tgroup.append(\"text\")\n\t\t\t\t\t.attr(\"dx\",dx )\n\t\t\t\t\t.attr(\"dy\",dy + widthB/12 + 20)\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"text-anchor\",\"middle\")\n\t\t\t\t\t.style(\"fill\",\"white\")\n\t\t\t\t\t.text(title)\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\tlet backWidth = this.widthB*3/4,backHeight = this.heightB*3/4 + 100;\n\t\t\tlet report = d3.select(\"#svgB\").select(\"#report\")\n\t\t\treport.append(\"rect\")\n\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"x\",30)\n\t\t\t.attr(\"y\",30)\n\t\t\t.style(\"height\",backHeight)\n\t\t\t.style(\"width\",backWidth)\n\t\t\t.attr(\"rx\",20)\n\t\t\t//.on(\"click\",reportNext);\n\t\t\tlet report_stack = report.append(\"g\").attr(\"transform\",\"translate(\"+[50,80]+\")\");\n\t\t\tlet report_title = report.append(\"g\").attr(\"transform\",\"translate(\"+[30+this.widthB*3/8,60]+\")\")\n\t\t\tlet report_pie = report.append(\"g\");\n\t\t\tlet pie_lgd = report.append(\"g\");\n\t\t\tlet stack_scale = d3.scale.linear().domain([0,Math.max(this.B_nodes1[0].patent_num,this.B_nodes2[0].patent_num)]).range([0,this.widthB/2])\n\t\t\tlet color_scale = d3.scale.category20c()\n\t\t\tlet stack_data1 = [],stack_data2 = [];\n\t\t\tthis.B_nodes1[0].children.forEach(function(d,i){\n\t\t\t\tif(i == 0){\n\t\t\t\t\tstack_data1.push({x0:0,x1:d.patent_num})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tstack_data1.push({x0:stack_data1[i-1].x0+stack_data1[i-1].x1,x1:d.patent_num})\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.B_nodes2[0].children.forEach(function(d,i){\n\t\t\t\tif(i == 0){\n\t\t\t\t\tstack_data2.push({x0:0,x1:d.patent_num})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tstack_data2.push({x0:stack_data2[i-1].x0+stack_data2[i-1].x1,x1:d.patent_num})\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\treport_title.append(\"text\")\n\t\t\t.attr(\"id\",\"reportTitle\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"20px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"text-anchor\",\"middle\")\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.text(this.rootName + \"产业对比分析\")\n\t\t\t\n\t\t\treport_stack.append(\"text\")\n\t\t\t.attr(\"id\",\"stackName1\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"dx\",20)\n\t\t\t.attr(\"dy\",30)\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.text(this.treeData[0]);\n\t\t\treport_stack.append(\"text\")\n\t\t\t.attr(\"id\",\"stackName2\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"dx\",20)\n\t\t\t.attr(\"dy\",80)\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.text(this.treeData[1])\n\t\t\t\n\t\t\treport_stack.append(\"text\")\n\t\t\t.attr(\"id\",\"stackTag1\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"dx\",()=>stack_scale(this.B_nodes1[0].patent_num) + 25)\n\t\t\t.attr(\"dy\",55)\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.transition().delay(1500)\n\t\t\t.text(this.B_nodes1[0].patent_num);\n\t\t\t\n\t\t\treport_stack.append(\"text\")\n\t\t\t.attr(\"id\",\"stackTag2\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"dx\",()=>stack_scale(this.B_nodes2[0].patent_num) + 25)\n\t\t\t.attr(\"dy\",105)\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.transition().delay(1500)\n\t\t\t.text(this.B_nodes2[0].patent_num);\n\t\t\t\n\t\t\tlet B_nodes1 = this.B_nodes1;\n\t\t\t\n\t\t\treport_stack.selectAll(\".rect1\")\n\t\t\t.data(stack_data1)\n\t\t\t.enter()\n\t\t\t.append(\"rect\")\n\t\t\t.attr(\"class\",\"rect1 tips\")\n\t\t\t.attr(\"x\",x=>stack_scale(x.x0)+20)\n\t\t\t.attr(\"y\",40)\n\t\t\t.attr(\"width\",0)\n\t\t\t.attr(\"height\",20)\n\t\t\t.style(\"fill\",(d,i)=>color_scale(this.B_nodes1[0].children[i].name))\n\t\t\t.on(\"mouseover\",function(d,i){\n\t\t\t\td3.select(this)\n\t\t\t\t.style(\"stroke\",\"white\")\n\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\tB_createTip2(B_nodes1,i)\n\t\t\t})\n\t\t\t.on(\"mousemove\",(d,i)=>{\n\t\t\t\tB_TipRemove2();\n\t\t\t\tB_createTip2(this.B_nodes1,i)\n\t\t\t})\n\t\t\t.on(\"mouseout\",function(){\n\t\t\t\td3.select(this)\n\t\t\t\t.style(\"stroke-width\",0)\n\t\t\t\tB_TipRemove2();\n\t\t\t})\n\t\t\t.transition().duration(500).delay((d,i)=>500*i)\n\t\t\t.attr(\"width\",x=>stack_scale(x.x1));\n\t\t\t\n\t\t\tlet B_nodes2 = this.B_nodes2\n\t\t\t\n\t\t\treport_stack.selectAll(\".rect2\")\n\t\t\t.data(stack_data2)\n\t\t\t.enter()\n\t\t\t.append(\"rect\")\n\t\t\t.attr(\"class\",\"rect2 tips\")\n\t\t\t.attr(\"x\",x=>stack_scale(x.x0)+20)\n\t\t\t.attr(\"y\",90)\n\t\t\t.attr(\"width\",0)\n\t\t\t.attr(\"height\",20)\n\t\t\t.style(\"fill\",(d,i)=>color_scale(this.B_nodes2[0].children[i].name))\n\t\t\t.on(\"mouseover\",function(d,i){\n\t\t\t\td3.select(this)\n\t\t\t\t.style(\"stroke\",\"white\")\n\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\tB_createTip2(B_nodes2,i)\n\t\t\t})\n\t\t\t.on(\"mousemove\",function(d,i){\n\t\t\t\tB_TipRemove2();\n\t\t\t\tB_createTip2(B_nodes2,i)\n\t\t\t})\n\t\t\t.on(\"mouseout\",function(){\n\t\t\t\td3.select(this)\n\t\t\t\t.style(\"stroke-width\",0)\n\t\t\t\tB_TipRemove2();\n\t\t\t})\n\t\t\t.transition().duration(500).delay((d,i)=>500*i)\n\t\t\t.attr(\"width\",x=>stack_scale(x.x1));\n\t\t\t\n\t\t\t//总体优势产业饼图\n\t\t\tlet a1 = 0,b1 = 0,a2 = 0,b2 = 0,a3= 0 ,b3 = 0,a4 = 0,a5= 0,b4 = 0,b5 = 0,a6=0,b6=0;\n\t\t\tB_nodes1.forEach((d)=>{\n\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,B_nodes1)>this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\t\ta1 ++\n\t\t\t\t}\n\t\t\t\telse if( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,B_nodes1)<this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\t\tb1 ++\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tB_nodes1.forEach((d)=>{\n\t\t\t\tif(d.children){\n\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,B_nodes1)>this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\t\t\ta2 ++\n\t\t\t\t\t}\n\t\t\t\t\telse if( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,B_nodes1)<this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\t\t\tb2 ++\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tB_nodes1.forEach((d)=>{\n\t\t\t\tif(!d.children){\n\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,B_nodes1)>this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\t\t\ta3 ++\n\t\t\t\t\t}\n\t\t\t\t\telse if( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,B_nodes1)<this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\t\t\tb3 ++\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\trenderPie(a1,b1,130,280,report_pie,\"pie1\",\"总体优势产业数\")\n\t\t\trenderPie(a2,b2,backWidth/2 +30,280,report_pie,\"pie2\",\"非叶优势产业数\")\n\t\t\trenderPie(a3,b3,backWidth - 70,280,report_pie,\"pie3\",\"叶优势产业数\")\n\t\t\t\n\t\t\tB_nodes1.forEach((d)=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1 ){\n\t\t\t\t\t\t\t\t\t\t\ta6 ++\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t})\n\t\t\tthis.B_nodes2.forEach((d)=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) == -1 && this.D2.indexOf(d.name) != -1 ){\n\t\t\t\t\t\t\t\t\t\t\tb6 ++\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t\tB_nodes1.forEach((d)=>{\n\t\t\t\tif(d.children){\n\t\t\t\t\tif(  this.D2.indexOf(d.name) == -1 ){\n\t\t\t\t\t\t\t\t\t\t\ta4 ++\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tthis.B_nodes2.forEach((d)=>{\n\t\t\t\tif(d.children){\n\t\t\t\t\tif( this.D1.indexOf(d.name) == -1){\n\t\t\t\t\t\t\t\t\t\t\tb4 ++\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\tB_nodes1.forEach((d)=>{\n\t\t\t\tif(!d.children){\n\t\t\t\t\tif(   this.D2.indexOf(d.name) == -1 ){\n\t\t\t\t\t\t\t\t\t\t\ta5 ++\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\tthis.B_nodes2.forEach((d)=>{\n\t\t\t\tif(!d.children){\n\t\t\t\t\tif( this.D1.indexOf(d.name) == -1  ){\n\t\t\t\t\t\t\t\t\t\t\tb5 ++\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t})\n\t\t\trenderPie(a6,b6,130,450,report_pie,\"pie4\",'总体特有产业数')\n\t\t\t\n\t\t\trenderPie(a4,b4,backWidth/2+30,450,report_pie,\"pie5\",'非叶特有产业数')\n\t\t\trenderPie(a5,b5,backWidth - 70,450,report_pie,\"pie6\",\"叶特有产业数\");\n\t\t\t\n\t\t\tpie_lgd.append(\"rect\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"height\",15)\n\t\t\t.attr(\"width\",15)\n\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t.attr(\"rx\",3)\n\t\t\t.attr(\"x\",backWidth/2 + 30 -160)\n\t\t\t.attr(\"y\",450 +this.widthB/12 +50)\n\t\t\t\n\t\t\tpie_lgd.append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",backWidth/2 + 30 - 140)\n\t\t\t.attr(\"dy\",450+this.widthB/12 + 65)\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.text(this.treeData[0])\n\t\t\t\n\t\t\tpie_lgd.append(\"rect\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"height\",15)\n\t\t\t.attr(\"width\",15)\n\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t.attr(\"rx\",3)\n\t\t\t.attr(\"x\",backWidth/2 + 30 -160)\n\t\t\t.attr(\"y\",450 +this.widthB/12 +75)\n\t\t\t\n\t\t\tpie_lgd.append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",backWidth/2 + 30 - 140)\n\t\t\t.attr(\"dy\",450+this.widthB/12 + 90)\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.text(this.treeData[1])\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t},\n\t\tB_TipRemove(){\n\t\t\td3.select(\"#svgB\").selectAll(\".tips\").remove()\n\t\t},\n\t\tB_createTip(d,index,data,pos){\n\t\t\tthis.reportFlag=false\n\t\t\tlet XY;\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tif(arguments.length<4){\n\t\t\t\tXY = mouseXY(event);\n\t\t\t}\n\t\t\telse if (arguments.length == 4){\n\t\t\t\tXY = pos;\n\t\t\t}\n\t\t\tlet svgB = d3.select(\"#svgB\")\n\t\t\tlet tempWidth = d.name.length>8? d.name.length *15 +10 :120\n\t\t\t\t\n\t\t\t\n\t\t\t\tif(XY.x>0 && XY.x < this.widthB - tempWidth){\n\t\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\t\n\t\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t\t.text(d.name)\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t\t.text('专利数:'+this.B_getPat(d.name,index,data))\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"x\", XY.x-10 -tempWidth)\n\t\t\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\t\n\t\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",XY.x-tempWidth)\n\t\t\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t\t.text(d.name)\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",XY.x-tempWidth)\n\t\t\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t\t.text('专利数:'+this.B_getPat(d.name,index,data))\n\t\t\t\t}\n\t\t},\n\t\tB_createTipBar(d,data1,data2){\n\t\t\t\n\t\t\tthis.reportFlag=false\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tlet XY = mouseXY(event);\n\t\t\tlet tempWidth = Math.max(d.name.length,this.treeData[0].length,this.treeData[1].length)>8?\n\t\t\t\tMath.max(d.name.length,this.treeData[0].length,this.treeData[1].length) *15 +10 :120\n\t\t\t\t\n\t\t\tlet scale = d3.scale.linear().domain([0,Math.max(this.B_getPat(d.name,0,data1),this.B_getPat(d.name,0,data2))])\n\t\t\t.range([20,(Math.max(d.name.length,this.treeData[0].length,this.treeData[1].length)>8?\n\t\t\tMath.max(d.name.length,this.treeData[0].length,this.treeData[1].length) *15 -40 :40)\n\t\t\t]);\n\t\t\tlet svgB = d3.select(\"#svgB\")\n\t\t\tif(XY.x>0&&XY.x<this.widthB-tempWidth &&XY.y>0&&XY.y<this.widthB-130){\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.style(\"height\",160)\n\t\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(d.name)\n\t\t\t\t.text('company ***')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[0]);\n\t\t\t\t.text('company X')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y+35)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data1))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",XY.x+20)\n\t\t\t\t.attr(\"y\",XY.y+42)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data1)));\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y+75)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[1]);\n\t\t\t\t.text('company Y')\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y+95)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data2))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",XY.x+20)\n\t\t\t\t.attr(\"y\",XY.y+102)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data2)))\n\t\t\t\t\n\t\t\t}\n\t\t\telse if(XY.x>this.widthB-tempWidth && XY.y>0 && XY.y<this.heightB-130){\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.style(\"height\",160)\n\t\t\t\t.attr(\"x\", this.widthB - tempWidth)\n\t\t\t\t.attr(\"y\",XY.y+10)\n\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y+35)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text(d.name)\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB - tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y+55)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[0] );\n\t\t\t\t.text('company X')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y+75)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data1))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",this.widthB - tempWidth+10)\n\t\t\t\t.attr(\"y\",XY.y+82)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data1)));\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB - tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y+115)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[1]);\n\t\t\t\t.text('company Y')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y+135)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data2))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"y\",XY.y+142)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data2)))\n\t\t\t}\n\t\t\t\n\t\t\telse if(XY.x>0 &&XY.x<this.widthB-tempWidth&&XY.y>this.widthB-130){\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.style(\"height\",160)\n\t\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t\t.attr(\"y\",XY.y-130)\n\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-105)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text(d.name)\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-85)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[0]);\n\t\t\t\t.text('company X')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-65)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data1))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",XY.x+20)\n\t\t\t\t.attr(\"y\",XY.y-58)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data1)));\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-25)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[1]);\n\t\t\t\t.text('company Y')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data2))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",XY.x+20)\n\t\t\t\t.attr(\"y\",XY.y+2)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data2)))\n\t\t\t}\n\t\t\telse if(XY.x>this.widthB-tempWidth && XY.y>this.heightB-130){\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.style(\"height\",160)\n\t\t\t\t.attr(\"x\", this.widthB - tempWidth)\n\t\t\t\t.attr(\"y\",XY.y-170)\n\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB - tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y-145)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text(d.name)\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB - tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y-125)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[0]);\n\t\t\t\t.text('company X')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y-105)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data1))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"y\",XY.y-98)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data1)));\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y-65)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t//.text(this.treeData[1]);\n\t\t\t\t.text('company Y')\n\t\t\t\t\n\t\t\t\tsvgB.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"dy\",XY.y-45)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text('专利数:'+this.B_getPat(d.name,0,data2))\n\t\t\t\t\n\t\t\t\tsvgB.append(\"rect\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\",this.widthB- tempWidth+10)\n\t\t\t\t.attr(\"y\",XY.y-38)\n\t\t\t\t.attr(\"width\",0)\n\t\t\t\t.attr(\"height\",14)\n\t\t\t\t.attr(\"rx\",5)\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"width\",scale(this.B_getPat(d.name,0,data2)))\n\t\t\t\t\n\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\n\t\t},\n\t\tdataToFlare(x){\n\t\t\tvar data8 = [];\n\t\t\t\tvar data81 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name8){\n\t\t\t\t\t\tdata8.push({name:x[i].name8,parent:x[i].name7})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data8.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata81.push(data8[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data8[i].name!=data8[i-1].name){\n\t\t\t\t\t\tdata81.push(data8[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data81.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data81[i].name == x[j].name8){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata81[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar data7 = [];\n\t\t\t\tvar data71 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name7){\n\t\t\t\t\t\tdata7.push({name:x[i].name7,parent:x[i].name6})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tfor(let i = 0;i<data7.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata71.push(data7[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data7[i].name!=data7[i-1].name){\n\t\t\t\t\t\tdata71.push(data7[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data71.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data71[i].name == x[j].name7){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata71[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//6\n\t\t\t\tvar data6 = [];\n\t\t\t\tvar data61 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name6){\n\t\t\t\t\t\tdata6.push({name:x[i].name6,parent:x[i].name5})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data6.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata61.push(data6[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data6[i].name!=data6[i-1].name){\n\t\t\t\t\t\tdata61.push(data6[i])\n\t\t\t\t\t}\t\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data61.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data61[i].name == x[j].name6){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata61[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//5\n\t\t\t\tvar data5 = [];\n\t\t\t\tvar data51 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name5){\n\t\t\t\t\t\tdata5.push({name:x[i].name5,parent:x[i].name4})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data5.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata51.push(data5[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data5[i].name!=data5[i-1].name){\n\t\t\t\t\t\tdata51.push(data5[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data51.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data51[i].name == x[j].name5){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata51[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//4\n\t\t\t\tvar data4 = [];\n\t\t\t\tvar data41 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name4){\n\t\t\t\t\t\tdata4.push({name:x[i].name4,parent:x[i].name3})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data4.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata41.push(data4[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data4[i].name!=data4[i-1].name){\n\t\t\t\t\t\tdata41.push(data4[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data41.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data41[i].name == x[j].name4){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata41[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//3\n\t\t\t\tvar data3 = [];\n\t\t\t\tvar data31 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name3){\n\t\t\t\t\t\tdata3.push({name:x[i].name3,parent:x[i].name2})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data3.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata31.push(data3[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data3[i].name!=data3[i-1].name){\n\t\t\t\t\t\tdata31.push(data3[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data31.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data31[i].name == x[j].name3){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata31[i].patent_num = a\n\t\t\t\t}\n\t\t\t\t//2\n\t\t\t\tvar data2 = [];\n\t\t\t\tvar data21 = [];\n\t\t\t\tfor(let i = 0;i<x.length;i++){\n\t\t\t\t\tif(x[i].name2){\n\t\t\t\t\t\tdata2.push({name:x[i].name2,parent:x[i].name1})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i<data2.length;i++){\n\t\t\t\t\tif(i==0){\n\t\t\t\t\t\tdata21.push(data2[i])\n\t\t\t\t\t}\n\t\t\t\t\telse if(data2[i].name!=data2[i-1].name){\n\t\t\t\t\t\tdata21.push(data2[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor(let i = 0;i < data21.length;i++){\n\t\t\t\t\tlet a = 0;\n\t\t\t\t\tfor(let j = 0;j<x.length;j++){\n\t\t\t\t\t\tif(data21[i].name == x[j].name2){\n\t\t\t\t\t\t\ta += parseInt(x[j].patent_num)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdata21[i].patent_num = a\n\t\t\t\t}\n\t\t\n\t\t\t\tvar d1=[],\n\t\t\t\td2=[],\n\t\t\t\td3=[],\n\t\t\t\td4=[],\n\t\t\t\td5=[],\n\t\t\t\td6=[],\n\t\t\t\td7=[];\n\t\t\t\t//7\n\t\t\t\tfor(let i = 0;i<data71.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data81.length;j++){\n\t\t\t\t\t\tif(data71[i].name == data81[j].parent){\n\t\t\t\t\t\t\tchildren.push(data81[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\td7.push({name:data71[i].name,children:children,patent_num:data71[i].patent_num})\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{d7.push({name:data71[i].name,patent_num:data71[i].patent_num})}\n\t\t\t\t}\n\t\t\t\t//6\n\t\t\t\tfor(let i = 0;i<data61.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<d7.length;j++){\n\t\t\t\t\t\tif(data61[i].name == data71[j].parent){\n\t\t\t\t\t\t\tchildren.push(d7[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td6.push({name:data61[i].name,children:children,patent_num:data61[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d6.push({name:data61[i].name,patent_num:data61[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//5\n\t\t\t\tfor(let i = 0;i<data51.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data61.length;j++){\n\t\t\t\t\t\tif(data51[i].name == data61[j].parent){\n\t\t\t\t\t\t\tchildren.push(d6[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td5.push({name:data51[i].name,children:children,patent_num:data51[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d5.push({name:data51[i].name,patent_num:data51[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//4\n\t\t\t\tfor(let i = 0;i<data41.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data51.length;j++){\n\t\t\t\t\t\tif(data41[i].name == data51[j].parent){\n\t\t\t\t\t\t\tchildren.push(d5[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td4.push({name:data41[i].name,children:children,patent_num:data41[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d4.push({name:data41[i].name,patent_num:data41[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//3\n\t\t\t\tfor(let i = 0;i<data31.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data41.length;j++){\n\t\t\t\t\t\tif(data31[i].name == data41[j].parent){\n\t\t\t\t\t\t\tchildren.push(d4[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td3.push({name:data31[i].name,children:children,patent_num:data31[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d3.push({name:data31[i].name,patent_num:data31[i].patent_num})}\n\t\t\t\t\t}\n\t\t\t\t//2\n\t\t\t\tfor(let i = 0;i<data21.length;i++){\n\t\t\t\t\tlet children = [];\n\t\t\t\t\tfor(let j = 0;j<data31.length;j++){\n\t\t\t\t\t\tif(data21[i].name == data31[j].parent){\n\t\t\t\t\t\t\tchildren.push(d3[j])\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(children.length>0){\n\t\t\t\t\t\td2.push({name:data21[i].name,children:children,patent_num:data21[i].patent_num})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{d2.push({name:data21[i].name,patent_num:data21[i].patent_num})}\n\t\t\t\t\t}\n\t\t\n\t\t\t\tlet t_sum = 0;\n\t\t\t\tfor(let i = 0;i<d2.length;i++){\n\t\t\t\t\tt_sum += d2[i].patent_num\n\t\t\t\t}\n\t\t\t\td1={name:\"半导体显示\",children:d2,patent_num:t_sum};\n\t\t\t\t\n\t\t\t\t\treturn d1;\n\t\t},\n\t\tcreateNewTree(){\n\t\t\t//////console.log(this.treeDataLength);\n\t\t\t////////console.log(this.flare0)\n\t\t\tif(this.treeData.length == 0){\n\t\t\t\tthis.$store.commit(\"objBclear\")\n\t\t\t\t// 这里！！\n\t\t\t}\n\t\t\telse if(this.treeData.length == 1){\n\t\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\t\t\n\t\t\t\tlet B_links1 = B_tree1.links(this.B_nodes1);\n\t\t\n\t\t\t\t\n\t\t\t\tlet B_diagonal1 = d3.svg.diagonal()\n\t\t\t\t.projection(function(d){\n\t\t\t\t\treturn [d.y +10 , d.x ];\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links1)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"links1\")\n\t\t\t\t.style(\"fill\",\"none\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links1)\n\t\t\t\t.attr(\"d\",function(d){return B_diagonal1(d);})\n\t\t\t\t.style(\"stroke-width\",0)\n\t\t\t\t.transition()\n\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links1)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes1)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\",\"circles1\")\n\t\t\t\t.append(\"title\")\n\t\t\t\t.text(d=>d.name)\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes1)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\t.style(\"fill\",\"white\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.attr(\"r\",0)\n\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t\t\t.data(this.B_nodes1)\n\t\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes1)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes1)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(this.B_nodes1)\n\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\t\tname:this.treeData[0] + ':'+d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\t\tdesc: 'hover:' + this.treeData[0] + 'in' + d.name,\n\t\t\t\t\t\t\t// desc:'the patent number of ' + this.treeData[0] + ' in ' +d.name + ' is ' + d.patent_num,\n\t\t\t\t\t\t\tdata:{\n\t\t\t\t\t\t\tindustry:d.name,\n\t\t\t\t\t\t\tcompany:this.treeTypeFlag == 'company'?[this.treeData[0]]:[],\n\t\t\t\t\t\t\tprovince:this.treeTypeFlag == 'province'?[this.treeData[0]]:[],\n\t\t\t\t\t\t\tattribute:'patent_num'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"r\",4);\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes1)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t}\n\t\t\telse if(this.treeData.length == 2){\n\t\t\t\t\n\t\t\t\tlet B_tree = d3.layout.tree()\n\t\t\t\t.size([(this.heightB *4/5),(this.widthB*4/5 )]);\n\t\t\t\n\t\t\t\tlet B_links3 = B_tree.links(this.B_nodes3);\n\t\t\t\t\n\t\t\t\tlet B_diagonal1 = d3.svg.diagonal()\n\t\t\t\t.projection(function(d){\n\t\t\t\t\treturn [d.y +10 , d.x ];\n\t\t\t\t});\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"links1\")\n\t\t\t\t.style(\"fill\",\"none\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"d\",function(d){return B_diagonal1(d);})\n\t\t\t\t.style(\"stroke-width\",1)\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\",\"circles1\")\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.on(\"click\",d=>{\n\t\t\t\t\tthis.roam(d.name,d.depth)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes3)\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes3)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t// \tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\t// let v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n\t\t\t\t\t\t\tdata:{\n                industry:d.name,\n                company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n                province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n                attribute:'comparison'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.style(\"fill\",\"white\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.attr(\"r\",0)\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"r\",4)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1){\n\t\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) == -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\",d=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t\t\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\tlet v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\tvalue:v1 + ' vs ' + v2,\n\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n            data:{\n              industry:d.name,\n              company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n              province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n              attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t////////console.log('!!!!!',this.B_nodes3)\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tsplit(){\n\t\t\t////////console.log(this.B_nodes31,this.B_nodes32)\n\t\t\t\t\n\t\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\t\t\n\t\t\t\tlet B_links3 = B_tree1.links(this.B_nodes31);\n\t\t\t\tB_links3 = B_links3.filter(d=>{\n\t\t\t\t\t\tif(this.D1.indexOf(d.target.name) != -1){\n\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tlet B_links32 = B_tree1.links(this.B_nodes32);\n\t\t\t\tB_links32 = B_links32.filter(d=>{\n\t\t\t\t\t\tif(this.D2.indexOf(d.target.name) != -1){\n\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tlet B_diagonal1 = d3.svg.diagonal()\n\t\t\t\t.projection(function(d){\n\t\t\t\t\treturn [d.y +10 , d.x ];\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tlet B_diagonal2 = d3.svg.diagonal()\n\t\t\t\t.projection(function(d){\n\t\t\t\t\treturn [d.y  , d.x ];\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\",\"circles31\")\n\t\t\t\t.style(\"fill\",'white')\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.style(\"fill\",'white')\n\t\t\t\t.attr(\"r\",4)\n\t\t\t\t.on(\"click\",()=>{})\n\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes31)\n\t\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes31)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\t\tname:this.treeData[0]+':' +d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\t\tdesc: 'hover:' + this.treeData[0] + 'in' + d.name,\n\t\t\t\t\t\t\t// desc:'the patent number of ' + this.treeData[0] + ' in ' +d.name + ' is ' + d.patent_num,\n\t\t\t\t\t\t\tdata:{\n                  industry:d.name,\n                  company:this.treeTypeFlag == 'company'?[this.treeData[0]]:[],\n                  province:this.treeTypeFlag == 'province'?[this.treeData[0]]:[],\n                  attribute:'patent_num'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\t\n\t\t\t\t\n\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1){\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,this.B_nodes1)>this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"r\",6)\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif(this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\",d=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\t\tlet v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\n\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\tvalue:v1 + ' vs ' +v2 ,\n\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n            data:{\n              industry:d.name,\n              company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n              province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n              attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(d.name!=\"半导体显示\"&& d.children && (this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1)  ){\n\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",d=>{\n\t\t\t\t\t\t\tthis.roam(d.name,d.depth);\n\t\t\t\t});\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(!d.parent && d.name!=\"半导体显示\"){\n\t\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",()=>{\n\t\t\t\t\t// 这里！\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'objBDepth',\n\t\t\t\t\t\t\tflag:0,\n\t\t\t\t\t\t\tdepth:0,\n\t\t\t\t\t\t\trootName:'半导体显示'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.roam(\"半导体显示\",0);\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"links1\")\n\t\t\t\t.style(\"fill\",\"none\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.style(\"stroke-width\",0.5)\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"d\",function(d){return B_diagonal1(d);});\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\",\"circles32\")\n\t\t\t\t.style(\"fill\",'white')\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.append(\"title\")\n\t\t\t\t.text(d=>d.name);\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.style(\"fill\",'white')\n\t\t\t\t.attr(\"r\",4)\n\t\t\t\t.attr(\"cx\",this.widthB/2 )\n\t\t\t\t.attr(\"cy\",this.heightB/2 )\n\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes32)\n\t\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes32)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\t\tname: this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\t// desc:'the patent number of ' + this.treeData[1] + ' in ' +d.name + ' is ' + d.patent_num,\n\t\t\t\t\t\t\tdesc: 'hover:' + this.treeData[1] + 'in' + d.name,\n\t\t\t\t\t\t\tdata:{\n                  industry:d.name,\n                  company:this.treeTypeFlag == 'company'?[this.treeData[1]]:[],\n                  province:this.treeTypeFlag == 'province'?[this.treeData[1]]:[],\n                  attribute:'patent_num'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t\n\t\t\t\t.attr(\"cx\",d=>d.y )\n\t\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.D2.indexOf(d.name) != -1 && this.D1.indexOf(d.name) == -1){\n\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y )\n\t\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,this.B_nodes2)>this.B_getPat(d.name,0,this.B_nodes1)){\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"r\",6)\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif(this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\",d=>{\n\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\t\tlet v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\tvalue: v1+ ' vs ' +v2 ,\n\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n            data:{\n                industry:d.name,\n                company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n                province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n                attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(d.name!=\"半导体显示\"&& d.children && (this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1)  ){\n\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",d=>{\n\t\t\t\t\t\t\tthis.roam(d.name,d.depth);\n\t\t\t\t});\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(!d.parent && d.name!=\"半导体显示\"){\n\t\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",()=>{\n\t\t\t\t\t// zheli !!!\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'objBDepth',\n\t\t\t\t\t\t\tflag:0,\n\t\t\t\t\t\t\tdepth:0,\n\t\t\t\t\t\t\trootName:'半导体显示'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.roam(\"半导体显示\",0);\n\t\t\t\t})\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\")\n\t\t\t\t.data(B_links32)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"links2\")\n\t\t\t\t.style(\"fill\",\"none\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\")\n\t\t\t\t.data(B_links32)\n\t\t\t\t.style(\"stroke-width\",0)\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"d\",function(d){return B_diagonal2(d);})\n\t\t\t\t.style(\"stroke-width\",0.5)\n\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\")\n\t\t\t\t.data(B_links32)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\tthis.createDia();\n\t\t\t\t\n\t\t\t\tlet B_tag1 = d3.select(\"#gTag1\")\n\t\t\t\tlet B_tag2 = d3.select(\"#gTag2\")\n\t\t\t\t\n\t\t\t\tB_tag1.selectAll(\".text1\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"text\")\n\t\t\t\t.attr(\"class\",\"text1\")\n\t\t\t\t.attr(\"dx\",20)\n\t\t\t\t.attr(\"dy\",this.heightB/2)\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"10px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.style(\"fill\",\"black\")\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tB_tag1.selectAll(\".text1\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.B_nodes31.length<100&&!d.children&&this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1){\n\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"dx\",d=>d.y +20)\n\t\t\t\t.attr(\"dy\",d=>d.x +5)\n\t\t\t\t.text(d=>d.name);\n\t\t\t\t\n\t\t\t\tB_tag1.selectAll(\".text1\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\tB_tag2.selectAll(\".text2\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"text\")\n\t\t\t\t.attr(\"class\",\"text2\")\n\t\t\t\t.attr(\"dx\",20)\n\t\t\t\t.attr(\"dy\",this.heightB/2)\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"10px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.style(\"fill\",\"black\")\n\t\t\t\t.attr(\"text-anchor\",\"end\")\n\t\t\t\t\n\t\t\t\tB_tag2.selectAll(\".text2\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.B_nodes32.length<100&&!d.children&&this.D1.indexOf(d.name) == -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"dx\",d=>d.y -10)\n\t\t\t\t.attr(\"dy\",d=>d.x +5)\n\t\t\t\t.text(d=>d.name);\n\t\t\t\t\n\t\t\t\tB_tag2.selectAll(\".text2\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\t\n\t\t\t},\n\t\t\tB_getPat(name,index,data){\n\t\t\t\tfor(let i = 0;i<data.length;i++){\n\t\t\t\t\tif(name == data[i].name){\n\t\t\t\t\t\treturn data[i].patent_num;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcreateDia(){\n\t\t\t\td3.select(\"#svgB\").selectAll(\"linearGradient\").remove();\n\t\t\t\tlet diaData = [];\n\t\t\t\tlet diaTemp = [];\n\t\t\t\tfor(let i = 0;i<this.B_nodes31.length;i++){\n\t\t\t\t\tfor(let j = 0;j<this.B_nodes32.length;j++){\n\t\t\t\t\t\tif((!this.B_nodes31[i].children) && this.B_nodes31[i].name == this.B_nodes32[j].name){\n\t\t\t\t\t\t\tdiaData.push({a:this.B_nodes31[i],b:this.B_nodes32[j],pat_numA:this.B_getPat(this.B_nodes31[i].name,0,this.B_nodes1),pat_numB:this.B_getPat(this.B_nodes31[i].name,0,this.B_nodes2)});\n\t\t\t\t\t\t\tdiaTemp.push(this.B_nodes31[i].name)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\td3.select(\"#gDia\").selectAll(\".dia\")\n\t\t\t\t.data(diaData)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"line\")\n\t\t\t\t.attr(\"class\",\"dia\")\n\t\t\t\t.style(\"fill\",'none')\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.style(\"stroke-width\",3)\n\t\t\t\t.attr(\"x1\",this.widthB/2)\n\t\t\t\t.attr(\"y1\",this.heightB/2)\n\t\t\t\t.attr(\"x2\",this.widthB/2)\n\t\t\t\t.attr(\"y2\",this.heightB/2);\n\t\t\t\t\n\t\t\t\tdiaData.forEach(function(d,i){\n\t\t\t\t\tlet defs = d3.select(\"#svgB\").append(\"defs\");\n\t\t\t\t\tlet p =d.pat_numA/(d.pat_numA + d.pat_numB);\n\t\t\t\t\t\n\t\t\t\t\tlet linearGradients = defs.append(\"linearGradient\")\n\t\t\t\t\t\t\t\t\t\t\t.attr(\"id\",\"contrastColor\"+i)\n\t\t\t\t\t\t\t\t\t\t\t.attr(\"x1\",\"0%\")\n\t\t\t\t\t\t\t\t\t\t\t.attr(\"y1\",\"0%\")\n\t\t\t\t\t\t\t\t\t\t\t.attr(\"x2\",\"100%\")\n\t\t\t\t\t\t\t\t\t\t\t.attr(\"y2\",\"0%\");\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tlet stop1 = linearGradients.append(\"stop\")\n\t\t\t\t\t\t\t\t\t.attr(\"offset\",p)\n\t\t\t\t\t\t\t\t\t.style(\"stop-color\",\"#5975ff\");\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tlet stop2 = linearGradients.append(\"stop\")\n\t\t\t\t\t\t\t\t\t.attr(\"offset\",p)\n\t\t\t\t\t\t\t\t\t.style(\"stop-color\",\"#4cde71\");\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\td3.select(\"#gDia\").selectAll(\".dia\")\n\t\t\t\t.data(diaData)\n\t\t\t\t.transition()\n\t\t\t\t.style(\"stroke\",(d,i)=>{\n\t\t\t\t\treturn \"url(#contrastColor\" + i +\")\"\n\t\t\t\t})\n\t\t\t\t//.style(\"stroke\",\"url(#linearColor)\")\n\t\t\t\t.style(\"stroke-width\",3)\n\t\t\t\t.attr(\"x1\",d=>d.a.y + 14)\n\t\t\t\t.attr(\"y1\",d=>d.a.x)\n\t\t\t\t.attr(\"x2\",d=>d.b.y-4)\n\t\t\t\t.attr(\"y2\",d=>d.b.x +0.01);\n\t\t\t\t\n\t\t\t\td3.select(\"#gDia\").selectAll(\".dia\")\n\t\t\t\t.data(diaData)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t},\n\t\tmerge(){\n\t\t\td3.select(\"#gCircles2\").selectAll('circle').remove()\n\t\t\td3.select(\"#gLinks2\").selectAll(\"path\").remove()\n\t\t\td3.select(\"#gDia\").selectAll(\"line\").remove()\n\t\t\t\n\t\t\tlet tempDatat3 = [];\n\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\tif(this.treeTypeFlag =='company'){\n\t\t\t\t\tif(this.data_overall[i]['name'+(this.depth+1)] == this.rootName&&(this.data_overall[i].comp_name == this.treeData[0] || this.data_overall[i].comp_name == this.treeData[1])){\n\t\t\t\t\t\ttempDatat3.push(this.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (this.treeTypeFlag == 'province'){\n\t\t\t\t\tif(this.data_overall[i]['name'+(this.depth+1)] == this.rootName&&(this.data_overall[i].province.substring(0,2) == this.treeData[0].substring(0,2) || this.data_overall[i].province.substring(0,2) == this.treeData[1].substring(0,2))){\n\t\t\t\t\t\ttempDatat3.push(this.data_overall[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet a = this.dataToFlare(tempDatat3);\n\t\t\tfor(let i = 0;i<this.depth;i++){\n\t\t\t\t\ta = a.children[0];\n\t\t\t}\n\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\tlet b = B_tree1.nodes(a);\n\t\t\tfor(let i = 0;i<b.length;i++){\n\t\t\t\t\t\t\tb[i].x += this.heightB/6;\n\t\t\t\t\t\t\tb[i].y += this.widthB/20\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\n\t\t\tlet B_tree = d3.layout.tree()\n\t\t\t.size([(this.heightB *4/5),(this.widthB*4/5 )]);\n\t\t\tlet B_links3 = B_tree.links(b);\n\t\t\t\n\t\t\tlet B_diagonal1 = d3.svg.diagonal()\n\t\t\t.projection(function(d){\n\t\t\t\treturn [d.y +10 , d.x ];\n\t\t\t});\n\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t.data(B_links3)\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\",\"links1\")\n\t\t\t.attr(\"d\",[this.heightB/2])\n\t\t\t.style(\"fill\",\"none\")\n\t\t\t.style(\"stroke\",\"black\")\n\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t\n\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t.data(B_links3)\n\t\t\t.style(\"stroke\",\"black\")\n\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t.transition()\n\t\t\t.attr(\"d\",function(d){return B_diagonal1(d);})\n\t\t\t.style(\"stroke-width\",1)\n\t\t\t\n\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t.data(B_links3)\n\t\t\t.exit()\n\t\t\t.remove();\n\t\t\t\n\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t.data(b)\n\t\t\t.enter()\n\t\t\t.append(\"circle\")\n\t\t\t.attr(\"class\",\"circles1\")\n\t\t\t\n\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t.data(b)\n\t\t\t.on(\"click\",d=>{\n\t\t\t\tthis.roam(d.name,d.depth)\n\t\t\t})\n\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes3)\n\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t})\n\t\t\t})\n\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes3)\n\t\t\t})\n\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t// \tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\t// let v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n\t\t\t\t\t\tdata:{\n                industry:d.name,\n                company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n                province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n                attribute:'comparison'\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t})\n\t\t\t\n\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t.data(b)\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.style(\"stroke\",\"black\")\n\t\t\t.attr(\"r\",0)\n\t\t\t.transition()\n\t\t\t.attr(\"r\",4)\n\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\n\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t.data(b)\n\t\t\t.filter(d=>{\n\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1){\n\t\t\t\t\treturn d\n\t\t\t\t}\n\t\t\t})\n\t\t\t.transition()\n\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t.attr(\"r\",7)\n\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\n\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t.data(b)\n\t\t\t.filter(d=>{\n\t\t\t\tif( this.D1.indexOf(d.name) == -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\treturn d\n\t\t\t\t}\n\t\t\t})\n\t\t\t.transition()\n\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t.attr(\"r\",7)\n\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\n\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t.data(this.B_nodes3)\n\t\t\t.filter(d=>{\n\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\treturn d\n\t\t\t\t}\n\t\t\t})\n\t\t\t.on(\"mouseover\",d=>{\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(data=>data==d)\n\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\tthis.B_TipRemove()\n\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t})\n\t\t\t})\n\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\n\t\t\t\tthis.B_TipRemove();\n\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t})\n\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(data=>data==d)\n\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\tlet v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewB',\n\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\tvalue: v1 + ' vs ' + v2,\n\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t// \t+ v1 + ' and ' + v2 +' respectively',\n          data:{\n            industry:d.name,\n            company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n            province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n            attribute:'comparison'\n          }\n\t\t\t\t})\n\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t})\n\t\t\t\n\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t.data(b)\n\t\t\t.exit()\n\t\t\t.remove();\n\t\t\t\n\t\t\t\n\t\t},\n\t\tale(){\n\t\t\n\t\t\t\n\t\t\tthis.$store.commit('objBSplitFlag')\n\t\t\t\n\t\t},\n\t\troam(name,depth){\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.B_TipRemove();\n\t\t\t}, 1600);\n\t\t\t// 这里！！！\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'objBDepth',\n\t\t\t\tdepth:depth,\n\t\t\t\tflag:depth,\n\t\t\t\trootName:name\n\t\t\t\t\n\t\t\t})\n\t\t\t// let v1 = this.B_getPat(name,0,this.B_nodes1)\n\t\t\t// \t\tlet v2 = this.B_getPat(name,0,this.B_nodes2)\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'userClick',\n\t\t\t\tview:'viewB',\n\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\tobj:'zoom(tree nodes)',\n\t\t\t\tname:this.treeData[0] + ' vs '+ this.treeData[1],\n\t\t\t\tvalue:name,\n\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + name,\n\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + name + ' with patent num '\n\t\t\t\t// \t\t+ v1 + ' and ' + v2 +' respectively',\n\t\t\t\tvisualKeys:{},\n        data:{\n          industry:name,\n          company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n          province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n          attribute:'comparison'\n        }\n\t\t\t})\n\n\t\t\tthis.$store.commit('ClickRecordState')\n\t\t\n\t\t\tlet B_tree1 = d3.layout.tree()\n\t\t\t.size([(this.heightB *4/5),(this.widthB *4/5 )]);\n\t\t\t\n\t\t\n\t\t\tlet B_diagonal1 = d3.svg.diagonal()\n\t\t\t.projection(function(d){\n\t\t\t\treturn [d.y +10 , d.x ];\n\t\t\t});\n\t\t\t\n\t\t\t\n\t\t\n\t\t\tlet B_links3 = B_tree1.links(this.B_nodes3);\n\t\t\tif(!this.splited){\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"links1\");\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"none\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.style(\"stroke-opacity\",0.5)\n\t\t\t\t.attr(\"d\",function(d){return B_diagonal1(d);});\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\",\"circles1\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes3)\n\t\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes3)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t// \tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\t// let v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// \tdesc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n\t\t\t\t\t\t\tdata:{\n                  industry:d.name,\n                  company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n                  province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n                  attribute:'comparison'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.on(\"click\",()=>{})\n\t\t\t\t.style(\"fill\",'white')\n\t\t\t\t.attr(\"r\",4)\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif(d.name!=\"半导体显示\"&& d.children && (this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1)  ){\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",d=>{\n\t\t\t\t\t\t\tthis.roam(d.name,d.depth);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(!d.parent && d.name!=\"半导体显示\"){\n\t\t\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",()=>{\n\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\ttype:'objBDepth',\n\t\t\t\t\t\t\t\tflag:0,\n\t\t\t\t\t\t\t\tdepth:0,\n\t\t\t\t\t\t\t\trootName:'半导体显示'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tthis.roam(\"半导体显示\",0);\n\t\t\t\t})\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1){\n\t\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) == -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\",d=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\tlet v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\tvalue: v1+ ' vs ' + v2,\n\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n            data:{\n              industry:d.name,\n              company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n              province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n              attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes3)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\").remove();\n\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\").remove();\n\t\t\t\td3.select(\"#gDia\").selectAll(\"line\").remove();\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\n\t\t\t\tB_links3 = B_links3.filter(d=>{\n\t\t\t\t\tif(this.D1.indexOf(d.target.name) != -1){\n\t\t\t\t\treturn d\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tlet B_links32 = B_tree1.links(this.B_nodes32);\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tB_links32 = B_links32.filter(d=>{\n\t\t\t\t\t\tif(this.D2.indexOf(d.target.name) != -1){\n\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tlet B_diagonal2 = d3.svg.diagonal()\n\t\t\t\t.projection(function(d){\n\t\t\t\t\treturn [d.y  , d.x ];\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\",\"circles1\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t\n\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.style(\"fill\",\"white\")\n\t\t\t\t.attr(\"r\",4)\n\t\t\t\t.on(\"click\",()=>{})\n\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes31)\n\t\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes31)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\t\tname:this.treeData[0] + ':' +d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\tdesc: 'hover:' + this.treeData[0] + 'in' + d.name,\n\t\t\t\t\t\t\t// desc:'the patent number of ' + this.treeData[0] + ' in ' +d.name + ' is ' + d.patent_num,\n\t\t\t\t\t\t\tdata:{\n                  industry:d.name,\n                  company:this.treeTypeFlag == 'company'?[this.treeData[0]]:[],\n                  province:this.treeTypeFlag == 'province'?[this.treeData[0]]:[],\n                  attribute:'patent_num'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(d.name!=\"半导体显示\"&& d.children && (this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1)  ){\n\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",d=>{\n\t\t\t\t\t\t\tthis.roam(d.name,d.depth);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(!d.parent && d.name!=\"半导体显示\"){\n\t\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",()=>{\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'objBDepth',\n\t\t\t\t\t\t\tflag:0,\n\t\t\t\t\t\t\tdepth:0,\n\t\t\t\t\t\t\trootName:'半导体显示'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.roam(\"半导体显示\",0);\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1){\n\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#5975ff\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y +10 )\n\t\t\t\t.attr(\"cy\",d=>d.x );\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,this.B_nodes1)>this.B_getPat(d.name,0,this.B_nodes2)){\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"r\",6)\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif(this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\",d=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\tlet v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\tvalue:v1 + ' vs ' + v2,\n\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n            data:{\n              industry:d.name,\n              company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n              province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n              attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles1\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.exit()\n\t\t\t\t.remove()\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"links1\")\n\t\t\t\t.style(\"fill\",\"none\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.style(\"stroke-width\",0.5)\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"d\",function(d){return B_diagonal1(d);});\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks1\").selectAll(\"path\")\n\t\t\t\t.data(B_links3)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"circle\")\n\t\t\t\t.attr(\"class\",\"circles2\")\n\t\t\t\t.attr(\"r\",4)\n\t\t\t\t.style(\"fill\",\"white\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.style(\"fill\",\"white\")\n\t\t\t\t.on(\"click\",()=>{})\n\t\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes32)\n\t\t\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\t\tthis.B_createTip(d,1,this.B_nodes32)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\t\tname: this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\t\tvalue:d.patent_num,\n\t\t\t\t\t\t\t// desc:'the patent number of ' + this.treeData[1] + ' in ' +d.name + ' is ' + d.patent_num,\n\t\t\t\t\t\t\tdesc: 'hover:' + this.treeData[1] + 'in' + d.name,\n\t\t\t\t\t\t\tdata:{\n                  industry:d.name,\n                  company:this.treeTypeFlag == 'company'?[this.treeData[1]]:[],\n                  province:this.treeTypeFlag == 'province'?[this.treeData[1]]:[],\n                  attribute:'patent_num'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.$store.commit('recordState')\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"r\",4)\n\t\t\t\t\n\t\t\t\t.attr(\"cx\",d=>d.y)\n\t\t\t\t.attr(\"cy\",d=>d.x);\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(d.name!=\"半导体显示\"&& d.children && (this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1)  ){\n\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",d=>{\n\t\t\t\t\t\t\tthis.roam(d.name,d.depth);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif(!d.parent && d.name!=\"半导体显示\"){\n\t\t\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"click\",()=>{\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype:'objBDepth',\n\t\t\t\t\t\t\tflag:0,\n\t\t\t\t\t\t\tdepth:0,\n\t\t\t\t\t\t\trootName:'半导体显示'\n\t\t\t\t\t\t})\n\t\t\t\t\t\tthis.roam(\"半导体显示\",0);\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.D2.indexOf(d.name) != -1 && this.D1.indexOf(d.name) == -1){\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.style(\"fill\",\"#4cde71\")\n\t\t\t\t.attr(\"r\",7)\n\t\t\t\t.attr(\"cx\",d=>d.y )\n\t\t\t\t.attr(\"cy\",d=>d.x )\n\t\t\t\t\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1 &&this.B_getPat(d.name,0,this.B_nodes2)>this.B_getPat(d.name,0,this.B_nodes1)){\n\t\t\t\t\t\t\t\t\treturn true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.attr(\"r\",6)\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\tif(this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.on(\"mouseover\",d=>{\n\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"red\");\n\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseover',\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\t\t\n\t\t\t\t\tthis.B_TipRemove();\n\t\t\t\t\tthis.B_createTipBar(d,this.B_nodes1,this.B_nodes2)\n\t\t\t\t})\n\t\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t\t.filter(data=>data==d)\n\t\t\t\t\t.style(\"stroke\",\"black\");\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.B_TipRemove()\n\t\t\t\t\t\t}, 1500);\n\t\t\t\t\tlet v1 = this.B_getPat(d.name,0,this.B_nodes1)\n\t\t\t\t\tlet v2 = this.B_getPat(d.name,0,this.B_nodes2)\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tobj:'tips(tree nodes)',\n\t\t\t\t\t\tname:this.treeData[0] + 'vs' + this.treeData[1] + ':' +d.name,\n\t\t\t\t\t\tvalue: v1+ ' vs ' +v2 ,\n\t\t\t\t\t\tdesc:'compare ' + this.treeData[0] + ' to ' + this.treeData[1] + ' in ' + d.name,\n\t\t\t\t\t\t// desc:'the comparison between ' + this.treeData[0] + ' and ' + this.treeData[1] + ' in ' + d.name + ' with patent num '\n\t\t\t\t\t\t// + v1 + ' and ' + v2 +' respectively',\n            data:{\n              industry:d.name,\n              company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n              province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n              attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t})\n\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.exit()\n\t\t\t\t.remove();\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\")\n\t\t\t\t.data(B_links32)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"path\")\n\t\t\t\t.attr(\"class\",\"links2\")\n\t\t\t\t.style(\"fill\",\"none\")\n\t\t\t\t.style(\"stroke\",\"black\")\n\t\t\t\t.style(\"stroke-width\",0.5)\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\")\n\t\t\t\t.data(B_links32)\n\t\t\t\t.attr(\"d\",function(d){return B_diagonal2(d);})\n\t\t\t\t\n\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\")\n\t\t\t\t.data(B_links32)\n\t\t\t\t.exit()\n\t\t\t\t.remove()\n\t\t\t\t\n\t\t\t\t//////console.log(this.D1,this.D2)\n\t\t\t\tthis.createDia()\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gTag1\").selectAll(\"text\")\n\t\t\t\t.remove();\n\t\t\t\t//////console.log(this.B_nodes31)\n\t\t\t\td3.select(\"#gTag1\").selectAll(\"text\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"text\")\n\t\t\t\t.attr(\"dx\",20)\n\t\t\t\t.attr(\"dy\",this.heightB/2)\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"10px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.style(\"fill\",\"black\")\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gTag1\").selectAll(\"text\")\n\t\t\t\t.data(this.B_nodes31)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.B_nodes31.length<100&&!d.children&&this.D1.indexOf(d.name) != -1 && this.D2.indexOf(d.name) == -1){\n\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"dx\",d=>d.y +20)\n\t\t\t\t.attr(\"dy\",d=>d.x +5)\n\t\t\t\t.text(d=>d.name);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\td3.select(\"#gTag2\").selectAll(\"text\")\n\n\t\t\t\t\n\t\t\t\t.remove();\n\t\t\t\td3.select(\"#gTag2\").selectAll(\"text\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.enter()\n\t\t\t\t.append(\"text\")\n\t\t\t\t.attr(\"dx\",20)\n\t\t\t\t.attr(\"dy\",this.heightB/2)\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"10px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.style(\"fill\",\"black\")\n\t\t\t\t.attr(\"text-anchor\",\"end\")\n\t\t\t\t\n\t\t\t\td3.select(\"#gTag2\").selectAll(\"text\")\n\t\t\t\t.data(this.B_nodes32)\n\t\t\t\t.filter(d=>{\n\t\t\t\t\t\t\t\tif( this.B_nodes32.length<100&&!d.children&&this.D1.indexOf(d.name) == -1 && this.D2.indexOf(d.name) != -1){\n\t\t\t\t\t\t\t\t\treturn d\n\t\t\t\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.transition()\n\t\t\t\t.attr(\"dx\",d=>d.y -10)\n\t\t\t\t.attr(\"dy\",d=>d.x +5)\n\t\t\t\t.text(d=>d.name);\n\t\t\t\t\n\t\t\t}\n\t\t}\n\t},\n\twatch:{\n\t\tsplited(val){\n\t\t\tif(this.treeData.length == 2){\n\t\t\t\tif(val){\n\t\t\t\t\tthis.split();\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userClick',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\tobj:'split(button)',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tname:this.treeData[0] + ' vs '+ this.treeData[1],\n\t\t\t\t\t\tvalue:'split:true',\n\t\t\t\t\t\tdesc:'split view of' + this.treeData[0] + ' and '+ this.treeData[1],\n\t\t\t\t\t\t// desc:'the split view of tree comparison between ' + this.treeData[0] + ' and '+ this.treeData[1],\n            data:{\n              industry:this.rootName,\n              company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n              province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n              attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('ClickRecordState')\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.merge();\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:'userClick',\n\t\t\t\t\t\tview:'viewB',\n\t\t\t\t\t\twidth:this.widthB,\n\t\t\t\t\t\theight:this.heightB,\n\t\t\t\t\t\tobj:'split(button)',\n\t\t\t\t\t\tname:this.treeData[0] + ' vs '+ this.treeData[1],\n\t\t\t\t\t\tvalue:'split:false',\n\t\t\t\t\t\tdesc:'merged view of' + this.treeData[0] + ' and '+ this.treeData[1],\n\t\t\t\t\t\t// desc:'the merged view of tree comparison between ' + this.treeData[0] + ' and '+ this.treeData[1],\n\t\t\t\t\t\tvisualKeys:{},\n\n            data:{\n              industry:this.rootName,\n              company:this.treeTypeFlag == 'company'?[this.treeData[0],this.treeData[1]]:[],\n              province:this.treeTypeFlag == 'province'?[this.treeData[0],this.treeData[1]]:[],\n              attribute:'comparison'\n            }\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('ClickRecordState')\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(val){\n\t\t\t\t\n\t\t\t\td3.select(\"#splitBtn\").select(\"rect\").transition().style(\"fill\",\"#1ee710\");\n\t\t\t\td3.select(\"#splitBtn\").select(\"circle\").transition().attr(\"cx\",70);\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#gTag1\").selectAll(\"text\").remove()\n\t\t\t\td3.select(\"#gTag2\").selectAll(\"text\").remove()\n\t\t\t\td3.select(\"#splitBtn\").select(\"rect\").transition().style(\"fill\",\"#939393\");\n\t\t\t\td3.select(\"#splitBtn\").select(\"circle\").transition().attr(\"cx\",45);\n\t\t\t}\n\t\t},\n\t\tshowBtn(val){\n\t\t\tif(val){\n\t\t\t\td3.select(\"#splitBtn\")\n\t\t\t\t.style(\"display\",'inline');\n\t\t\t\td3.select(\"#reportBtn\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#splitBtn\")\n\t\t\t\t.style(\"display\",'none');\n\t\t\t\td3.select(\"#reportBtn\")\n\t\t\t\t.style(\"display\",'none')\n\t\t\t}\n\t\t},\n\t\trootName(val){\n\t\t\td3.select(\"#Btitle\")\n\t\t\t.text(val + '产业树对比图')\n\t\t},\n\t\treportFlag(val){\n\t\t\tif(val){\n\t\t\t\tthis.B_report()\n\t\t\t\td3.select(\"#reportBtn\").select(\"rect\").transition().style(\"fill\",\"#1ee710\");\n\t\t\t\td3.select(\"#reportBtn\").select(\"circle\").transition().attr(\"cx\",70);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.B_TipRemove()\n\t\t\t\td3.select(\"#reportBtn\").select(\"rect\").transition().style(\"fill\",\"#939393\");\n\t\t\t\td3.select(\"#reportBtn\").select(\"circle\").transition().attr(\"cx\",45);\n\t\t\t}\n\t\t\t\n\t\t},\n\t\ttreeD(){\n\t\t\tif(this.splited){\n\t\t\t\tthis.$store.commit(\"objBSplitFlag\")\n\t\t\t}\n\t\t\tthis.createNewTree()\n\t\t\t\n\t\t\tif(this.treeData[0]){\n\t\t\t\td3.select(\"#Btitle\")\n\t\t\t\t.style(\"display\",'inline');\n\t\t\t\td3.select(\"#Bleft\")\n\t\t\t\t.text(this.treeData[0])\n\t\t\t\tif(this.treeData[1]){\n\t\t\t\t\td3.select(\"#Bright\")\n\t\t\t\t\t.text(this.treeData[1])\n\t\t\t\t\tthis.storyFlag = true;\n\t\t\t\t\t//this.appendStory(this.story_text,this.B_nodes1,'red',this.treeData[0],this.story.list,35,25,this.widthB - 110,14,'simsun',this.D1,1,this.B_nodes31)\n\t\t\t\t\t\n\t\t\t\t\td3.select\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\td3.select(\"#gCircles2\").selectAll(\"circle\").remove();\n\t\t\t\t\td3.select(\"#gLinks2\").selectAll(\"path\").remove();\n\t\t\t\t\td3.select(\"#gDia\").selectAll(\"line\").remove();\n\t\t\t\t\t//////console.log(this.B_nodes1)\n\t\t\t\t\td3.select(\"#Bright\")\n\t\t\t\t\t.text('');\n\t\t\t\t\tthis.createNewTree()\n\t\t\t\t\tthis.storyFlag = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#Bleft\")\n\t\t\t\t.text('');\n\t\t\t\td3.select(\"#Bright\")\n\t\t\t\t.text('');\n\t\t\t\td3.select(\"#Btitle\")\n\t\t\t\t.style(\"display\",'none');\n\t\t\t\tthis.storyFlag = false;\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tstoryFlag(val){\n\t\t\tif(val){\n\t\t\t\td3.select(\"#Bbtn\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t\tthis.storyIndex = 1\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#Bbtn\")\n\t\t\t\t.style(\"display\",'none')\n\t\t\t\td3.select(\"#svgB2\").selectAll(\".storyText\").remove()\n\t\t\t\tthis.storyIndex = 0\n\t\t\t}\n\t\t},\n\t\tstoryIndex(val){\n\t\t\tif(val == 1){\n\t\t\t\tthis.appendStory(this.story_text,this.B_nodes1,'red',this.treeData[0],this.story.list,35,25,this.widthB - 110,14,'simsun',this.D1,1,this.B_nodes31)\n\t\t\t}\n\t\t\telse if(val == 2){\n\t\t\t\tthis.appendStory(this.story_text,this.B_nodes2,'blue',this.treeData[1],this.story.list,35,25,this.widthB - 110,14,'simsun',this.D2,2,this.B_nodes32)\n\t\t\t}\n\t\t\telse if(val ==0){\n\t\t\t\td3.select(\"#svgB2\").selectAll(\".storyText\").remove()\n\t\t\t}\n\t\t}\n\t\t\n\t\t\n\t}\n}\n\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}