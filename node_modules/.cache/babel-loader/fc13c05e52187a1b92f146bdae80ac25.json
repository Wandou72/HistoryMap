{"ast":null,"code":"import * as d3 from \"d3\";\nimport axios from 'axios';\nexport default {\n  name: 'componentC',\n\n  data() {\n    return {\n      heightC: this.$store.state.height * 0.4,\n      widthC: this.$store.state.width * 0.3,\n      hovered: '',\n      nodesLength: 0\n    };\n  },\n\n  mounted() {\n    this.$store.commit({\n      type: 'appendBtn',\n      svgID: 'svgC',\n      btnID: 'Cbtn',\n      width: this.widthC,\n      text: 'switch'\n    });\n    d3.select(\"#svgC\").select(\"#Cbtn\").on(\"click\", () => {\n      if (this.matrixFlag == 'tree') {\n        this.$store.commit({\n          type: 'changeMatrixFlag',\n          flag: 'matrix'\n        });\n      } else {\n        this.$store.commit({\n          type: 'changeMatrixFlag',\n          flag: 'tree'\n        });\n      }\n    }).style(\"display\", 'none');\n    d3.select(\"#txt\").attr(\"dy\", 70).attr(\"dx\", this.widthC - 150).style(\"display\", 'none'); //console.log(this.$store.state.data_overall)\n\n    d3.select(\"#svgC\").attr(\"width\", this.widthC).attr(\"height\", this.heightC);\n    this.$store.commit({\n      type: 'appendTitle',\n      id: 'CTitle',\n      class: 'classC',\n      svg: 'svgC',\n      dx: '24px',\n      dy: '36px',\n      size: '20px'\n    });\n    d3.select(\"#CTitle\").style(\"display\", 'none');\n    axios.get('china.sea.json').then(res => {\n      this.$store.commit({\n        type: 'Cseajson',\n        seajson: res\n      });\n    }).then(() => {\n      this.createSea();\n    });\n    axios.get('china.geo.json').then(response => {\n      this.$store.commit({\n        type: 'Cgeojson',\n        geojson: response\n      });\n    }).then(() => {\n      this.createMap();\n    });\n    d3.select(\"#svgC\").append(\"g\").attr(\"id\", \"Csea\").style(\"display\", \"none\");\n    d3.select(\"#svgC\").append(\"g\").attr(\"id\", \"Cmap\").style(\"display\", \"none\");\n  },\n\n  computed: {\n    C_province() {\n      let a = [];\n      let C_temp = [];\n      let C_temp_sum = 0;\n\n      for (let i = 0; i < this.data_overall.length; i++) {\n        if (this.data_overall[i].name1 == this.selected || this.data_overall[i].name2 == this.selected || this.data_overall[i].name3 == this.selected || this.data_overall[i].name4 == this.selected || this.data_overall[i].name5 == this.selected || this.data_overall[i].name6 == this.selected || this.data_overall[i].name7 == this.selected || this.data_overall[i].name8 == this.selected) {\n          C_temp.push(this.data_overall[i]);\n        }\n      }\n\n      for (let i = 0; i < this.geojson.data.features.length; i++) {\n        a.push({\n          name: this.geojson.data.features[i].properties.name,\n          pat_num: 0,\n          pat_pro: 0\n        });\n      }\n\n      for (let i = 0; i < C_temp.length; i++) {\n        for (let j = 0; j < a.length; j++) {\n          if (C_temp[i].province.substring(0, 2) == a[j].name.substring(0, 2)) {\n            a[j].pat_num += parseInt(C_temp[i].patent_num);\n          }\n        }\n      }\n\n      for (let i = 0; i < a.length; i++) {\n        C_temp_sum += a[i].pat_num;\n      }\n\n      for (let i = 0; i < a.length; i++) {\n        a[i].pat_pro = a[i].pat_num / C_temp_sum;\n      }\n\n      return a;\n    },\n\n    matrixElement1() {\n      return this.matrixElement + '1';\n    },\n\n    matrixElement() {\n      return this.$store.state.matrixElement;\n    },\n\n    matrixFlag() {\n      return this.$store.state.matrixFlag;\n    },\n\n    treeD() {\n      return this.treeData + '1';\n    },\n\n    treeData() {\n      return this.$store.state.objB.treeData;\n    },\n\n    seajson() {\n      return this.$store.state.objC.seajson;\n    },\n\n    geojson() {\n      return this.$store.state.objC.geojson;\n    },\n\n    data_overall() {\n      return this.$store.state.data_overall;\n    },\n\n    leaf() {\n      return this.$store.state.leaf;\n    },\n\n    selected() {\n      return this.$store.state.selected;\n    },\n\n    colorScale() {\n      return d3.scale.linear().domain([0, 0.5]).range([\"#c8ccf9\", \"#00007f\"]);\n    }\n\n  },\n  methods: {\n    C_TipRemove() {\n      d3.select(\"#svgC\").selectAll(\".tips\").remove();\n    },\n\n    C_createTip(d) {\n      function mouseXY(e) {\n        e = e || window.event;\n        return {\n          \"x\": e.offsetX,\n          \"y\": e.offsetY\n        };\n      }\n\n      let XY = mouseXY(event);\n      let svgC = d3.select(\"#svgC\");\n      svgC.append(\"rect\").attr(\"id\", \"tipBack\").attr(\"class\", \"tips\").attr(\"x\", XY.x + 10).attr(\"y\", XY.y - 30).style(\"width\", d.properties.name.length > 8 ? d.properties.name.length * 15 + 10 : 140).attr(\"rx\", 20);\n      svgC.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x + 20).attr(\"dy\", XY.y - 5).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"white\").text(this.transform(d.properties.name));\n      svgC.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x + 20).attr(\"dy\", XY.y + 15).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"white\").text(() => {\n        for (let i = 0; i < this.C_province.length; i++) {\n          if (d.properties.name == this.C_province[i].name) {\n            return '专利份额:' + this.C_province[i].pat_pro.toFixed(4);\n          }\n        }\n      });\n    },\n\n    transform(name) {\n      for (let i = 0; i < this.$store.state.province.length; i++) {\n        if (this.$store.state.province[i].substring(0, 2) == name.substring(0, 2)) {\n          return this.$store.state.province[i];\n        }\n      }\n    },\n\n    createSea() {\n      var C_projection = d3.geo.mercator().center([113, 29]) //地图中心位置,107是经度，31是纬度\n      .scale(350 / 1900 * this.$store.state.width) //设置缩放量\n      .translate([this.widthC / 2, this.heightC * 3 / 5]); // 设置平移量\n\n      var C_path = d3.geo.path().projection(C_projection);\n      d3.select(\"#Csea\").selectAll(\"path\").data(this.seajson.data.features) // 绑定数据\n      .enter().append(\"path\").attr(\"class\", \"path2\").style(\"fill\", \"white\").style(\"stroke\", \"black\").style(\"stroke-width\", 1).attr(\"d\", C_path);\n    },\n\n    getPatPro(d) {\n      for (let i = 0; i < this.C_province.length; i++) {\n        if (d.properties.name == this.C_province[i].name) {\n          return this.C_province[i].pat_pro;\n        }\n      }\n    },\n\n    createMap() {\n      var C_projection = d3.geo.mercator().center([113, 29]) //地图中心位置,107是经度，31是纬度\n      .scale(350 / 1900 * this.$store.state.width) //设置缩放量\n      .translate([this.widthC / 2, this.heightC * 3 / 5]); // 设置平移量\n\n      var C_path = d3.geo.path().projection(C_projection);\n      let svgC = d3.select(\"#svgC\");\n      let defs = d3.select(\"#svgC\").append(\"defs\");\n      let linearGradient2 = defs.append(\"linearGradient\").attr(\"id\", \"linearColor4\").attr(\"x1\", \"0%\").attr(\"y1\", \"100%\").attr(\"x2\", \"0%\").attr(\"y2\", \"0%\");\n      linearGradient2.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"#ffffff\");\n      linearGradient2.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", \"#00007f\");\n      let lgd = svgC.append(\"g\").attr(\"id\", \"Clgd\").style(\"display\", \"none\").attr(\"transform\", 'translate(' + [0, 20] + ')');\n      lgd.append(\"rect\").attr(\"class\", \"lgdC\").attr(\"x\", this.widthC * 9 / 10 + 3).attr(\"y\", this.heightC / 5).attr(\"rx\", 6).attr(\"width\", 12).attr(\"height\", this.heightC * 3 / 5).style(\"fill\", \"url(#\" + linearGradient2.attr(\"id\") + \")\");\n      lgd.append(\"text\").attr(\"class\", \"lgdC\").attr(\"font-family\", \"sans-serif\").style(\"font-size\", 15).style(\"font-weight\", \"bold\").attr(\"text-anchor\", \"middle\").attr(\"dx\", this.widthC * 9 / 10 + 10).attr(\"dy\", this.heightC / 5 - 5).text(0.5);\n      lgd.append(\"text\").attr(\"class\", \"lgdC\").attr(\"font-family\", \"sans-serif\").style(\"font-size\", 15).style(\"font-weight\", \"bold\").attr(\"text-anchor\", \"middle\").attr(\"dx\", this.widthC * 9 / 10 + 10).attr(\"dy\", this.heightC / 5 * 4 + 15).text(0);\n      d3.select(\"#Cmap\").selectAll(\"path\").data(this.geojson.data.features) // 绑定数据\n      .enter().append(\"path\").attr(\"class\", \"path1\").style(\"fill\", \"white\").style(\"stroke\", \"black\").style(\"stroke-width\", 0.2).attr(\"d\", C_path).on(\"mouseover\", d => {\n        this.hovered = d.properties.name;\n        this.C_TipRemove();\n        this.C_createTip(d);\n        this.$store.commit({\n          type: 'userMouseover'\n        });\n      }).on(\"mousemove\", d => {\n        this.C_TipRemove();\n        this.C_createTip(d);\n      }).on(\"mouseout\", d => {\n        this.hovered = '';\n        let pro = this.getPatPro(d);\n        setTimeout(() => {\n          this.C_TipRemove();\n        }, 1300);\n        this.$store.commit({\n          type: 'userMouseout',\n          view: 'viewC',\n          obj: 'tips(province)',\n          width: this.widthC,\n          height: this.heightC,\n          name: this.transform(d.properties.name) + ':' + this.selected,\n          value: pro,\n          desc: 'the proportion of ' + this.transform(d.properties.name) + ' in ' + this.selected + ' is ' + pro.toFixed(3),\n          data: {\n            industry: this.selected,\n            company: [],\n            province: [this.transform(d.properties.name)],\n            attribute: 'proportion'\n          }\n        });\n      }).on(\"click\", d => {\n        let pro = this.getPatPro(d);\n        this.$store.commit({\n          type: \"elementClear\",\n          flag: 'province'\n        });\n        this.$store.commit({\n          type: 'userClick',\n          view: 'viewC',\n          width: this.widthC,\n          height: this.heightC,\n          obj: 'select province',\n          name: this.transform(d.properties.name) + ':' + this.selected,\n          value: pro,\n          desc: 'the proportion of ' + this.transform(d.properties.name) + ' in ' + this.selected + ' is ' + pro.toFixed(3),\n          visualKeys: {},\n          data: {\n            industry: this.selected,\n            company: [],\n            province: [this.transform(d.properties.name)],\n            attribute: 'proportion'\n          }\n        });\n\n        if (this.matrixFlag == 'tree') {\n          this.$store.commit({\n            type: \"updateTreeData\",\n            //treeTypeFlag :'province',\n            name: this.transform(d.properties.name)\n          });\n        } else {\n          this.$store.commit({\n            type: 'changeMatrixElement',\n            element: this.transform(d.properties.name)\n          });\n        }\n      });\n    },\n\n    C_update() {\n      //console.log(this.C_province)\n      d3.select(\"#Cmap\").selectAll(\".path1\").data(this.geojson.data.features).style(\"stroke-width\", 0.2).transition().style(\"stroke-width\", 0.2).style(\"fill\", d => {\n        for (let i = 0; i < this.C_province.length; i++) {\n          if (d.properties.name == this.C_province[i].name) {\n            return this.C_province[i].pat_pro == 0 ? \"white\" : this.colorScale(this.C_province[i].pat_pro);\n          }\n        }\n      });\n    },\n\n    inData(d, dataset) {\n      let a = this.transform(d.properties.name);\n\n      if (dataset.indexOf(a) != -1) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n  },\n  watch: {\n    selected(val) {\n      d3.select(\"#Cmap\").style(\"display\", 'inline');\n      d3.select(\"#Csea\").style(\"display\", 'inline');\n      d3.select(\"#Clgd\").style(\"display\", 'inline');\n      d3.select(\"#CTitle\").style(\"display\", 'inline').text(val + '产业地区分布图');\n      d3.select(\"#Cbtn\").style(\"display\", 'inline');\n      d3.select(\"#svgC\").select(\"#txt\").style(\"display\", 'inline');\n      this.C_update();\n    },\n\n    treeD() {\n      d3.select(\"#svgC\").selectAll(\".path1\").filter(d => this.inData(d, this.treeData)).style(\"fill\", \"#06ddf4\");\n      d3.select(\"#svgC\").selectAll(\".path1\").filter(d => !this.inData(d, this.treeData)).style(\"fill\", d => {\n        for (let i = 0; i < this.C_province.length; i++) {\n          if (d.properties.name == this.C_province[i].name) {\n            return this.C_province[i].pat_pro == 0 ? \"white\" : this.colorScale(this.C_province[i].pat_pro);\n          }\n        }\n      });\n    },\n\n    hovered(val) {\n      d3.select(\"#Cmap\").selectAll(\".path1\").data(this.geojson.data.features).filter(d => val == d.properties.name || this.inData(d, this.treeData)).style(\"fill\", '#06ddf4');\n      d3.select(\"#Cmap\").selectAll(\".path1\").data(this.geojson.data.features).filter(d => val != d.properties.name && !this.inData(d, this.treeData)).style(\"fill\", d => {\n        for (let i = 0; i < this.C_province.length; i++) {\n          if (d.properties.name == this.C_province[i].name) {\n            return this.C_province[i].pat_pro == 0 ? \"white\" : this.colorScale(this.C_province[i].pat_pro);\n          }\n        }\n      });\n    },\n\n    matrixElement1() {\n      d3.select(\"#svgC\").selectAll(\".path1\").filter(d => this.inData(d, this.matrixElement)).style(\"stroke\", \"red\").style(\"stroke-width\", 1);\n      d3.select(\"#svgC\").selectAll(\".path1\").filter(d => !this.inData(d, this.matrixElement)).style(\"stroke\", \"black\").style(\"stroke-width\", 0.2);\n    }\n\n  }\n};","map":{"version":3,"sources":["C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentC.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\t\n    <svg id = \"svgC\" >\n\t\t<text id = 'txt'>Select Mode:{{matrixFlag}}</text>\n\t\t<rect\n\tx = 0\n\t:y = 'heightC - 50'\n\theight = 50\n\twidth = 60\n\tfill = 'orange'>\n\t</rect>\n\t<text\n\tdx = 30\n\t:dy = 'heightC - 17'\n\ttext-anchor = 'middle'\n\tfill = 'white'\n\tfont-size = 25\n\tfont-weight = 'bold'\n\t>D\n\t</text>\n\t</svg>\n\n</template>\n\n<script>\nimport * as d3 from \"d3\"\n\nimport axios from 'axios'\n\nexport default {\n\tname: 'componentC',\n\tdata(){\n\t\treturn {\n\t\t\theightC:this.$store.state.height * 0.4,\n\t\t\twidthC:this.$store.state.width * 0.3,\n\t\t\thovered:'',\n\t\t\tnodesLength:0,\n\t\t\t\n\t\t}\n\t},\n\tmounted(){\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendBtn',\n\t\t\tsvgID:'svgC',\n\t\t\tbtnID:'Cbtn',\n\t\t\twidth:this.widthC,\n\t\t\ttext:'switch'\n\t\t})\n\t\t\n\t\td3.select(\"#svgC\").select(\"#Cbtn\")\n\t\t.on(\"click\",()=>{\n\t\t\tif(this.matrixFlag=='tree'){\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeMatrixFlag',\n\t\t\t\t\tflag:'matrix'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'changeMatrixFlag',\n\t\t\t\t\tflag:'tree'\n\t\t\t\t})\n\t\t\t\t\n\t\t\t}\n\t\t})\n\t\t.style(\"display\",'none')\n\t\t\n\t\td3.select(\"#txt\").attr(\"dy\",70).attr(\"dx\",this.widthC-150).style(\"display\",'none')\n\t\t//console.log(this.$store.state.data_overall)\n\t\td3.select(\"#svgC\")\n\t\t.attr(\"width\",this.widthC)\n\t\t.attr(\"height\",this.heightC);\n\t\t\n\t\t\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendTitle',\n\t\t\tid:'CTitle',\n\t\t\tclass:'classC',\n\t\t\tsvg:'svgC',\n\t\t\tdx:'24px',\n\t\t\tdy:'36px',\n\t\t\tsize:'20px'\n\t\t\t\n\t\t})\n\t\t\n\t\td3.select(\"#CTitle\").style(\"display\",'none')\n\t\t\n\t\t\n\t\taxios.get('china.sea.json')\n\t\t.then(res=>{\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'Cseajson',\n\t\t\t\tseajson:res\n\t\t\t})\n\t\t})\n\t\t.then(()=>{\n\t\t\tthis.createSea()\n\t\t})\n\t\t\n\t\taxios.get('china.geo.json')\n\t\t.then(response=>{\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'Cgeojson',\n\t\t\t\tgeojson:response\n\t\t\t})\n\t\t})\n\t\t.then(()=>{\n\t\t\tthis.createMap();\n\t\t})\n\t\t\n\t\td3.select(\"#svgC\").append(\"g\").attr(\"id\",\"Csea\")\n\t\t.style(\"display\",\"none\")\n\t\t\n\t\td3.select(\"#svgC\").append(\"g\").attr(\"id\",\"Cmap\")\n\t\t.style(\"display\",\"none\")\n\t},\n\tcomputed:{\n\t\tC_province(){\n\t\t\tlet a = [];\n\t\t\tlet C_temp = [];\n\t\t\tlet C_temp_sum = 0;\n\t\t\tfor(let i = 0;i<this.data_overall.length;i++){\n\t\t\t\tif(this.data_overall[i].name1 == this.selected || this.data_overall[i].name2 == this.selected||this.data_overall[i].name3 == this.selected||this.data_overall[i].name4 == this.selected\n\t\t\t\t||this.data_overall[i].name5 == this.selected||this.data_overall[i].name6 == this.selected||this.data_overall[i].name7 == this.selected||this.data_overall[i].name8 == this.selected){\n\t\t\t\t\tC_temp.push(this.data_overall[i])\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor(let i = 0;i<this.geojson.data.features.length;i++){\n\t\t\t\ta.push({name:this.geojson.data.features[i].properties.name,pat_num:0,pat_pro:0})\n\t\t\t}\n\t\t\t\n\t\t\tfor(let i = 0;i<C_temp.length;i++){\n\t\t\t\tfor(let j = 0;j<a.length;j++){\n\t\t\t\t\tif(C_temp[i].province.substring(0,2) == a[j].name.substring(0,2)){\n\t\t\t\t\t\ta[j].pat_num += parseInt(C_temp[i].patent_num)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tfor(let i = 0;i<a.length;i++){\n\t\t\t\tC_temp_sum += a[i].pat_num\n\t\t\t}\n\t\t\t\n\t\t\tfor(let i = 0;i<a.length;i++){\n\t\t\t\ta[i].pat_pro = a[i].pat_num / C_temp_sum\n\t\t\t}\n\t\t\t\n\t\t\treturn a\n\t\t\t\n\t\t\t\n\t\t},\n\t\tmatrixElement1(){\n\t\t\treturn this.matrixElement+'1'\n\t\t},\n\t\tmatrixElement(){\n\t\t\treturn this.$store.state.matrixElement\n\t\t},\n\t\tmatrixFlag(){\n\t\t\treturn this.$store.state.matrixFlag\n\t\t},\n\t\ttreeD(){\n\t\t\treturn this.treeData +'1'\n\t\t},\n\t\ttreeData(){\n\t\t\t\treturn this.$store.state.objB.treeData\n\t\t},\n\t\tseajson(){\n\t\t\treturn this.$store.state.objC.seajson\n\t\t},\n\t\tgeojson(){\n\t\t\treturn this.$store.state.objC.geojson\n\t\t\t\n\t\t},\n\t\tdata_overall(){\n\t\t\treturn this.$store.state.data_overall\n\t\t},\n\t\tleaf(){\n\t\t\treturn this.$store.state.leaf\n\t\t},\n\t\tselected(){\n\t\t\treturn this.$store.state.selected\n\t\t},\n\t\tcolorScale(){\n\t\t\treturn d3.scale.linear().domain([0,0.5]).range([\"#c8ccf9\",\"#00007f\"])\n\t\t}\n\t},\n\tmethods:{\n\t\t\n\t\tC_TipRemove(){\n\t\t\td3.select(\"#svgC\").selectAll(\".tips\").remove()\n\t\t},\n\t\tC_createTip(d){\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tlet XY = mouseXY(event);\n\t\t\tlet svgC = d3.select(\"#svgC\");\n\t\t\t\n\t\t\tsvgC.append(\"rect\")\n\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t.style(\"width\",d.properties.name.length>8? d.properties.name.length *15 +10 :140)\n\t\t\t.attr(\"rx\",20);\n\t\t\t\n\t\t\tsvgC.append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.text(this.transform(d.properties.name))\n\t\t\t\n\t\t\tsvgC.append(\"text\")\n\t\t\t.attr(\"class\",\"tips\")\n\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"fill\", \"white\")\n\t\t\t.text(()=>{\n\t\t\t\tfor(let i = 0;i<this.C_province.length;i++){\n\t\t\t\t\tif(d.properties.name == this.C_province[i].name){\n\t\t\t\t\t\treturn  '专利份额:' + this.C_province[i].pat_pro.toFixed(4) ;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}) \n\t\t},\n\t\ttransform(name){\n\t\t\tfor(let i = 0;i<this.$store.state.province.length;i++){\n\t\t\t\tif (this.$store.state.province[i].substring(0,2) == name.substring(0,2)){\n\t\t\t\t\treturn this.$store.state.province[i]\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreateSea(){\n\t\t\tvar C_projection=d3.geo.mercator()\n\t\t\t.center([113,29]) //地图中心位置,107是经度，31是纬度\n\t\t\t.scale(350/1900 * this.$store.state.width) //设置缩放量\n\t\t\t.translate([this.widthC/2,this.heightC * 3 /5]); // 设置平移量\n\t\t\tvar C_path=d3.geo.path()\n\t\t\t.projection(C_projection);\n\t\t\n\t\t\t\n\t\t\t\n\t\t\td3.select(\"#Csea\").selectAll(\"path\")\n\t\t\t.data(this.seajson.data.features) // 绑定数据\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\",\"path2\")\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.style(\"stroke\",\"black\")\n\t\t\t.style(\"stroke-width\",1)\n\t\t\t.attr(\"d\",C_path)\n\t\t\t\n\t\t\t\n\t\t},\n\t\tgetPatPro(d){\n\t\t\tfor(let i = 0;i<this.C_province.length;i++){\n\t\t\t\tif(d.properties.name == this.C_province[i].name){\n\t\t\t\t\treturn this.C_province[i].pat_pro \n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreateMap(){\n\t\t\tvar C_projection=d3.geo.mercator()\n\t\t\t.center([113,29]) //地图中心位置,107是经度，31是纬度\n\t\t\t.scale(350/1900 * this.$store.state.width) //设置缩放量\n\t\t\t.translate([this.widthC/2,this.heightC * 3 /5]); // 设置平移量\n\t\t\t\n\t\t\tvar C_path=d3.geo.path()\n\t\t\t.projection(C_projection);\n\t\t\tlet svgC = d3.select(\"#svgC\");\n\t\t\tlet defs = d3.select(\"#svgC\").append(\"defs\");\n\t\t\tlet linearGradient2 = defs.append(\"linearGradient\")\n\t\t\t\t\t\t\t\t\t.attr(\"id\",\"linearColor4\")\n\t\t\t\t\t\t\t\t\t.attr(\"x1\",\"0%\")\n\t\t\t\t\t\t\t\t\t.attr(\"y1\",\"100%\")\n\t\t\t\t\t\t\t\t\t.attr(\"x2\",\"0%\")\n\t\t\t\t\t\t\t\t\t.attr(\"y2\",\"0%\");\n\t\t\t\n\t\t\tlinearGradient2.append(\"stop\")\n\t\t\t\t\t\t\t.attr(\"offset\",\"0%\")\n\t\t\t\t\t\t\t.style(\"stop-color\",\"#ffffff\");\n\t\t\t\n\t\t\tlinearGradient2.append(\"stop\")\n\t\t\t\t\t\t\t.attr(\"offset\",\"100%\")\n\t\t\t\t\t\t\t.style(\"stop-color\",\"#00007f\");\n\t\t\t\n\t\t\tlet lgd = svgC.append(\"g\").attr(\"id\",\"Clgd\")\n\t\t\t.style(\"display\",\"none\")\n\t\t\t.attr(\"transform\",'translate('+[0,20]+')')\n\t\t\tlgd.append(\"rect\")\n\t\t\t.attr(\"class\",\"lgdC\")\n\t\t\t\n\t\t\t.attr(\"x\",this.widthC * 9 / 10 +3)\n\t\t\t.attr(\"y\",this.heightC/5 )\n\t\t\t.attr(\"rx\",6)\n\t\t\t.attr(\"width\",12 )\n\t\t\t.attr(\"height\",this.heightC * 3 /5)\n\t\t\t.style(\"fill\",\"url(#\" + linearGradient2.attr(\"id\") + \")\");\n\t\t\t\n\t\t\tlgd.append(\"text\")\n\t\t\t.attr(\"class\",\"lgdC\")\n\t\t\t\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.style(\"font-size\", 15)\n\t\t\t.style(\"font-weight\",\"bold\")\n\t\t\t.attr(\"text-anchor\",\"middle\")\n\t\t\t.attr(\"dx\",this.widthC * 9 / 10 +10)\n\t\t\t.attr(\"dy\",this.heightC/5 -5 )\n\t\t\t.text(0.5);\n\t\t\t\n\t\t\tlgd.append(\"text\")\n\t\t\t.attr(\"class\",\"lgdC\")\n\t\t\t\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.style(\"font-size\", 15)\n\t\t\t.style(\"font-weight\",\"bold\")\n\t\t\t.attr(\"text-anchor\",\"middle\")\n\t\t\t.attr(\"dx\",this.widthC * 9 / 10 +10 )\n\t\t\t.attr(\"dy\",this.heightC/5 *4 +15)\n\t\t\t.text(0)\n\t\t\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\td3.select(\"#Cmap\").selectAll(\"path\")\n\t\t\t.data(this.geojson.data.features) // 绑定数据\n\t\t\t.enter()\n\t\t\t.append(\"path\")\n\t\t\t.attr(\"class\",\"path1\")\n\t\t\t.style(\"fill\",\"white\")\n\t\t\t.style(\"stroke\",\"black\")\n\t\t\t.style(\"stroke-width\",0.2)\n\t\t\t.attr(\"d\",C_path)\n\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\tthis.hovered = d.properties.name\n\t\t\t\tthis.C_TipRemove()\n\t\t\t\tthis.C_createTip(d);\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover'\n\t\t\t\t})\n\t\t\t})\n\t\t\t.on(\"mousemove\",d=>{\n\t\t\t\tthis.C_TipRemove();\n\t\t\t\tthis.C_createTip(d);\n\t\t\t})\n\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\tthis.hovered = '';\n\t\t\t\tlet pro = this.getPatPro(d)\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.C_TipRemove()\n\t\t\t\t\t\t}, 1300);\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tview:'viewC',\n\t\t\t\t\tobj:'tips(province)',\n\t\t\t\t\twidth:this.widthC,\n\t\t\t\t\theight:this.heightC,\n\t\t\t\t\tname:this.transform(d.properties.name) +':' +this.selected,\n\t\t\t\t\tvalue:pro,\n\t\t\t\t\tdesc:'the proportion of ' + this.transform(d.properties.name) + ' in ' + this.selected + ' is ' + pro.toFixed(3),\n          data:{\n            industry:this.selected,\n            company:[],\n            province:[this.transform(d.properties.name)],\n            attribute:'proportion'\n          }\n\t\t\t\t})\n\t\t\t})\n\t\t\t.on(\"click\",(d)=>{\n\t\t\t\tlet pro = this.getPatPro(d)\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:\"elementClear\",\n\t\t\t\t\tflag:'province'\n\t\t\t\t})\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewC',\n\t\t\t\t\twidth:this.widthC,\n\t\t\t\t\theight:this.heightC,\n\t\t\t\t\tobj:'select province',\n\t\t\t\t\tname:this.transform(d.properties.name) +':' +this.selected,\n\t\t\t\t\tvalue:pro,\n\t\t\t\t\tdesc:'the proportion of ' + this.transform(d.properties.name) + ' in ' + this.selected + ' is ' + pro.toFixed(3),\n\t\t\t\t\tvisualKeys:{},\n\n          data:{\n            industry:this.selected,\n            company:[],\n            province:[this.transform(d.properties.name)],\n            attribute:'proportion'\n          }\n\t\t\t\t\t\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tif(this.matrixFlag=='tree'){\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype:\"updateTreeData\",\n\t\t\t\t\t\t//treeTypeFlag :'province',\n\t\t\t\t\t\tname:this.transform(d.properties.name)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\ttype : 'changeMatrixElement',\n\t\t\t\t\t\telement : this.transform(d.properties.name)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t\n\t\t},\n\t\tC_update(){\n\t\t\t//console.log(this.C_province)\n\t\t\td3.select(\"#Cmap\").selectAll(\".path1\")\n\t\t\t.data(this.geojson.data.features)\n\t\t\t.style(\"stroke-width\",0.2)\n\t\t\t.transition()\n\t\t\t.style(\"stroke-width\",0.2)\n\t\t\t.style(\"fill\",d=>{\n\t\t\t\tfor(let i = 0;i<this.C_province.length;i++){\n\t\t\t\t\tif(d.properties.name == this.C_province[i].name){\n\t\t\t\t\t\treturn this.C_province[i].pat_pro == 0? \"white\" :this.colorScale(this.C_province[i].pat_pro);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t},\n\t\tinData(d,dataset){\n\t\t\tlet a = this.transform(d.properties.name);\n\t\t\tif(dataset.indexOf(a) != -1){\n\t\t\t\treturn true\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\t\n\t},\n\twatch:{\n\t\tselected(val){\n\t\t\t\t\n\t\t\t\td3.select(\"#Cmap\")\n\t\t\t\t.style(\"display\",'inline');\n\t\t\t\td3.select(\"#Csea\")\n\t\t\t\t.style(\"display\",'inline');\n\t\t\t\td3.select(\"#Clgd\")\n\t\t\t\t.style(\"display\",'inline');\n\t\t\t\td3.select(\"#CTitle\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t\t.text(val + '产业地区分布图');\n\t\t\t\td3.select(\"#Cbtn\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t\td3.select(\"#svgC\").select(\"#txt\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t\tthis.C_update()\n\t\t\t\n\t\t\t\n\t\t},\n\t\ttreeD(){\n\t\t\td3.select(\"#svgC\").selectAll(\".path1\")\n\t\t\t.filter(d=>this.inData(d,this.treeData))\n\t\t\t.style(\"fill\",\"#06ddf4\");\n\t\t\t\n\t\t\td3.select(\"#svgC\").selectAll(\".path1\")\n\t\t\t.filter(d=>!this.inData(d,this.treeData))\n\t\t\t.style(\"fill\",d=>{\n\t\t\t\tfor(let i = 0;i<this.C_province.length;i++){\n\t\t\t\t\tif(d.properties.name == this.C_province[i].name){\n\t\t\t\t\t\treturn this.C_province[i].pat_pro == 0? \"white\" :this.colorScale(this.C_province[i].pat_pro);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\thovered(val){\n\t\t\t\n\t\t\td3.select(\"#Cmap\").selectAll(\".path1\")\n\t\t\t.data(this.geojson.data.features)\n\t\t\t.filter(d=>val == d.properties.name ||this.inData(d,this.treeData))\n\t\t\t.style(\"fill\",'#06ddf4');\n\t\t\t\n\t\t\td3.select(\"#Cmap\").selectAll(\".path1\")\n\t\t\t.data(this.geojson.data.features)\n\t\t\t.filter(d=>val != d.properties.name && !this.inData(d,this.treeData) )\n\t\t\t.style(\"fill\",d=>{\n\t\t\t\tfor(let i = 0;i<this.C_province.length;i++){\n\t\t\t\t\tif(d.properties.name == this.C_province[i].name){\n\t\t\t\t\t\treturn this.C_province[i].pat_pro == 0? \"white\" :this.colorScale(this.C_province[i].pat_pro);\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t},\n\t\tmatrixElement1(){\n\t\t\td3.select(\"#svgC\").selectAll(\".path1\")\n\t\t\t.filter(d=>this.inData(d,this.matrixElement))\n\t\t\t.style(\"stroke\",\"red\")\n\t\t\t.style(\"stroke-width\",1);\n\t\t\t\n\t\t\td3.select(\"#svgC\").selectAll(\".path1\")\n\t\t\t.filter(d=>!this.inData(d,this.matrixElement))\n\t\t\t.style(\"stroke\",\"black\")\n\t\t\t.style(\"stroke-width\",0.2);\n\t\t}\n\t},\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}