{"ast":null,"code":"import * as d3 from \"d3\";\nimport axios from 'axios';\nexport default {\n  name: 'componentF',\n\n  data() {\n    return {\n      heightF: this.$store.state.height * 0.6,\n      widthF: this.$store.state.width * 0.3,\n      hovered: '',\n      nodesLength: 0,\n      comparisonMode: 'sim',\n      tipFlag: false //matrixData:['上海市','北京市','广东省','浙江省'],\n      //matrixData:['清华大学','北京大学','复旦大学','上海交通大学']\n\n    };\n  },\n\n  mounted() {\n    d3.select(\"#tx\").attr(\"dy\", 20);\n    this.$store.commit({\n      type: \"appendLine\",\n      id: 'lineF',\n      svg: 'svgF',\n      width: this.widthF,\n      height: this.heightF * 1 / 3 - 20,\n      color: 'mediumseagreen',\n      stroke: 1\n    });\n    this.$store.commit({\n      type: 'appendTitle',\n      id: 'FbarTitle',\n      class: 'classF',\n      svg: 'svgF',\n      dx: '24px',\n      dy: '36px',\n      size: '14px'\n    });\n    d3.select(\"#svgF\").attr(\"width\", this.widthF).attr(\"height\", this.heightF);\n    axios.get('province_pat_pro.json').then(response => {\n      ////console.log(response\t)\n      this.$store.commit({\n        type: 'FprovincePro',\n        provjson: response\n      });\n    });\n    axios.get('comp_pat_pro.json').then(response => {\n      this.$store.commit({\n        type: 'FcompanyPro',\n        projson: response\n      });\n    });\n    axios.get('supply_chain(1).csv').then(response => {\n      let a = d3.csv.parse(response.data);\n      this.$store.commit({\n        type: \"FindData\",\n        value: a\n      });\n    });\n    d3.select(\"#svgF\").append(\"g\").attr(\"id\", 'Fbar');\n    d3.select(\"#svgF\").append(\"g\").attr(\"id\", \"Fmatrix\");\n    this.$store.commit({\n      type: 'appendBtn',\n      svgID: 'svgF',\n      btnID: 'Fbtn',\n      width: this.widthF,\n      text: 'switch'\n    });\n    d3.select(\"#Fbtn\").on(\"click\", () => {\n      this.modeChange();\n    }).style(\"display\", 'none');\n    this.appendLgd();\n  },\n\n  computed: {\n    matrixData() {\n      let sol = [];\n\n      for (let i = 0; i < this.treeData.length; i++) {\n        sol.push(this.treeData[i]);\n      }\n\n      for (let i = 0; i < this.$store.state.matrixElement.length; i++) {\n        if (this.treeData.indexOf(this.$store.state.matrixElement[i]) == -1) {\n          sol.push(this.$store.state.matrixElement[i]);\n        }\n      }\n\n      return sol;\n    },\n\n    matrixData3() {\n      return this.matrixData2 + '1';\n    },\n\n    matrixData2() {\n      let tmp = [];\n\n      if (this.treeTypeFlag == 'company') {\n        for (let i = 0; i < this.matrixData.length; i++) {\n          for (let j = 0; j < this.matrixData.length; j++) {\n            if (this.comparisonMode == 'sim') {\n              tmp.push({\n                x: i,\n                y: j,\n                rate: this.sim(this.matrixData[i], this.matrixData[j], this.projson)\n              });\n            } else if (this.comparisonMode == 'complement') {\n              tmp.push({\n                x: i,\n                y: j,\n                rate: this.complement(this.matrixData[i], this.matrixData[j], this.projson)\n              });\n            }\n          }\n        }\n      } else if (this.treeTypeFlag == 'province') {\n        for (let i = 0; i < this.matrixData.length; i++) {\n          for (let j = 0; j < this.matrixData.length; j++) {\n            if (this.comparisonMode == 'sim') {\n              tmp.push({\n                x: i,\n                y: j,\n                rate: this.sim(this.matrixData[i].substring(0, 2), this.matrixData[j].substring(0, 2), this.provjson)\n              });\n            } else if (this.comparisonMode == 'complement') {\n              tmp.push({\n                x: i,\n                y: j,\n                rate: this.complement(this.matrixData[i].substring(0, 2), this.matrixData[j].substring(0, 2), this.provjson)\n              });\n            }\n          }\n        }\n      }\n\n      return tmp;\n    },\n\n    treeData1() {\n      return this.treeData[0] ? this.treeData[0] : '';\n    },\n\n    bar_data1() {\n      return this.bar_data + '1';\n    },\n\n    bar_data() {\n      let a = [];\n      let b = [];\n      let c = [];\n\n      if (this.treeData[0] && this.treeTypeFlag == 'company') {\n        d3.select(\"#svgD\").selectAll(\"circle\").filter((d, i) => {\n          if (i > 0) {\n            a.push(d.name);\n          }\n        });\n        a = a.filter(d => d != this.treeData[0]);\n\n        for (let i = 0; i < a.length; i++) {\n          if (this.comparisonMode == 'sim') {\n            b.push({\n              name: a[i],\n              rate: this.sim(a[i], this.treeData[0], this.projson)\n            });\n          } else if (this.comparisonMode == 'complement') {\n            b.push({\n              name: a[i],\n              rate: this.complement(a[i], this.treeData[0], this.projson)\n            });\n          }\n        }\n\n        b.sort((a, b) => {\n          return b.rate - a.rate;\n        });\n        c = b.slice(0, 5);\n      } else if (this.treeData[0] && this.treeTypeFlag == 'province') {\n        for (let i = 0; i < this.$store.state.province.length; i++) {\n          a.push(this.$store.state.province[i].substring(0, 2));\n        }\n\n        a = a.filter(d => d != this.treeData[0].substring(0, 2));\n\n        for (let i = 0; i < a.length; i++) {\n          if (this.comparisonMode == 'sim') {\n            b.push({\n              name: this.transform(a[i]),\n              rate: this.sim(a[i], this.treeData[0].substring(0, 2), this.provjson)\n            });\n          } else if (this.comparisonMode == 'complement') {\n            b.push({\n              name: this.transform(a[i]),\n              rate: this.complement(a[i], this.treeData[0].substring(0, 2), this.provjson)\n            });\n          }\n        }\n\n        b.sort((a, b) => {\n          return b.rate - a.rate;\n        });\n        c = b.slice(0, 5);\n      }\n\n      return c;\n    },\n\n    province() {\n      return this.$store.state.province;\n    },\n\n    treeTypeFlag() {\n      return this.$store.state.treeTypeFlag;\n    },\n\n    treeData() {\n      return this.$store.state.objB.treeData;\n    },\n\n    treeD() {\n      return this.treeData + '1';\n    },\n\n    provjson() {\n      return this.$store.state.objF.provjson;\n    },\n\n    projson() {\n      return this.$store.state.objF.projson;\n    },\n\n    F_indData() {\n      let k = [];\n\n      for (let i = 0; i < this.$store.state.objF.indData.length; i++) {\n        if (k.indexOf(this.$store.state.objF.indData[i].industry_name) == -1) {\n          k.push(this.$store.state.objF.indData[i].industry_name);\n        }\n      }\n\n      return k;\n    }\n\n  },\n  methods: {\n    log() {\n      console.log(this.treeData);\n      console.log(this.$store.state.matrixElement);\n    },\n\n    F_TipRemove() {\n      d3.select(\"#svgF\").selectAll(\".tips\").remove();\n    },\n\n    F_createTip(d) {\n      function mouseXY(e) {\n        e = e || window.event;\n        return {\n          \"x\": e.offsetX,\n          \"y\": e.offsetY\n        };\n      }\n\n      let XY = mouseXY(event);\n      let tempWidth = this.matrixData[d.x].length > 8 || this.matrixData[d.y].length > 8 ? Math.max(this.matrixData[d.x].length, this.matrixData[d.y].length) * 15 + 10 : 160;\n      let svgF = d3.select(\"#svgF\");\n      let txt = this.comparisonMode == 'sim' ? '结构相似性系数:' : '互补性系数:';\n\n      if (XY.x > 0 && XY.x < this.widthF - tempWidth) {\n        svgF.append(\"rect\").attr(\"id\", \"tipBack\").attr(\"class\", \"tips\").attr(\"x\", XY.x + 10).attr(\"y\", XY.y - 30).style(\"height\", 80).style(\"width\", tempWidth).attr(\"rx\", 20);\n        svgF.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x + 20).attr(\"dy\", XY.y - 5).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"#e34b00\") //.text(this.matrixData[d.y])\n        .text('company/province ***');\n        svgF.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x + 20).attr(\"dy\", XY.y + 15).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"#9eea74\") //.text(this.matrixData[d.x]) ;\n        .text('company/province ***');\n        svgF.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x + 20).attr(\"dy\", XY.y + 35).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"white\").text(txt + d.rate.toFixed(3));\n      } else {\n        svgF.append(\"rect\").attr(\"id\", \"tipBack\").attr(\"class\", \"tips\").attr(\"x\", XY.x - 10 - tempWidth).attr(\"y\", XY.y - 30).style(\"height\", 80).style(\"width\", tempWidth).attr(\"rx\", 20);\n        svgF.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x - tempWidth).attr(\"dy\", XY.y - 5).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"#e34b00\") //.text(this.matrixData[d.y])\n        .text('company/province ***');\n        svgF.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x - tempWidth).attr(\"dy\", XY.y + 15).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"#9eea74\") //.text(this.matrixData[d.x]) ;\n        .text('company/province ***');\n        svgF.append(\"text\").attr(\"class\", \"tips\").attr(\"dx\", XY.x - tempWidth).attr(\"dy\", XY.y + 35).attr(\"text-anchor\", \"start\").attr(\"font-family\", \"sans-serif\").attr(\"font-size\", \"14px\").attr(\"font-weight\", \"bold\").attr(\"fill\", \"white\").text(txt + d.rate.toFixed(3));\n      }\n    },\n\n    appendLgd() {\n      let defs = d3.select(\"#svgF\").append(\"defs\");\n      let linearGradient2 = defs.append(\"linearGradient\").attr(\"id\", \"linearColor2\").attr(\"x1\", \"0%\").attr(\"y1\", \"0%\").attr(\"x2\", \"100%\").attr(\"y2\", \"0%\");\n      linearGradient2.append(\"stop\").attr(\"offset\", \"0%\").style(\"stop-color\", \"#c1e8ca\");\n      linearGradient2.append(\"stop\").attr(\"offset\", \"100%\").style(\"stop-color\", \"#48784f\");\n      d3.select(\"#svgF\").append(\"rect\").attr(\"class\", \"lgd1\").attr(\"x\", this.widthF / 5).attr(\"rx\", 6).attr(\"y\", this.heightF / 5 * 2 - 10).attr(\"width\", this.widthF / 5 * 3).attr(\"height\", 12).style(\"fill\", \"url(#\" + linearGradient2.attr(\"id\") + \")\");\n      d3.select(\"#svgF\").append(\"text\").attr(\"class\", \"lgd1\").attr(\"font-family\", \"sans-serif\").style(\"font-size\", \"20px\").attr(\"dx\", \"24px\").attr(\"dy\", this.heightF / 3 + 10).style(\"font-weight\", \"bold\").attr(\"text-anchor\", \"start\").text(\"结构相似性系数矩阵\");\n      d3.select(\"#svgF\").append(\"text\").attr(\"class\", \"lgd1\").attr(\"font-family\", \"sans-serif\").style(\"font-size\", 15).attr(\"dx\", this.widthF / 5 - 15).style(\"font-weight\", \"bold\").attr(\"dy\", this.heightF / 5 * 2 + 5).text(0);\n      d3.select(\"#svgF\").append(\"text\").attr(\"class\", \"lgd1\").attr(\"font-family\", \"sans-serif\").style(\"font-size\", 15).style(\"font-weight\", \"bold\").attr(\"dx\", this.widthF / 5 + this.widthF / 5 * 3 + 5).attr(\"dy\", this.heightF / 5 * 2 + 5).text(1);\n      d3.select(\"#svgF\").selectAll(\".lgd1\").style(\"display\", 'none');\n    },\n\n    modeChange() {\n      if (this.comparisonMode == 'sim') {\n        this.comparisonMode = 'complement';\n        this.$store.commit({\n          type: 'userClick',\n          view: 'viewF',\n          width: this.widthF,\n          height: this.heightF,\n          obj: 'switch(comparison mode)',\n          name: this.treeData[0],\n          value: 'complement',\n          desc: 'show the complementarity of ' + this.treeData[0] + ' and others',\n          visualKeys: {},\n          data: {\n            industry: '',\n            company: this.treeTypeFlag == 'company' ? [this.treeData[0]] : [],\n            province: this.treeTypeFlag == 'province' ? [this.treeData[0]] : [],\n            attribute: 'complement'\n          }\n        });\n        this.$store.commit('ClickRecordState');\n      } else if (this.comparisonMode == 'complement') {\n        this.comparisonMode = 'sim';\n        this.$store.commit({\n          type: 'userClick',\n          view: 'viewF',\n          width: this.widthF,\n          height: this.heightF,\n          obj: 'switch(comparison mode)',\n          name: this.treeData[0],\n          value: 'similarity',\n          desc: 'show the similarity of ' + this.treeData[0] + ' and others',\n          data: {\n            industry: '',\n            company: this.treeTypeFlag == 'company' ? [this.treeData[0]] : [],\n            province: this.treeTypeFlag == 'province' ? [this.treeData[0]] : [],\n            attribute: 'similarity'\n          }\n        });\n        this.$store.commit('ClickRecordState');\n      }\n\n      this.updateBar();\n    },\n\n    transform(name) {\n      for (let i = 0; i < this.$store.state.province.length; i++) {\n        if (this.$store.state.province[i].substring(0, 2) == name.substring(0, 2)) {\n          return this.$store.state.province[i];\n        }\n      }\n    },\n\n    updateBar() {\n      let bar_color = d3.scale.category20();\n      let bar_scale = d3.scale.linear().domain([this.bar_data[this.bar_data.length - 1].rate, this.bar_data[0].rate]).range([70, this.widthF / 3]);\n      let pd = 10,\n          wd = 8;\n      let bar = d3.select(\"#Fbar\");\n      bar.selectAll('rect').data(this.bar_data).enter().append(\"rect\").attr(\"class\", \"bar1\").attr(\"height\", wd).attr(\"width\", 0).on(\"mouseover\", function () {\n        d3.select(this).attr(\"stroke-width\", 1).attr(\"stroke\", 'red');\n      }).on(\"mouseout\", function () {\n        d3.select(this).attr(\"stroke-width\", 0);\n      }).on(\"click\", d => {\n        this.$store.commit({\n          type: 'updateTreeData',\n          name: d.name,\n          treeTypeFlag: this.treeTypeFlag\n        });\n        this.$store.commit({\n          type: 'userClick',\n          view: 'viewF',\n          width: this.widthF,\n          height: this.heightF,\n          obj: this.treeTypeFlag == 'company' ? 'select company' : 'select province',\n          name: this.treeData[0] + 'vs' + d.name,\n          value: d.rate,\n          desc: 'the ' + this.comparisonMode + ' rate of ' + this.treeData[0] + ' and ' + d.name + ' is ' + d.rate,\n          data: {\n            industry: '',\n            company: this.treeTypeFlag == 'company' ? [this.treeData[0], d.name] : [],\n            province: this.treeTypeFlag == 'province' ? [this.treeData[0], d.name] : [],\n            attribute: 'comparison'\n          }\n        });\n        this.$store.commit('ClickRecordState');\n      });\n      bar.selectAll(\"rect\").data(this.bar_data).attr(\"rx\", 5).style(\"fill\", (d, i) => bar_color(i)).attr(\"x\", this.widthF / 2).attr(\"y\", (d, i) => 60 + i * (pd + wd) - 10).transition().delay((d, i) => i * 200).attr(\"width\", d => bar_scale(d.rate));\n      bar.selectAll(\"rect\").data(this.bar_data).exit().remove();\n      bar.selectAll(\".text1\").data(this.bar_data).enter().append(\"text\").attr(\"font-family\", \"sans-serif\").attr(\"font-weight\", \"bold\").attr(\"class\", \"text1\").attr(\"font-size\", 0);\n      bar.selectAll(\".text1\").data(this.bar_data).attr(\"dx\", this.widthF / 2 - 10).attr(\"dy\", (d, i) => 60 + i * (pd + wd)).attr(\"text-anchor\", \"end\").attr(\"fill\", \"black\").transition().delay((d, i) => i * 200).attr(\"font-size\", 10).text(d => d.name);\n      bar.selectAll(\".text1\").data(this.bar_data).exit().remove();\n      bar.selectAll(\".text2\").data(this.bar_data).enter().append(\"text\").attr(\"font-family\", \"sans-serif\").attr(\"font-weight\", \"bold\").style(\"fill\", 'black').attr(\"class\", \"text2\").attr(\"font-size\", 0);\n      bar.selectAll(\".text2\").data(this.bar_data).transition().delay((d, i) => i * 200).attr(\"font-size\", 12).attr(\"dx\", d => bar_scale(d.rate) + this.widthF / 2 + 5).attr(\"dy\", (d, i) => 60 + i * (pd + wd)).text(d => d.rate.toFixed(3));\n      bar.selectAll(\".text2\").data(this.bar_data).exit().remove();\n    },\n\n    sim(x, y, dataset) {\n      if (x == y) {\n        return 1;\n      } else if (x.substring(0, 2) == \"台湾\" || x.substring(0, 2) == \"香港\" || x.substring(0, 2) == \"澳门\" || y.substring(0, 2) == \"台湾\" || y.substring(0, 2) == \"香港\" || y.substring(0, 2) == \"澳门\") {\n        return 0;\n      } else {\n        let sumXY = 0;\n\n        for (let i = 0; i < this.F_indData.length; i++) {\n          if (dataset.data[x][this.F_indData[i]] && dataset.data[y][this.F_indData[i]]) {\n            sumXY += dataset.data[x][this.F_indData[i]] * dataset.data[y][this.F_indData[i]];\n          }\n        }\n\n        let sumXS = 0;\n\n        for (let i = 0; i < this.F_indData.length; i++) {\n          if (dataset.data[x][this.F_indData[i]]) {\n            sumXS += dataset.data[x][this.F_indData[i]] * dataset.data[x][this.F_indData[i]];\n          }\n        }\n\n        let sumYS = 0;\n\n        for (let i = 0; i < this.F_indData.length; i++) {\n          if (dataset.data[y][this.F_indData[i]]) {\n            sumYS += dataset.data[y][this.F_indData[i]] * dataset.data[y][this.F_indData[i]];\n          }\n        }\n\n        let simRate = sumXY / Math.sqrt(sumXS * sumYS);\n        return simRate;\n      }\n    },\n\n    complement(x, y, dataset) {\n      if (x == y) {\n        return 0;\n      } else if (x.substring(0, 2) == \"台湾\" || x.substring(0, 2) == \"香港\" || x.substring(0, 2) == \"澳门\" || y.substring(0, 2) == \"台湾\" || y.substring(0, 2) == \"香港\" || y.substring(0, 2) == \"澳门\") {\n        return 0;\n      } else {\n        let keys = [];\n\n        for (let key in dataset.data[x]) {\n          // eslint-disable-next-line\n          if (dataset.data[x].hasOwnProperty(key)) {\n            keys.push(key);\n          }\n        }\n\n        for (let key in dataset.data[y]) {\n          // eslint-disable-next-line\n          if (dataset.data[y].hasOwnProperty(key) && keys.indexOf(key) == -1) {\n            keys.push(key);\n          }\n        }\n\n        let sumXY = 0;\n\n        for (let i = 0; i < keys.length; i++) {\n          if (dataset.data[x][keys[i]] && dataset.data[y][keys[i]]) {\n            sumXY += dataset.data[x][keys[i]] * dataset.data[y][keys[i]];\n          }\n        }\n\n        let sumXS = 0;\n\n        for (let i = 0; i < keys.length; i++) {\n          if (dataset.data[x][keys[i]]) {\n            sumXS += dataset.data[x][keys[i]] * dataset.data[x][keys[i]];\n          }\n        }\n\n        let sumYS = 0;\n\n        for (let i = 0; i < keys.length; i++) {\n          if (dataset.data[y][keys[i]]) {\n            sumYS += dataset.data[y][keys[i]] * dataset.data[y][keys[i]];\n          }\n        }\n\n        let simRate = sumXY / Math.sqrt(sumXS * sumYS);\n        return 1 - simRate;\n      }\n    },\n\n    matrixUpdate() {\n      let pd = 2,\n          wd = this.matrixData.length == 0 ? 0 : (this.widthF / 2 - (this.matrixData.length - 1) * pd) / this.matrixData.length;\n      let matrix_color = d3.scale.linear().domain([0, 1]).range([\"#c1e8ca\", \"#48784f\"]);\n      d3.select(\"#Fmatrix\").selectAll(\"rect\").data(this.matrixData2).enter().append(\"rect\").attr(\"fill\", 'white').attr(\"height\", 0).attr(\"width\", 0);\n      d3.select(\"#Fmatrix\").selectAll(\"rect\").data(this.matrixData2).on(\"mouseover\", d => {\n        d3.select(\"#Fmatrix\").selectAll(\"text\").data(this.matrixData).filter(data => data == this.matrixData[d.y]).style(\"fill\", \"#e34b00\");\n        d3.select(\"#Fmatrix\").selectAll(\"text\").data(this.matrixData).filter(data => data == this.matrixData[d.x]).style(\"fill\", \"#9eea74\");\n        d3.select(\"#Fmatrix\").selectAll(\"rect\").data(this.matrixData2).filter(data => data.x == d.x && data.y == d.y || data.x == d.y && data.y == d.x).style(\"fill\", \"red\"); //this.F_TipRemove()\n\n        this.F_createTip(d);\n\n        if (d.x != d.y) {\n          this.$store.commit({\n            type: 'userMouseover'\n          });\n        }\n      }).on(\"mousemove\", d => {\n        this.F_TipRemove();\n        this.F_createTip(d);\n      }).on(\"mouseout\", d => {\n        setTimeout(() => {\n          this.F_TipRemove();\n        }, 1500);\n        d3.select(\"#Fmatrix\").selectAll(\"text\").data(this.matrixData).filter(data => data == this.matrixData[d.x] || data == this.matrixData[d.y]).style(\"fill\", \"black\");\n        d3.select(\"#Fmatrix\").selectAll(\"rect\").data(this.matrixData2).filter(data => data.x == d.x && data.y == d.y || data.x == d.y && data.y == d.x).style(\"fill\", data => matrix_color(data.rate));\n        let type = this.comparisonMode == 'sim' ? 'similarity' : 'complement';\n\n        if (d.x != d.y) {\n          this.$store.commit({\n            type: 'userMouseout',\n            dif: 'fast',\n            view: 'viewF',\n            width: this.widthF,\n            height: this.heightF,\n            obj: 'tips(matrix)',\n            name: this.matrixData[d.x] + ' vs ' + this.matrixData[d.y],\n            value: d.rate,\n            desc: 'the ' + type + ' rate of ' + this.matrixData[d.x] + ' and ' + this.matrixData[d.y] + ' is ' + d.rate.toFixed(3),\n            data: {\n              industry: '',\n              company: this.treeTypeFlag == 'company' ? [this.matrixData[d.x], this.matrixData[d.y]] : [],\n              province: this.treeTypeFlag == 'province' ? [this.matrixData[d.x], this.matrixData[d.y]] : [],\n              attribute: this.comparisonMode == 'sim' ? 'similarity' : 'complement'\n            }\n          });\n          this.$store.commit('OutRecordState');\n        }\n      }).transition().attr(\"x\", d => (this.widthF - this.matrixData.length * wd - pd * (this.matrixData.length - 1)) / 2 + d.x * (wd + pd) + this.widthF / 6).attr(\"y\", d => (this.heightF - this.matrixData.length * wd - pd * (this.matrixData.length - 1)) / 2 + d.y * (wd + pd) + this.heightF / 5).attr(\"height\", wd).attr(\"width\", wd).attr(\"rx\", wd / 5).style(\"fill\", d => matrix_color(d.rate));\n      d3.select(\"#Fmatrix\").selectAll(\"rect\").data(this.matrixData2).exit().remove();\n      d3.select(\"#Fmatrix\").selectAll(\"text\").data(this.matrixData).enter().append(\"text\").attr(\"font-family\", \"sans-serif\").style(\"font-size\", 10).attr(\"text-anchor\", \"end\");\n      d3.select(\"#Fmatrix\").selectAll(\"text\").data(this.matrixData).transition().attr(\"dx\", (this.widthF - this.matrixData.length * wd - pd * (this.matrixData.length - 1)) / 2 + this.widthF / 6 - 5).attr(\"dy\", (d, i) => (this.heightF - this.matrixData.length * wd - pd * (this.matrixData.length - 1)) / 2 + i * (wd + pd) + this.heightF / 5 + wd / 2 + 3).text(d => d);\n      d3.select(\"#Fmatrix\").selectAll(\"text\").data(this.matrixData).exit().remove();\n    }\n\n  },\n  watch: {\n    treeD() {\n      if (this.treeData[0]) {\n        d3.select(\"#FbarTitle\").text(this.treeData[0] + '竞争排序');\n      } else {\n        d3.select(\"#FbarTitle\").text('');\n        d3.select(\"#Fmatrix\").selectAll(\"rect\").remove();\n        d3.select(\"#Fmatrix\").selectAll(\"text\").remove();\n      }\n    },\n\n    matrixData3() {\n      this.matrixUpdate();\n    },\n\n    comparisonMode(val) {\n      this.matrixUpdate();\n\n      if (val == 'sim') {\n        d3.select(\"#FbarTitle\").text(this.treeData[0] + '竞争排序');\n      } else if (val == 'complement') {\n        d3.select(\"#FbarTitle\").text(this.treeData[0] + '互补排序');\n      }\n    },\n\n    treeData1() {\n      if (this.treeData1) {\n        this.updateBar();\n        d3.select(\"#svgF\").selectAll(\".lgd1\").style(\"display\", 'inline');\n        d3.select(\"#Fbtn\").style(\"display\", 'inline');\n\n        if (this.treeTypeFlag == 'company') {\n          for (let i = 0; i < this.bar_data.length; i++) {\n            this.$store.commit({\n              type: 'changeMatrixElement',\n              element: this.bar_data[i].name\n            });\n          }\n        } else {\n          for (let i = 0; i < this.bar_data.length; i++) {\n            this.$store.commit({\n              type: 'changeMatrixElement',\n              element: this.bar_data[i].name\n            });\n          }\n        }\n      } else {\n        d3.select(\"#Fbar\").selectAll(\"rect\").remove();\n        d3.select(\"#Fbar\").selectAll(\"text\").remove();\n        d3.select(\"#svgF\").selectAll(\".lgd1\").style(\"display\", 'none');\n        d3.select(\"#Fbtn\").style(\"display\", 'none');\n      }\n    }\n\n  }\n};","map":{"version":3,"sources":["C:\\Users\\admin\\Desktop\\WYSIWYG\\归档\\src\\components\\componentF.vue"],"names":[],"mappings":"AAyBA,OAAO,KAAK,EAAZ,MAAoB,IAApB;AAEA,OAAO,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACd,EAAA,IAAI,EAAE,YADQ;;AAEd,EAAA,IAAI,GAAE;AACL,WAAO;AACN,MAAA,OAAO,EAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,MAAlB,GAA2B,GAD7B;AAEN,MAAA,MAAM,EAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,KAAlB,GAA0B,GAF3B;AAGN,MAAA,OAAO,EAAC,EAHF;AAIN,MAAA,WAAW,EAAC,CAJN;AAKN,MAAA,cAAc,EAAC,KALT;AAMN,MAAA,OAAO,EAAC,KANF,CAON;AACA;;AARM,KAAP;AAYA,GAfa;;AAgBd,EAAA,OAAO,GAAE;AAER,IAAA,EAAE,CAAC,MAAH,CAAU,KAAV,EAAiB,IAAjB,CAAsB,IAAtB,EAA2B,EAA3B;AACA,SAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,MAAA,IAAG,EAAG,YADY;AAElB,MAAA,EAAC,EAAG,OAFc;AAGlB,MAAA,GAAE,EAAG,MAHa;AAIlB,MAAA,KAAK,EAAC,KAAK,MAJO;AAKlB,MAAA,MAAM,EAAC,KAAK,OAAL,GAAe,CAAf,GAAmB,CAAnB,GAAsB,EALX;AAMlB,MAAA,KAAK,EAAE,gBANW;AAOlB,MAAA,MAAM,EAAC;AAPW,KAAnB;AAUA,SAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,MAAA,IAAI,EAAC,aADa;AAElB,MAAA,EAAE,EAAC,WAFe;AAGlB,MAAA,KAAK,EAAC,QAHY;AAIlB,MAAA,GAAG,EAAC,MAJc;AAKlB,MAAA,EAAE,EAAC,MALe;AAMlB,MAAA,EAAE,EAAC,MANe;AAOlB,MAAA,IAAI,EAAC;AAPa,KAAnB;AAUA,IAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EACC,IADD,CACM,OADN,EACc,KAAK,MADnB,EAEC,IAFD,CAEM,QAFN,EAEe,KAAK,OAFpB;AAKA,IAAA,KAAK,CAAC,GAAN,CAAU,uBAAV,EACC,IADD,CACM,QAAQ,IAAE;AACf;AACA,WAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,QAAA,IAAI,EAAC,cADa;AAElB,QAAA,QAAQ,EAAC;AAFS,OAAnB;AAIA,KAPD;AASA,IAAA,KAAK,CAAC,GAAN,CAAU,mBAAV,EACC,IADD,CACM,QAAQ,IAAE;AACf,WAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,QAAA,IAAI,EAAC,aADa;AAElB,QAAA,OAAO,EAAC;AAFU,OAAnB;AAIA,KAND;AAQA,IAAA,KAAK,CAAC,GAAN,CAAU,qBAAV,EACC,IADD,CACM,QAAQ,IAAE;AACf,UAAI,CAAA,GAAI,EAAE,CAAC,GAAH,CAAO,KAAP,CAAa,QAAQ,CAAC,IAAtB,CAAR;AACA,WAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,QAAA,IAAG,EAAG,UADY;AAElB,QAAA,KAAI,EAAG;AAFW,OAAnB;AAIA,KAPD;AASA,IAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,IAApC,EAAyC,MAAzC;AACA,IAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,IAApC,EAAyC,SAAzC;AACA,SAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,MAAA,IAAI,EAAC,WADa;AAElB,MAAA,KAAK,EAAC,MAFY;AAGlB,MAAA,KAAK,EAAC,MAHY;AAIlB,MAAA,KAAK,EAAC,KAAK,MAJO;AAKlB,MAAA,IAAI,EAAC;AALa,KAAnB;AAQA,IAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EACC,EADD,CACI,OADJ,EACY,MAAI;AACf,WAAK,UAAL;AACA,KAHD,EAIC,KAJD,CAIO,SAJP,EAIiB,MAJjB;AAMA,SAAK,SAAL;AAIA,GA1Fa;;AA2Fd,EAAA,QAAQ,EAAC;AACR,IAAA,UAAU,GAAE;AACX,UAAI,GAAE,GAAI,EAAV;;AACA,WAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,QAAL,CAAc,MAA9B,EAAqC,CAAC,EAAtC,EAAyC;AACxC,QAAA,GAAG,CAAC,IAAJ,CAAS,KAAK,QAAL,CAAc,CAAd,CAAT;AACD;;AACA,WAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,aAAlB,CAAgC,MAAhD,EAAuD,CAAC,EAAxD,EAA2D;AAC1D,YAAG,KAAK,QAAL,CAAc,OAAd,CAAsB,KAAK,MAAL,CAAY,KAAZ,CAAkB,aAAlB,CAAgC,CAAhC,CAAtB,KAA6D,CAAC,CAAjE,EAAmE;AAClE,UAAA,GAAG,CAAC,IAAJ,CAAS,KAAK,MAAL,CAAY,KAAZ,CAAkB,aAAlB,CAAgC,CAAhC,CAAT;AACD;AAED;;AACA,aAAO,GAAP;AACA,KAbO;;AAcR,IAAA,WAAW,GAAE;AACZ,aAAO,KAAK,WAAL,GAAkB,GAAzB;AACA,KAhBO;;AAiBR,IAAA,WAAW,GAAE;AACZ,UAAI,GAAE,GAAI,EAAV;;AACA,UAAG,KAAK,YAAL,IAAqB,SAAxB,EAAkC;AACjC,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,UAAL,CAAgB,MAAhC,EAAuC,CAAC,EAAxC,EAA2C;AAC1C,eAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,UAAL,CAAgB,MAAhC,EAAuC,CAAC,EAAxC,EAA2C;AAC1C,gBAAG,KAAK,cAAL,IAAuB,KAA1B,EAAgC;AAC/B,cAAA,GAAG,CAAC,IAAJ,CAAS;AAAC,gBAAA,CAAC,EAAC,CAAH;AAAK,gBAAA,CAAC,EAAC,CAAP;AAAS,gBAAA,IAAI,EAAC,KAAK,GAAL,CAAS,KAAK,UAAL,CAAgB,CAAhB,CAAT,EAA4B,KAAK,UAAL,CAAgB,CAAhB,CAA5B,EAA+C,KAAK,OAApD;AAAd,eAAT;AACD,aAFA,MAGK,IAAG,KAAK,cAAL,IAAuB,YAA1B,EAAuC;AAC3C,cAAA,GAAG,CAAC,IAAJ,CAAS;AAAC,gBAAA,CAAC,EAAC,CAAH;AAAK,gBAAA,CAAC,EAAC,CAAP;AAAS,gBAAA,IAAI,EAAC,KAAK,UAAL,CAAgB,KAAK,UAAL,CAAgB,CAAhB,CAAhB,EAAmC,KAAK,UAAL,CAAgB,CAAhB,CAAnC,EAAsD,KAAK,OAA3D;AAAd,eAAT;AACD;AAED;AACD;AACD,OAZA,MAaK,IAAG,KAAK,YAAL,IAAoB,UAAvB,EAAkC;AACtC,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,UAAL,CAAgB,MAAhC,EAAuC,CAAC,EAAxC,EAA2C;AAC1C,eAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,UAAL,CAAgB,MAAhC,EAAuC,CAAC,EAAxC,EAA2C;AAC1C,gBAAG,KAAK,cAAL,IAAuB,KAA1B,EAAgC;AAC/B,cAAA,GAAG,CAAC,IAAJ,CAAS;AAAC,gBAAA,CAAC,EAAC,CAAH;AAAK,gBAAA,CAAC,EAAC,CAAP;AAAS,gBAAA,IAAI,EAAC,KAAK,GAAL,CAAS,KAAK,UAAL,CAAgB,CAAhB,EAAmB,SAAnB,CAA6B,CAA7B,EAA+B,CAA/B,CAAT,EAA2C,KAAK,UAAL,CAAgB,CAAhB,EAAmB,SAAnB,CAA6B,CAA7B,EAA+B,CAA/B,CAA3C,EAA6E,KAAK,QAAlF;AAAd,eAAT;AACD,aAFA,MAGK,IAAG,KAAK,cAAL,IAAuB,YAA1B,EAAuC;AAC3C,cAAA,GAAG,CAAC,IAAJ,CAAS;AAAC,gBAAA,CAAC,EAAC,CAAH;AAAK,gBAAA,CAAC,EAAC,CAAP;AAAS,gBAAA,IAAI,EAAC,KAAK,UAAL,CAAgB,KAAK,UAAL,CAAgB,CAAhB,EAAmB,SAAnB,CAA6B,CAA7B,EAA+B,CAA/B,CAAhB,EAAkD,KAAK,UAAL,CAAgB,CAAhB,EAAmB,SAAnB,CAA6B,CAA7B,EAA+B,CAA/B,CAAlD,EAAoF,KAAK,QAAzF;AAAd,eAAT;AACD;AAED;AACD;AACD;;AACA,aAAO,GAAP;AACA,KA9CO;;AA+CR,IAAA,SAAS,GAAE;AACV,aAAO,KAAK,QAAL,CAAc,CAAd,IAAkB,KAAK,QAAL,CAAc,CAAd,CAAlB,GAAmC,EAA1C;AACA,KAjDO;;AAkDR,IAAA,SAAS,GAAE;AACV,aAAO,KAAK,QAAL,GAAe,GAAtB;AACA,KApDO;;AAqDR,IAAA,QAAQ,GAAE;AACT,UAAI,CAAA,GAAI,EAAR;AACA,UAAI,CAAA,GAAI,EAAR;AAEA,UAAI,CAAA,GAAI,EAAR;;AACA,UAAG,KAAK,QAAL,CAAc,CAAd,KAAoB,KAAK,YAAL,IAAqB,SAA5C,EAAsD;AACrD,QAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,SAAnB,CAA6B,QAA7B,EACC,MADD,CACQ,CAAC,CAAD,EAAG,CAAH,KAAO;AACd,cAAG,CAAC,GAAC,CAAL,EAAO;AACN,YAAA,CAAC,CAAC,IAAF,CAAO,CAAC,CAAC,IAAT;AACD;AACA,SALD;AAMA,QAAA,CAAA,GAAI,CAAC,CAAC,MAAF,CAAS,CAAC,IAAE,CAAC,IAAE,KAAK,QAAL,CAAc,CAAd,CAAf,CAAJ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,CAAC,CAAC,MAAlB,EAAyB,CAAC,EAA1B,EAA6B;AAC5B,cAAG,KAAK,cAAL,IAAuB,KAA1B,EAAgC;AAC/B,YAAA,CAAC,CAAC,IAAF,CAAO;AAAC,cAAA,IAAI,EAAC,CAAC,CAAC,CAAD,CAAP;AAAW,cAAA,IAAI,EAAC,KAAK,GAAL,CAAS,CAAC,CAAC,CAAD,CAAV,EAAc,KAAK,QAAL,CAAc,CAAd,CAAd,EAA+B,KAAK,OAApC;AAAhB,aAAP;AACD,WAFA,MAGK,IAAG,KAAK,cAAL,IAAuB,YAA1B,EAAuC;AAC3C,YAAA,CAAC,CAAC,IAAF,CAAO;AAAC,cAAA,IAAI,EAAC,CAAC,CAAC,CAAD,CAAP;AAAW,cAAA,IAAI,EAAC,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAD,CAAjB,EAAqB,KAAK,QAAL,CAAc,CAAd,CAArB,EAAsC,KAAK,OAA3C;AAAhB,aAAP;AACD;AACD;;AAEA,QAAA,CAAC,CAAC,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,KAAO;AACb,iBAAO,CAAC,CAAC,IAAF,GAAS,CAAC,CAAC,IAAlB;AACA,SAFD;AAIA,QAAA,CAAA,GAAI,CAAC,CAAC,KAAF,CAAQ,CAAR,EAAU,CAAV,CAAJ;AAGD,OAxBA,MAyBK,IAAG,KAAK,QAAL,CAAc,CAAd,KAAoB,KAAK,YAAL,IAAqB,UAA5C,EAAuD;AAI3D,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,CAA2B,MAA3C,EAAkD,CAAC,EAAnD,EAAsD;AACrD,UAAA,CAAC,CAAC,IAAF,CAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,CAA2B,CAA3B,EAA8B,SAA9B,CAAwC,CAAxC,EAA0C,CAA1C,CAAP;AACD;;AACA,QAAA,CAAA,GAAI,CAAC,CAAC,MAAF,CAAS,CAAC,IAAE,CAAC,IAAE,KAAK,QAAL,CAAc,CAAd,EAAiB,SAAjB,CAA2B,CAA3B,EAA6B,CAA7B,CAAf,CAAJ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,CAAC,CAAC,MAAlB,EAAyB,CAAC,EAA1B,EAA6B;AAC5B,cAAG,KAAK,cAAL,IAAuB,KAA1B,EAAgC;AAC/B,YAAA,CAAC,CAAC,IAAF,CAAO;AAAC,cAAA,IAAI,EAAC,KAAK,SAAL,CAAe,CAAC,CAAC,CAAD,CAAhB,CAAN;AAA2B,cAAA,IAAI,EAAC,KAAK,GAAL,CAAS,CAAC,CAAC,CAAD,CAAV,EAAc,KAAK,QAAL,CAAc,CAAd,EAAiB,SAAjB,CAA2B,CAA3B,EAA6B,CAA7B,CAAd,EAA8C,KAAK,QAAnD;AAAhC,aAAP;AACD,WAFA,MAGK,IAAG,KAAK,cAAL,IAAsB,YAAzB,EAAsC;AAC1C,YAAA,CAAC,CAAC,IAAF,CAAO;AAAC,cAAA,IAAI,EAAC,KAAK,SAAL,CAAe,CAAC,CAAC,CAAD,CAAhB,CAAN;AAA2B,cAAA,IAAI,EAAC,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAD,CAAjB,EAAqB,KAAK,QAAL,CAAc,CAAd,EAAiB,SAAjB,CAA2B,CAA3B,EAA6B,CAA7B,CAArB,EAAqD,KAAK,QAA1D;AAAhC,aAAP;AACD;AAED;;AAEA,QAAA,CAAC,CAAC,IAAF,CAAO,CAAC,CAAD,EAAG,CAAH,KAAO;AACb,iBAAO,CAAC,CAAC,IAAF,GAAS,CAAC,CAAC,IAAlB;AACA,SAFD;AAGA,QAAA,CAAA,GAAI,CAAC,CAAC,KAAF,CAAQ,CAAR,EAAU,CAAV,CAAJ;AAGD;;AAGA,aAAO,CAAP;AACA,KA/GO;;AAgHR,IAAA,QAAQ,GAAE;AACT,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAzB;AACA,KAlHO;;AAmHR,IAAA,YAAY,GAAE;AACb,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,YAAzB;AACA,KArHO;;AAsHR,IAAA,QAAQ,GAAE;AACT,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,QAA9B;AACA,KAxHO;;AAyHR,IAAA,KAAK,GAAE;AACN,aAAO,KAAK,QAAL,GAAgB,GAAvB;AACA,KA3HO;;AA4HR,IAAA,QAAQ,GAAE;AACT,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,QAA9B;AACA,KA9HO;;AA+HR,IAAA,OAAO,GAAE;AACR,aAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,OAA9B;AACA,KAjIO;;AAkIR,IAAA,SAAS,GAAE;AACV,UAAI,CAAA,GAAI,EAAR;;AACA,WAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,OAAvB,CAA+B,MAA/C,EAAsD,CAAC,EAAvD,EAA0D;AACzD,YAAG,CAAC,CAAC,OAAF,CAAU,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,OAAvB,CAA+B,CAA/B,EAAkC,aAA5C,KAA4D,CAAC,CAAhE,EAAkE;AACjE,UAAA,CAAC,CAAC,IAAF,CAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,OAAvB,CAA+B,CAA/B,EAAkC,aAAzC;AACD;AACD;;AACA,aAAO,CAAP;AACD;;AA1IQ,GA3FK;AAuOd,EAAA,OAAO,EAAC;AACP,IAAA,GAAG,GAAE;AACJ,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,QAAjB;AACA,MAAA,OAAO,CAAC,GAAR,CAAY,KAAK,MAAL,CAAY,KAAZ,CAAkB,aAA9B;AACA,KAJM;;AAKP,IAAA,WAAW,GAAE;AACZ,MAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,SAAnB,CAA6B,OAA7B,EACC,MADD;AAEA,KARM;;AASP,IAAA,WAAW,CAAC,CAAD,EAAG;AACb,eAAS,OAAT,CAAiB,CAAjB,EAAmB;AACf,QAAA,CAAC,GAAC,CAAC,IAAE,MAAM,CAAC,KAAZ;AACA,eAAO;AAAE,eAAK,CAAC,CAAC,OAAT;AAAkB,eAAK,CAAC,CAAC;AAAzB,SAAP;AACD;;AACH,UAAI,EAAC,GAAI,OAAO,CAAC,KAAD,CAAhB;AACA,UAAI,SAAQ,GAAI,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,EAAqB,MAArB,GAA4B,CAA5B,IAAiC,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,EAAqB,MAArB,GAA4B,CAA7D,GAAiE,IAAI,CAAC,GAAL,CAAS,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,EAAqB,MAA9B,EAAqC,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,EAAqB,MAA1D,IAAkE,EAAlE,GAAsE,EAAvI,GAA2I,GAA3J;AACA,UAAI,IAAG,GAAI,EAAE,CAAC,MAAH,CAAU,OAAV,CAAX;AACA,UAAI,GAAE,GAAI,KAAK,cAAL,IAAuB,KAAvB,GAA8B,UAA9B,GAAyC,QAAnD;;AAEA,UAAG,EAAE,CAAC,CAAH,GAAK,CAAL,IAAU,EAAE,CAAC,CAAH,GAAO,KAAK,MAAL,GAAc,SAAlC,EAA6C;AAC5C,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,IADN,EACW,SADX,EAEC,IAFD,CAEM,OAFN,EAEc,MAFd,EAGC,IAHD,CAGM,GAHN,EAGW,EAAE,CAAC,CAAH,GAAK,EAHhB,EAIC,IAJD,CAIM,GAJN,EAIU,EAAE,CAAC,CAAH,GAAK,EAJf,EAKC,KALD,CAKO,QALP,EAKgB,EALhB,EAMC,KAND,CAMO,OANP,EAMe,SANf,EAOC,IAPD,CAOM,IAPN,EAOW,EAPX;AASA,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,IAFN,EAEW,EAAE,CAAC,CAAH,GAAK,EAFhB,EAGC,IAHD,CAGM,IAHN,EAGW,EAAE,CAAC,CAAH,GAAK,CAHhB,EAIC,IAJD,CAIM,aAJN,EAIoB,OAJpB,EAKC,IALD,CAKM,aALN,EAKqB,YALrB,EAMC,IAND,CAMM,WANN,EAMmB,MANnB,EAOC,IAPD,CAOM,aAPN,EAOqB,MAPrB,EAQC,IARD,CAQM,MARN,EAQc,SARd,EASA;AATA,SAUC,IAVD,CAUM,sBAVN;AAYA,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,IAFN,EAEW,EAAE,CAAC,CAAH,GAAK,EAFhB,EAGC,IAHD,CAGM,IAHN,EAGW,EAAE,CAAC,CAAH,GAAK,EAHhB,EAKC,IALD,CAKM,aALN,EAKoB,OALpB,EAMC,IAND,CAMM,aANN,EAMqB,YANrB,EAOC,IAPD,CAOM,WAPN,EAOmB,MAPnB,EAQC,IARD,CAQM,aARN,EAQqB,MARrB,EASC,IATD,CASM,MATN,EASc,SATd,EAUA;AAVA,SAWC,IAXD,CAWM,sBAXN;AAYA,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,IAFN,EAEW,EAAE,CAAC,CAAH,GAAK,EAFhB,EAGC,IAHD,CAGM,IAHN,EAGW,EAAE,CAAC,CAAH,GAAK,EAHhB,EAIC,IAJD,CAIM,aAJN,EAIoB,OAJpB,EAKC,IALD,CAKM,aALN,EAKqB,YALrB,EAMC,IAND,CAMM,WANN,EAMmB,MANnB,EAOC,IAPD,CAOM,aAPN,EAOqB,MAPrB,EAQC,IARD,CAQM,MARN,EAQc,OARd,EASC,IATD,CASM,GAAG,GAAC,CAAC,CAAC,IAAF,CAAO,OAAP,CAAe,CAAf,CATV;AAUD,OA5CA,MA6CK;AACH,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,IADN,EACW,SADX,EAEC,IAFD,CAEM,OAFN,EAEc,MAFd,EAGC,IAHD,CAGM,GAHN,EAGW,EAAE,CAAC,CAAH,GAAM,EAAN,GAAW,SAHtB,EAIC,IAJD,CAIM,GAJN,EAIU,EAAE,CAAC,CAAH,GAAK,EAJf,EAKC,KALD,CAKO,QALP,EAKgB,EALhB,EAMC,KAND,CAMO,OANP,EAMe,SANf,EAOC,IAPD,CAOM,IAPN,EAOW,EAPX;AASA,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,IAFN,EAEW,EAAE,CAAC,CAAH,GAAM,SAFjB,EAGC,IAHD,CAGM,IAHN,EAGW,EAAE,CAAC,CAAH,GAAK,CAHhB,EAIC,IAJD,CAIM,aAJN,EAIoB,OAJpB,EAKC,IALD,CAKM,aALN,EAKqB,YALrB,EAMC,IAND,CAMM,WANN,EAMmB,MANnB,EAOC,IAPD,CAOM,aAPN,EAOqB,MAPrB,EAQC,IARD,CAQM,MARN,EAQc,SARd,EASA;AATA,SAUC,IAVD,CAUM,sBAVN;AAWA,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,IAFN,EAEW,EAAE,CAAC,CAAH,GAAM,SAFjB,EAGC,IAHD,CAGM,IAHN,EAGW,EAAE,CAAC,CAAH,GAAK,EAHhB,EAKC,IALD,CAKM,aALN,EAKoB,OALpB,EAMC,IAND,CAMM,aANN,EAMqB,YANrB,EAOC,IAPD,CAOM,WAPN,EAOmB,MAPnB,EAQC,IARD,CAQM,aARN,EAQqB,MARrB,EASC,IATD,CASM,MATN,EASc,SATd,EAUA;AAVA,SAWC,IAXD,CAWM,sBAXN;AAYA,QAAA,IAAI,CAAC,MAAL,CAAY,MAAZ,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,IAFN,EAEW,EAAE,CAAC,CAAH,GAAM,SAFjB,EAGC,IAHD,CAGM,IAHN,EAGW,EAAE,CAAC,CAAH,GAAK,EAHhB,EAIC,IAJD,CAIM,aAJN,EAIoB,OAJpB,EAKC,IALD,CAKM,aALN,EAKqB,YALrB,EAMC,IAND,CAMM,WANN,EAMmB,MANnB,EAOC,IAPD,CAOM,aAPN,EAOqB,MAPrB,EAQC,IARD,CAQM,MARN,EAQc,OARd,EASC,IATD,CASM,GAAG,GAAC,CAAC,CAAC,IAAF,CAAO,OAAP,CAAe,CAAf,CATV;AAUD;AAGD,KA9GM;;AA+GP,IAAA,SAAS,GAAE;AACV,UAAI,IAAG,GAAI,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,MAA1B,CAAX;AACA,UAAI,eAAc,GAAI,IAAI,CAAC,MAAL,CAAY,gBAAZ,EACf,IADe,CACV,IADU,EACL,cADK,EAEf,IAFe,CAEV,IAFU,EAEL,IAFK,EAGf,IAHe,CAGV,IAHU,EAGL,IAHK,EAIf,IAJe,CAIV,IAJU,EAIL,MAJK,EAKf,IALe,CAKV,IALU,EAKL,IALK,CAAtB;AAMA,MAAA,eAAe,CAAC,MAAhB,CAAuB,MAAvB,EACK,IADL,CACU,QADV,EACmB,IADnB,EAEK,KAFL,CAEW,YAFX,EAEwB,SAFxB;AAGA,MAAA,eAAe,CAAC,MAAhB,CAAuB,MAAvB,EACK,IADL,CACU,QADV,EACmB,MADnB,EAEK,KAFL,CAEW,YAFX,EAEwB,SAFxB;AAIA,MAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,MAA1B,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,GAFN,EAEU,KAAK,MAAL,GAAY,CAFtB,EAGC,IAHD,CAGM,IAHN,EAGW,CAHX,EAIC,IAJD,CAIM,GAJN,EAIU,KAAK,OAAL,GAAa,CAAb,GAAiB,CAAjB,GAAqB,EAJ/B,EAKC,IALD,CAKM,OALN,EAKc,KAAK,MAAL,GAAY,CAAZ,GAAgB,CAL9B,EAMC,IAND,CAMM,QANN,EAMe,EANf,EAOC,KAPD,CAOO,MAPP,EAOc,UAAU,eAAe,CAAC,IAAhB,CAAqB,IAArB,CAAV,GAAuC,GAPrD;AASA,MAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,MAA1B,EACE,IADF,CACO,OADP,EACe,MADf,EAEE,IAFF,CAEO,aAFP,EAEsB,YAFtB,EAGE,KAHF,CAGQ,WAHR,EAGqB,MAHrB,EAIE,IAJF,CAIO,IAJP,EAIY,MAJZ,EAKE,IALF,CAKO,IALP,EAKY,KAAK,OAAL,GAAa,CAAb,GAAgB,EAL5B,EAME,KANF,CAMQ,aANR,EAMsB,MANtB,EAOE,IAPF,CAOO,aAPP,EAOqB,OAPrB,EAQE,IARF,CAQO,WARP;AAUA,MAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,MAA1B,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,aAFN,EAEqB,YAFrB,EAGC,KAHD,CAGO,WAHP,EAGoB,EAHpB,EAIC,IAJD,CAIM,IAJN,EAIW,KAAK,MAAL,GAAY,CAAZ,GAAe,EAJ1B,EAKC,KALD,CAKO,aALP,EAKqB,MALrB,EAMC,IAND,CAMM,IANN,EAMW,KAAK,OAAL,GAAa,CAAb,GAAiB,CAAjB,GAAqB,CANhC,EAOC,IAPD,CAOM,CAPN;AASA,MAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,MAAnB,CAA0B,MAA1B,EACC,IADD,CACM,OADN,EACc,MADd,EAEC,IAFD,CAEM,aAFN,EAEqB,YAFrB,EAGC,KAHD,CAGO,WAHP,EAGoB,EAHpB,EAIC,KAJD,CAIO,aAJP,EAIqB,MAJrB,EAKC,IALD,CAKM,IALN,EAKW,KAAK,MAAL,GAAY,CAAZ,GAAiB,KAAK,MAAL,GAAY,CAAZ,GAAe,CAAhC,GAAmC,CAL9C,EAMC,IAND,CAMM,IANN,EAMW,KAAK,OAAL,GAAa,CAAb,GAAiB,CAAjB,GAAqB,CANhC,EAOC,IAPD,CAOM,CAPN;AASA,MAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,SAAnB,CAA6B,OAA7B,EACC,KADD,CACO,SADP,EACiB,MADjB;AAGA,KAtKM;;AAuKP,IAAA,UAAU,GAAE;AACX,UAAG,KAAK,cAAL,IAAqB,KAAxB,EAA8B;AAC7B,aAAK,cAAL,GAAoB,YAApB;AACA,aAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,UAAA,IAAI,EAAC,WADa;AAElB,UAAA,IAAI,EAAC,OAFa;AAGlB,UAAA,KAAK,EAAC,KAAK,MAHO;AAIlB,UAAA,MAAM,EAAC,KAAK,OAJM;AAKlB,UAAA,GAAG,EAAC,yBALc;AAMlB,UAAA,IAAI,EAAC,KAAK,QAAL,CAAc,CAAd,CANa;AAOlB,UAAA,KAAK,EAAC,YAPY;AAQlB,UAAA,IAAI,EAAC,iCAAiC,KAAK,QAAL,CAAc,CAAd,CAAjC,GAAoD,aARvC;AASlB,UAAA,UAAU,EAAC,EATO;AAUb,UAAA,IAAI,EAAC;AACH,YAAA,QAAQ,EAAC,EADN;AAEH,YAAA,OAAO,EAAC,KAAK,YAAL,IAAqB,SAArB,GAA+B,CAAC,KAAK,QAAL,CAAc,CAAd,CAAD,CAA/B,GAAkD,EAFvD;AAGH,YAAA,QAAQ,EAAC,KAAK,YAAL,IAAqB,UAArB,GAAgC,CAAC,KAAK,QAAL,CAAc,CAAd,CAAD,CAAhC,GAAmD,EAHzD;AAIH,YAAA,SAAS,EAAC;AAJP;AAVQ,SAAnB;AAiBA,aAAK,MAAL,CAAY,MAAZ,CAAmB,kBAAnB;AACD,OApBA,MAqBK,IAAG,KAAK,cAAL,IAAqB,YAAxB,EAAqC;AACzC,aAAK,cAAL,GAAoB,KAApB;AACA,aAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,UAAA,IAAI,EAAC,WADa;AAElB,UAAA,IAAI,EAAC,OAFa;AAGlB,UAAA,KAAK,EAAC,KAAK,MAHO;AAIlB,UAAA,MAAM,EAAC,KAAK,OAJM;AAKlB,UAAA,GAAG,EAAC,yBALc;AAMlB,UAAA,IAAI,EAAC,KAAK,QAAL,CAAc,CAAd,CANa;AAOlB,UAAA,KAAK,EAAC,YAPY;AAQlB,UAAA,IAAI,EAAC,4BAA4B,KAAK,QAAL,CAAc,CAAd,CAA5B,GAA+C,aARlC;AASb,UAAA,IAAI,EAAC;AACH,YAAA,QAAQ,EAAC,EADN;AAEH,YAAA,OAAO,EAAC,KAAK,YAAL,IAAqB,SAArB,GAA+B,CAAC,KAAK,QAAL,CAAc,CAAd,CAAD,CAA/B,GAAkD,EAFvD;AAGH,YAAA,QAAQ,EAAC,KAAK,YAAL,IAAqB,UAArB,GAAgC,CAAC,KAAK,QAAL,CAAc,CAAd,CAAD,CAAhC,GAAmD,EAHzD;AAIH,YAAA,SAAS,EAAC;AAJP;AATQ,SAAnB;AAgBA,aAAK,MAAL,CAAY,MAAZ,CAAmB,kBAAnB;AACD;;AACA,WAAK,SAAL;AACA,KAlNM;;AAmNP,IAAA,SAAS,CAAC,IAAD,EAAM;AACd,WAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,CAA2B,MAA3C,EAAkD,CAAC,EAAnD,EAAsD;AACrD,YAAI,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,CAA2B,CAA3B,EAA8B,SAA9B,CAAwC,CAAxC,EAA0C,CAA1C,KAAgD,IAAI,CAAC,SAAL,CAAe,CAAf,EAAiB,CAAjB,CAApD,EAAwE;AACvE,iBAAO,KAAK,MAAL,CAAY,KAAZ,CAAkB,QAAlB,CAA2B,CAA3B,CAAP;AACD;AACD;AACA,KAzNM;;AA0NP,IAAA,SAAS,GAAE;AACV,UAAI,SAAQ,GAAI,EAAE,CAAC,KAAH,CAAS,UAAT,EAAhB;AACA,UAAI,SAAQ,GAAI,EAAE,CAAC,KAAH,CAAS,MAAT,GAAkB,MAAlB,CAAyB,CAAC,KAAK,QAAL,CAAc,KAAK,QAAL,CAAc,MAAd,GAAqB,CAAnC,EAAsC,IAAvC,EAA4C,KAAK,QAAL,CAAc,CAAd,EAAiB,IAA7D,CAAzB,EAA6F,KAA7F,CAAmG,CAAC,EAAD,EAAI,KAAK,MAAL,GAAY,CAAhB,CAAnG,CAAhB;AACA,UAAI,EAAC,GAAI,EAAT;AAAA,UAAY,EAAC,GAAI,CAAjB;AACA,UAAI,GAAE,GAAI,EAAE,CAAC,MAAH,CAAU,OAAV,CAAV;AAEA,MAAA,GAAG,CAAC,SAAJ,CAAc,MAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,KAFD,GAGC,MAHD,CAGQ,MAHR,EAIC,IAJD,CAIM,OAJN,EAIc,MAJd,EAKC,IALD,CAKM,QALN,EAKe,EALf,EAMC,IAND,CAMM,OANN,EAMc,CANd,EAOC,EAPD,CAOI,WAPJ,EAOgB,YAAU;AACzB,QAAA,EAAE,CAAC,MAAH,CAAU,IAAV,EACC,IADD,CACM,cADN,EACqB,CADrB,EAEC,IAFD,CAEM,QAFN,EAEe,KAFf;AAGA,OAXD,EAYC,EAZD,CAYI,UAZJ,EAYe,YAAU;AACxB,QAAA,EAAE,CAAC,MAAH,CAAU,IAAV,EACC,IADD,CACM,cADN,EACqB,CADrB;AAGA,OAhBD,EAiBC,EAjBD,CAiBI,OAjBJ,EAiBa,CAAD,IAAK;AAChB,aAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,UAAA,IAAI,EAAC,gBADa;AAElB,UAAA,IAAI,EAAC,CAAC,CAAC,IAFW;AAGlB,UAAA,YAAY,EAAC,KAAK;AAHA,SAAnB;AAMA,aAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,UAAA,IAAI,EAAC,WADa;AAElB,UAAA,IAAI,EAAC,OAFa;AAGlB,UAAA,KAAK,EAAC,KAAK,MAHO;AAIlB,UAAA,MAAM,EAAC,KAAK,OAJM;AAKlB,UAAA,GAAG,EAAC,KAAK,YAAL,IAAqB,SAArB,GAAgC,gBAAhC,GAAiD,iBALnC;AAMlB,UAAA,IAAI,EAAC,KAAK,QAAL,CAAc,CAAd,IAAmB,IAAnB,GAA0B,CAAC,CAAC,IANf;AAOlB,UAAA,KAAK,EAAC,CAAC,CAAC,IAPU;AAQlB,UAAA,IAAI,EAAC,SAAS,KAAK,cAAd,GAA+B,WAA/B,GAA6C,KAAK,QAAL,CAAc,CAAd,CAA7C,GAAgE,OAAhE,GAA2E,CAAC,CAAC,IAA7E,GAAoF,MAApF,GAA6F,CAAC,CAAC,IARlF;AASb,UAAA,IAAI,EAAC;AACH,YAAA,QAAQ,EAAC,EADN;AAEH,YAAA,OAAO,EAAC,KAAK,YAAL,IAAqB,SAArB,GAA+B,CAAC,KAAK,QAAL,CAAc,CAAd,CAAD,EAAkB,CAAC,CAAC,IAApB,CAA/B,GAAyD,EAF9D;AAGH,YAAA,QAAQ,EAAC,KAAK,YAAL,IAAqB,UAArB,GAAgC,CAAC,KAAK,QAAL,CAAc,CAAd,CAAD,EAAkB,CAAC,CAAC,IAApB,CAAhC,GAA0D,EAHhE;AAIH,YAAA,SAAS,EAAC;AAJP;AATQ,SAAnB;AAgBA,aAAK,MAAL,CAAY,MAAZ,CAAmB,kBAAnB;AACA,OAzCD;AA4CA,MAAA,GAAG,CAAC,SAAJ,CAAc,MAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,IAFD,CAEM,IAFN,EAEW,CAFX,EAGC,KAHD,CAGO,MAHP,EAGc,CAAC,CAAD,EAAG,CAAH,KAAO,SAAS,CAAC,CAAD,CAH9B,EAIC,IAJD,CAIM,GAJN,EAIU,KAAK,MAAL,GAAY,CAJtB,EAKC,IALD,CAKM,GALN,EAKU,CAAC,CAAD,EAAG,CAAH,KAAQ,KAAK,CAAA,IAAK,EAAE,GAAC,EAAR,CAAL,GAAkB,EALpC,EAMC,UAND,GAOC,KAPD,CAOO,CAAC,CAAD,EAAG,CAAH,KAAQ,CAAA,GAAI,GAPnB,EASC,IATD,CASM,OATN,EASc,CAAC,IAAE,SAAS,CAAC,CAAC,CAAC,IAAH,CAT1B;AAWA,MAAA,GAAG,CAAC,SAAJ,CAAc,MAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,IAFD,GAGC,MAHD;AAOA,MAAA,GAAG,CAAC,SAAJ,CAAc,QAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,KAFD,GAGC,MAHD,CAGQ,MAHR,EAIC,IAJD,CAIM,aAJN,EAIqB,YAJrB,EAKC,IALD,CAKM,aALN,EAKqB,MALrB,EAMC,IAND,CAMM,OANN,EAMc,OANd,EAOC,IAPD,CAOM,WAPN,EAOmB,CAPnB;AASA,MAAA,GAAG,CAAC,SAAJ,CAAc,QAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,IAFD,CAEM,IAFN,EAEW,KAAK,MAAL,GAAY,CAAZ,GAAgB,EAF3B,EAGC,IAHD,CAGM,IAHN,EAGW,CAAC,CAAD,EAAG,CAAH,KAAQ,KAAK,CAAA,IAAK,EAAE,GAAC,EAAR,CAHxB,EAIC,IAJD,CAIM,aAJN,EAIoB,KAJpB,EAKC,IALD,CAKM,MALN,EAKa,OALb,EAMC,UAND,GAOC,KAPD,CAOO,CAAC,CAAD,EAAG,CAAH,KAAQ,CAAA,GAAI,GAPnB,EAQC,IARD,CAQM,WARN,EAQmB,EARnB,EASC,IATD,CASM,CAAC,IAAE,CAAC,CAAC,IATX;AAWA,MAAA,GAAG,CAAC,SAAJ,CAAc,QAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,IAFD,GAGC,MAHD;AAKA,MAAA,GAAG,CAAC,SAAJ,CAAc,QAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,KAFD,GAGC,MAHD,CAGQ,MAHR,EAIC,IAJD,CAIM,aAJN,EAIqB,YAJrB,EAKC,IALD,CAKM,aALN,EAKqB,MALrB,EAMC,KAND,CAMO,MANP,EAMc,OANd,EAOC,IAPD,CAOM,OAPN,EAOc,OAPd,EAQC,IARD,CAQM,WARN,EAQmB,CARnB;AAUA,MAAA,GAAG,CAAC,SAAJ,CAAc,QAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,UAFD,GAGC,KAHD,CAGO,CAAC,CAAD,EAAG,CAAH,KAAQ,CAAA,GAAI,GAHnB,EAIC,IAJD,CAIM,WAJN,EAImB,EAJnB,EAKC,IALD,CAKM,IALN,EAKW,CAAC,IAAE,SAAS,CAAC,CAAC,CAAC,IAAH,CAAT,GAAoB,KAAK,MAAL,GAAY,CAAhC,GAAmC,CALjD,EAMC,IAND,CAMM,IANN,EAMW,CAAC,CAAD,EAAG,CAAH,KAAQ,KAAK,CAAA,IAAK,EAAE,GAAC,EAAR,CANxB,EAOC,IAPD,CAOM,CAAC,IAAE,CAAC,CAAC,IAAF,CAAO,OAAP,CAAe,CAAf,CAPT;AAUA,MAAA,GAAG,CAAC,SAAJ,CAAc,QAAd,EACC,IADD,CACM,KAAK,QADX,EAEC,IAFD,GAGC,MAHD;AAIA,KA/UM;;AAgVP,IAAA,GAAG,CAAC,CAAD,EAAG,CAAH,EAAK,OAAL,EAAa;AACf,UAAG,CAAC,IAAE,CAAN,EAAQ;AACP,eAAO,CAAP;AACD,OAFA,MAGK,IAAG,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IAApB,IAA4B,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IAAhD,IAAsD,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IAA1E,IACN,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IADd,IACqB,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IADzC,IACgD,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IADvE,EAC4E;AAChF,eAAO,CAAP;AACD,OAHK,MAMD;AACH,YAAI,KAAI,GAAI,CAAZ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,SAAL,CAAe,MAA/B,EAAsC,CAAC,EAAvC,EAA0C;AACzC,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,KAAsC,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,CAAzC,EAA4E;AAC3E,YAAA,KAAI,IAAK,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,IAAqC,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,CAA9C;AACD;AACD;;AAEA,YAAI,KAAI,GAAI,CAAZ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,SAAL,CAAe,MAA/B,EAAsC,CAAC,EAAvC,EAA0C;AACzC,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,CAAH,EAAsC;AACrC,YAAA,KAAI,IAAK,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,IAAqC,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,CAA9C;AACD;AACD;;AAEA,YAAI,KAAI,GAAI,CAAZ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,SAAL,CAAe,MAA/B,EAAsC,CAAC,EAAvC,EAA0C;AACzC,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,CAAH,EAAsC;AACrC,YAAA,KAAI,IAAK,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,IAAqC,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,KAAK,SAAL,CAAe,CAAf,CAAhB,CAA9C;AACD;AACD;;AAEA,YAAI,OAAM,GAAI,KAAK,GAAC,IAAI,CAAC,IAAL,CAAU,KAAI,GAAI,KAAlB,CAApB;AAEA,eAAO,OAAP;AACD;AAEA,KArXM;;AAsXP,IAAA,UAAU,CAAC,CAAD,EAAG,CAAH,EAAK,OAAL,EAAa;AACtB,UAAG,CAAA,IAAK,CAAR,EAAU;AACT,eAAO,CAAP;AACD,OAFA,MAGK,IAAG,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IAApB,IAA4B,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IAAhD,IAAsD,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IAA1E,IACN,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IADd,IACqB,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IADzC,IACgD,CAAC,CAAC,SAAF,CAAY,CAAZ,EAAc,CAAd,KAAoB,IADvE,EAC4E;AAChF,eAAO,CAAP;AACD,OAHK,MAID;AACH,YAAI,IAAG,GAAI,EAAX;;AACA,aAAK,IAAI,GAAT,IAAgB,OAAO,CAAC,IAAR,CAAa,CAAb,CAAhB,EAAgC;AAC/B;AACA,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,cAAhB,CAA+B,GAA/B,CAAH,EAAuC;AACtC,YAAA,IAAI,CAAC,IAAL,CAAU,GAAV;AACD;AACD;;AACA,aAAK,IAAI,GAAT,IAAgB,OAAO,CAAC,IAAR,CAAa,CAAb,CAAhB,EAAgC;AAC/B;AACA,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,cAAhB,CAA+B,GAA/B,KAAuC,IAAI,CAAC,OAAL,CAAa,GAAb,KAAqB,CAAC,CAAhE,EAAkE;AACjE,YAAA,IAAI,CAAC,IAAL,CAAU,GAAV;AACD;AACD;;AACA,YAAI,KAAI,GAAI,CAAZ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,IAAI,CAAC,MAArB,EAA4B,CAAC,EAA7B,EAAgC;AAC/B,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,KAA4B,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,CAA/B,EAAwD;AACvD,YAAA,KAAI,IAAK,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,IAA2B,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,CAApC;AACD;AACD;;AAEA,YAAI,KAAI,GAAI,CAAZ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,IAAI,CAAC,MAArB,EAA4B,CAAC,EAA7B,EAAgC;AAC/B,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,CAAH,EAA4B;AAC3B,YAAA,KAAI,IAAK,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,IAA2B,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,CAApC;AACD;AACD;;AAEA,YAAI,KAAI,GAAI,CAAZ;;AACA,aAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,IAAI,CAAC,MAArB,EAA4B,CAAC,EAA7B,EAAgC;AAC/B,cAAG,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,CAAH,EAA4B;AAC3B,YAAA,KAAI,IAAK,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,IAA2B,OAAO,CAAC,IAAR,CAAa,CAAb,EAAgB,IAAI,CAAC,CAAD,CAApB,CAApC;AACD;AACD;;AACA,YAAI,OAAM,GAAI,KAAK,GAAC,IAAI,CAAC,IAAL,CAAU,KAAI,GAAI,KAAlB,CAApB;AAEA,eAAO,IAAI,OAAX;AACD;AAEA,KAraM;;AAsaP,IAAA,YAAY,GAAE;AACb,UAAI,EAAC,GAAI,CAAT;AAAA,UAAW,EAAC,GAAI,KAAK,UAAL,CAAgB,MAAhB,IAA0B,CAA1B,GAA6B,CAA7B,GAA+B,CAAC,KAAK,MAAL,GAAY,CAAZ,GAAgB,CAAC,KAAK,UAAL,CAAgB,MAAhB,GAAuB,CAAxB,IAA4B,EAA7C,IAAiD,KAAK,UAAL,CAAgB,MAAhH;AACA,UAAI,YAAW,GAAI,EAAE,CAAC,KAAH,CAAS,MAAT,GAAkB,MAAlB,CAAyB,CAAC,CAAD,EAAG,CAAH,CAAzB,EAAgC,KAAhC,CAAsC,CAAC,SAAD,EAAW,SAAX,CAAtC,CAAnB;AACA,MAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,WADX,EAEC,KAFD,GAGC,MAHD,CAGQ,MAHR,EAIC,IAJD,CAIM,MAJN,EAIa,OAJb,EAKC,IALD,CAKM,QALN,EAKe,CALf,EAMC,IAND,CAMM,OANN,EAMc,CANd;AAQA,MAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,WADX,EAGC,EAHD,CAGI,WAHJ,EAGiB,CAAD,IAAK;AACpB,QAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,UADX,EAEC,MAFD,CAEQ,IAAI,IAAE,IAAG,IAAK,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAFtB,EAGC,KAHD,CAGO,MAHP,EAGc,SAHd;AAKA,QAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,UADX,EAEC,MAFD,CAEQ,IAAI,IAAE,IAAG,IAAK,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAFtB,EAGC,KAHD,CAGO,MAHP,EAGc,SAHd;AAKA,QAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,WADX,EAEC,MAFD,CAEQ,IAAI,IAAE,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAAZ,IAAiB,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAA7B,IAAkC,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAAZ,IAAiB,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAF7E,EAGC,KAHD,CAGO,MAHP,EAGc,KAHd,EAXoB,CAepB;;AACA,aAAK,WAAL,CAAiB,CAAjB;;AACA,YAAG,CAAC,CAAC,CAAF,IAAK,CAAC,CAAC,CAAV,EAAY;AACX,eAAK,MAAL,CAAY,MAAZ,CAAmB;AACnB,YAAA,IAAI,EAAC;AADc,WAAnB;AAGD;AAEA,OA1BD,EA2BC,EA3BD,CA2BI,WA3BJ,EA2BiB,CAAD,IAAK;AAEpB,aAAK,WAAL;AACA,aAAK,WAAL,CAAiB,CAAjB;AACA,OA/BD,EAgCC,EAhCD,CAgCI,UAhCJ,EAgCgB,CAAD,IAAK;AACnB,QAAA,UAAU,CACT,MAAI;AACH,eAAK,WAAL;AACA,SAHQ,EAGP,IAHO,CAAV;AAMA,QAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,UADX,EAEC,MAFD,CAEQ,IAAI,IAAE,IAAG,IAAK,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAAR,IAAgC,IAAG,IAAK,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAFtD,EAGC,KAHD,CAGO,MAHP,EAGc,OAHd;AAKA,QAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,WADX,EAEC,MAFD,CAEQ,IAAI,IAAE,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAAZ,IAAiB,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAA7B,IAAkC,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAAZ,IAAiB,IAAI,CAAC,CAAL,IAAU,CAAC,CAAC,CAF7E,EAGC,KAHD,CAGO,MAHP,EAGc,IAAI,IAAE,YAAY,CAAC,IAAI,CAAC,IAAN,CAHhC;AAIA,YAAI,IAAG,GAAI,KAAK,cAAL,IAAuB,KAAvB,GAA6B,YAA7B,GAA0C,YAArD;;AACA,YAAG,CAAC,CAAC,CAAF,IAAO,CAAC,CAAC,CAAZ,EAAc;AACb,eAAK,MAAL,CAAY,MAAZ,CAAmB;AACnB,YAAA,IAAI,EAAC,cADc;AAEnB,YAAA,GAAG,EAAC,MAFe;AAGnB,YAAA,IAAI,EAAC,OAHc;AAInB,YAAA,KAAK,EAAC,KAAK,MAJQ;AAKnB,YAAA,MAAM,EAAC,KAAK,OALO;AAMnB,YAAA,GAAG,EAAC,cANe;AAOnB,YAAA,IAAI,EAAC,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,IAAsB,MAAtB,GAA6B,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAPf;AAQnB,YAAA,KAAK,EAAC,CAAC,CAAC,IARW;AASnB,YAAA,IAAI,EAAC,SAAS,IAAT,GAAgB,WAAhB,GAA8B,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAA9B,GAAqD,OAArD,GAAgE,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAAhE,GAAuF,MAAvF,GAAgG,CAAC,CAAC,IAAF,CAAO,OAAP,CAAe,CAAf,CATlF;AAUd,YAAA,IAAI,EAAC;AACH,cAAA,QAAQ,EAAC,EADN;AAEH,cAAA,OAAO,EAAC,KAAK,YAAL,IAAqB,SAArB,GAA+B,CAAC,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAAD,EAAsB,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAAtB,CAA/B,GAA2E,EAFhF;AAGH,cAAA,QAAQ,EAAC,KAAK,YAAL,IAAqB,UAArB,GAAgC,CAAC,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAAD,EAAsB,KAAK,UAAL,CAAgB,CAAC,CAAC,CAAlB,CAAtB,CAAhC,GAA4E,EAHlF;AAIH,cAAA,SAAS,EAAC,KAAK,cAAL,IAAuB,KAAvB,GAA6B,YAA7B,GAA0C;AAJjD;AAVS,WAAnB;AAiBD,eAAK,MAAL,CAAY,MAAZ,CAAmB,gBAAnB;AACA;AAEA,OAtED,EAuEC,UAvED,GAwEC,IAxED,CAwEM,GAxEN,EAwEU,CAAC,IAAE,CAAC,KAAK,MAAL,GAAc,KAAK,UAAL,CAAgB,MAAhB,GAAyB,EAAvC,GAA4C,EAAC,IAAI,KAAK,UAAL,CAAgB,MAAhB,GAAuB,CAA3B,CAA9C,IAA6E,CAA7E,GAAiF,CAAC,CAAC,CAAF,IAAO,EAAC,GAAI,EAAZ,CAAjF,GAAmG,KAAK,MAAL,GAAY,CAxE5H,EAyEC,IAzED,CAyEM,GAzEN,EAyEU,CAAC,IAAE,CAAC,KAAK,OAAL,GAAe,KAAK,UAAL,CAAgB,MAAhB,GAAyB,EAAxC,GAA6C,EAAC,IAAI,KAAK,UAAL,CAAgB,MAAhB,GAAuB,CAA3B,CAA/C,IAA8E,CAA9E,GAAkF,CAAC,CAAC,CAAF,IAAO,EAAC,GAAI,EAAZ,CAAlF,GAAmG,KAAK,OAAL,GAAa,CAzE7H,EA0EC,IA1ED,CA0EM,QA1EN,EA0Ee,EA1Ef,EA2EC,IA3ED,CA2EM,OA3EN,EA2Ec,EA3Ed,EA4EC,IA5ED,CA4EM,IA5EN,EA4EW,EAAE,GAAC,CA5Ed,EA6EC,KA7ED,CA6EO,MA7EP,EA6Ec,CAAC,IAAE,YAAY,CAAC,CAAC,CAAC,IAAH,CA7E7B;AAgFA,MAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,WADX,EAEC,IAFD,GAGC,MAHD;AAKA,MAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,UADX,EAEC,KAFD,GAGC,MAHD,CAGQ,MAHR,EAIC,IAJD,CAIM,aAJN,EAIqB,YAJrB,EAKC,KALD,CAKO,WALP,EAKoB,EALpB,EAMC,IAND,CAMM,aANN,EAMoB,KANpB;AAQA,MAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,UADX,EAEC,UAFD,GAGC,IAHD,CAGM,IAHN,EAGW,CAAC,KAAK,MAAL,GAAc,KAAK,UAAL,CAAgB,MAAhB,GAAyB,EAAvC,GAA4C,EAAC,IAAI,KAAK,UAAL,CAAgB,MAAhB,GAAuB,CAA3B,CAA9C,IAA6E,CAA7E,GAAgF,KAAK,MAAL,GAAY,CAA5F,GAA8F,CAHzG,EAIC,IAJD,CAIM,IAJN,EAIW,CAAC,CAAD,EAAG,CAAH,KAAO,CAAC,KAAK,OAAL,GAAe,KAAK,UAAL,CAAgB,MAAhB,GAAyB,EAAxC,GAA6C,EAAC,IAAI,KAAK,UAAL,CAAgB,MAAhB,GAAuB,CAA3B,CAA/C,IAA8E,CAA9E,GAAiF,CAAC,IAAG,EAAC,GAAI,EAAR,CAAlF,GAA8F,KAAK,OAAL,GAAa,CAA3G,GAA+G,EAAC,GAAG,CAAnH,GAAsH,CAJxI,EAKC,IALD,CAKM,CAAC,IAAE,CALT;AAOA,MAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EACC,IADD,CACM,KAAK,UADX,EAEC,IAFD,GAGC,MAHD;AAID;;AAzhBO,GAvOM;AAkwBd,EAAA,KAAK,EAAC;AACL,IAAA,KAAK,GAAE;AACN,UAAG,KAAK,QAAL,CAAc,CAAd,CAAH,EAAoB;AACnB,QAAA,EAAE,CAAC,MAAH,CAAU,YAAV,EACC,IADD,CACM,KAAK,QAAL,CAAc,CAAd,IAAiB,MADvB;AAGD,OAJA,MAKI;AACH,QAAA,EAAE,CAAC,MAAH,CAAU,YAAV,EACC,IADD,CACM,EADN;AAGA,QAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EAAwC,MAAxC;AACA,QAAA,EAAE,CAAC,MAAH,CAAU,UAAV,EAAsB,SAAtB,CAAgC,MAAhC,EAAwC,MAAxC;AACD;AACA,KAdI;;AAeL,IAAA,WAAW,GAAE;AACZ,WAAK,YAAL;AACA,KAjBI;;AAkBL,IAAA,cAAc,CAAC,GAAD,EAAK;AAClB,WAAK,YAAL;;AACA,UAAG,GAAE,IAAK,KAAV,EAAgB;AACf,QAAA,EAAE,CAAC,MAAH,CAAU,YAAV,EACC,IADD,CACM,KAAK,QAAL,CAAc,CAAd,IAAiB,MADvB;AAED,OAHA,MAIK,IAAG,GAAE,IAAI,YAAT,EAAsB;AAC1B,QAAA,EAAE,CAAC,MAAH,CAAU,YAAV,EACC,IADD,CACM,KAAK,QAAL,CAAc,CAAd,IAAiB,MADvB;AAED;AACA,KA5BI;;AA6BL,IAAA,SAAS,GAAE;AACV,UAAG,KAAK,SAAR,EAAkB;AACjB,aAAK,SAAL;AACA,QAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,SAAnB,CAA6B,OAA7B,EACC,KADD,CACO,SADP,EACiB,QADjB;AAEA,QAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,KAAnB,CAAyB,SAAzB,EAAmC,QAAnC;;AAEA,YAAG,KAAK,YAAL,IAAmB,SAAtB,EAAgC;AAC/B,eAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,QAAL,CAAc,MAA9B,EAAqC,CAAC,EAAtC,EAAyC;AAExC,iBAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,cAAA,IAAG,EAAI,qBADW;AAElB,cAAA,OAAM,EAAI,KAAK,QAAL,CAAc,CAAd,EAAiB;AAFT,aAAnB;AAID;AACD,SARA,MASI;AACH,eAAI,IAAI,CAAA,GAAI,CAAZ,EAAc,CAAC,GAAC,KAAK,QAAL,CAAc,MAA9B,EAAqC,CAAC,EAAtC,EAAyC;AAExC,iBAAK,MAAL,CAAY,MAAZ,CAAmB;AAClB,cAAA,IAAG,EAAI,qBADW;AAElB,cAAA,OAAM,EAAI,KAAK,QAAL,CAAc,CAAd,EAAiB;AAFT,aAAnB;AAID;AACD;AAED,OAzBA,MA0BI;AACH,QAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,SAAnB,CAA6B,MAA7B,EAAqC,MAArC;AACA,QAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,SAAnB,CAA6B,MAA7B,EAAqC,MAArC;AACA,QAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,SAAnB,CAA6B,OAA7B,EACC,KADD,CACO,SADP,EACiB,MADjB;AAEA,QAAA,EAAE,CAAC,MAAH,CAAU,OAAV,EAAmB,KAAnB,CAAyB,SAAzB,EAAmC,MAAnC;AAED;AAED;;AAjEK;AAlwBQ,CAAf","sourcesContent":["<template>\n\t\n  <svg id = \"svgF\" @click = 'log()'>\n\t\t<!-- <text id = 'tx' dx = 20 dy = 50>{{treeTypeFlag}}</text> -->\n\t\t<rect\n\tx = 0\n\t:y = 'heightF - 50'\n\theight = 50\n\twidth = 60\n\tfill = 'orange'>\n\t</rect>\n\t<text\n\tdx = 30\n\t:dy = 'heightF - 17'\n\ttext-anchor = 'middle'\n\tfill = 'white'\n\tfont-size = 25\n\tfont-weight = 'bold'\n\t>E\n\t</text>\n\t</svg>\n\n</template>\n\n<script>\nimport * as d3 from \"d3\"\n\nimport axios from 'axios'\n\nexport default {\n\tname: 'componentF',\n\tdata(){\n\t\treturn {\n\t\t\theightF:this.$store.state.height * 0.6,\n\t\t\twidthF:this.$store.state.width * 0.3,\n\t\t\thovered:'',\n\t\t\tnodesLength:0,\n\t\t\tcomparisonMode:'sim',\n\t\t\ttipFlag:false,\n\t\t\t//matrixData:['上海市','北京市','广东省','浙江省'],\n\t\t\t//matrixData:['清华大学','北京大学','复旦大学','上海交通大学']\n\t\t\t\n\t\t\t\n\t\t}\n\t},\n\tmounted(){\n\t\t\n\t\td3.select(\"#tx\").attr(\"dy\",20)\n\t\tthis.$store.commit({\n\t\t\ttype :\"appendLine\",\n\t\t\tid :'lineF',\n\t\t\tsvg :'svgF',\n\t\t\twidth:this.widthF,\n\t\t\theight:this.heightF * 1 / 3 -20,\n\t\t\tcolor: 'mediumseagreen',\n\t\t\tstroke:1\n\t\t});\n\t\t\n\t\tthis.$store.commit({\n\t\t\ttype:'appendTitle',\n\t\t\tid:'FbarTitle',\n\t\t\tclass:'classF',\n\t\t\tsvg:'svgF',\n\t\t\tdx:'24px',\n\t\t\tdy:'36px',\n\t\t\tsize:'14px'\n\t\t\t\n\t\t});\n\t\td3.select(\"#svgF\")\n\t\t.attr(\"width\",this.widthF)\n\t\t.attr(\"height\",this.heightF);\n\t\t\n\t\t\n\t\taxios.get('province_pat_pro.json')\n\t\t.then(response=>{\n\t\t\t////console.log(response\t)\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'FprovincePro',\n\t\t\t\tprovjson:response\n\t\t\t})\n\t\t});\n\t\t\n\t\taxios.get('comp_pat_pro.json')\n\t\t.then(response=>{\n\t\t\tthis.$store.commit({\n\t\t\t\ttype:'FcompanyPro',\n\t\t\t\tprojson:response\n\t\t\t})\n\t\t})\n\t\t\n\t\taxios.get('supply_chain(1).csv')\n\t\t.then(response=>{\n\t\t\tlet a = d3.csv.parse(response.data);\n\t\t\tthis.$store.commit({\n\t\t\t\ttype :\"FindData\",\n\t\t\t\tvalue :a\n\t\t\t});\n\t\t})\n\t\t\n\t\td3.select(\"#svgF\").append(\"g\").attr(\"id\",'Fbar');\n\t\td3.select(\"#svgF\").append(\"g\").attr(\"id\",\"Fmatrix\");\n\t\tthis.$store.commit({\n\t\t\ttype:'appendBtn',\n\t\t\tsvgID:'svgF',\n\t\t\tbtnID:'Fbtn',\n\t\t\twidth:this.widthF,\n\t\t\ttext:'switch'\n\t\t})\n\t\t\n\t\td3.select(\"#Fbtn\")\n\t\t.on(\"click\",()=>{\n\t\t\tthis.modeChange();\n\t\t})\n\t\t.style(\"display\",'none')\n\t\t\n\t\tthis.appendLgd()\n\t\t\n\t\t\n\t\t\n\t},\n\tcomputed:{\n\t\tmatrixData(){\n\t\t\tlet sol = []\n\t\t\tfor(let i = 0;i<this.treeData.length;i++){\n\t\t\t\tsol.push(this.treeData[i])\n\t\t\t}\n\t\t\tfor(let i = 0;i<this.$store.state.matrixElement.length;i++){\n\t\t\t\tif(this.treeData.indexOf(this.$store.state.matrixElement[i]) == -1){\n\t\t\t\t\tsol.push(this.$store.state.matrixElement[i])\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\treturn sol\n\t\t},\n\t\tmatrixData3(){\n\t\t\treturn this.matrixData2 +'1'\n\t\t},\n\t\tmatrixData2(){\n\t\t\tlet tmp = [];\n\t\t\tif(this.treeTypeFlag == 'company'){\n\t\t\t\tfor(let i = 0;i<this.matrixData.length;i++){\n\t\t\t\t\tfor(let j = 0;j<this.matrixData.length;j++){\n\t\t\t\t\t\tif(this.comparisonMode == 'sim'){\n\t\t\t\t\t\t\ttmp.push({x:i,y:j,rate:this.sim(this.matrixData[i],this.matrixData[j],this.projson)})\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.comparisonMode == 'complement'){\n\t\t\t\t\t\t\ttmp.push({x:i,y:j,rate:this.complement(this.matrixData[i],this.matrixData[j],this.projson)})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(this.treeTypeFlag =='province'){\n\t\t\t\tfor(let i = 0;i<this.matrixData.length;i++){\n\t\t\t\t\tfor(let j = 0;j<this.matrixData.length;j++){\n\t\t\t\t\t\tif(this.comparisonMode == 'sim'){\n\t\t\t\t\t\t\ttmp.push({x:i,y:j,rate:this.sim(this.matrixData[i].substring(0,2),this.matrixData[j].substring(0,2),this.provjson)})\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(this.comparisonMode == 'complement'){\n\t\t\t\t\t\t\ttmp.push({x:i,y:j,rate:this.complement(this.matrixData[i].substring(0,2),this.matrixData[j].substring(0,2),this.provjson)})\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn tmp\n\t\t},\n\t\ttreeData1(){\n\t\t\treturn this.treeData[0]? this.treeData[0]:''\n\t\t},\n\t\tbar_data1(){\n\t\t\treturn this.bar_data +'1'\n\t\t},\n\t\tbar_data(){\n\t\t\tlet a = [];\n\t\t\tlet b = [];\n\t\t\t\n\t\t\tlet c = [];\n\t\t\tif(this.treeData[0] && this.treeTypeFlag == 'company'){\n\t\t\t\td3.select(\"#svgD\").selectAll(\"circle\")\n\t\t\t\t.filter((d,i)=>{\n\t\t\t\t\tif(i>0){\n\t\t\t\t\t\ta.push(d.name);\n\t\t\t\t\t}\n\t\t\t\t}) \n\t\t\t\ta = a.filter(d=>d!=this.treeData[0])\n\t\t\t\tfor(let i = 0;i<a.length;i++){\n\t\t\t\t\tif(this.comparisonMode == 'sim'){\n\t\t\t\t\t\tb.push({name:a[i],rate:this.sim(a[i],this.treeData[0],this.projson)})\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.comparisonMode == 'complement'){\n\t\t\t\t\t\tb.push({name:a[i],rate:this.complement(a[i],this.treeData[0],this.projson)})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tb.sort((a,b)=>{\n\t\t\t\t\treturn b.rate - a.rate\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tc = b.slice(0,5);\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\telse if(this.treeData[0] && this.treeTypeFlag == 'province'){\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tfor(let i = 0;i<this.$store.state.province.length;i++){\n\t\t\t\t\ta.push(this.$store.state.province[i].substring(0,2))\n\t\t\t\t}\n\t\t\t\ta = a.filter(d=>d!=this.treeData[0].substring(0,2));\n\t\t\t\tfor(let i = 0;i<a.length;i++){\n\t\t\t\t\tif(this.comparisonMode == 'sim'){\n\t\t\t\t\t\tb.push({name:this.transform(a[i]),rate:this.sim(a[i],this.treeData[0].substring(0,2),this.provjson)})\n\t\t\t\t\t}\n\t\t\t\t\telse if(this.comparisonMode =='complement'){\n\t\t\t\t\t\tb.push({name:this.transform(a[i]),rate:this.complement(a[i],this.treeData[0].substring(0,2),this.provjson)})\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tb.sort((a,b)=>{\n\t\t\t\t\treturn b.rate - a.rate\n\t\t\t\t})\n\t\t\t\tc = b.slice(0,5);\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\treturn c\n\t\t},\n\t\tprovince(){\n\t\t\treturn this.$store.state.province\n\t\t},\n\t\ttreeTypeFlag(){\n\t\t\treturn this.$store.state.treeTypeFlag\n\t\t},\n\t\ttreeData(){\n\t\t\treturn this.$store.state.objB.treeData\n\t\t},\n\t\ttreeD(){\n\t\t\treturn this.treeData + '1'\n\t\t},\n\t\tprovjson(){\n\t\t\treturn this.$store.state.objF.provjson\n\t\t},\n\t\tprojson(){\n\t\t\treturn this.$store.state.objF.projson\n\t\t},\n\t\tF_indData(){\n\t\t\tlet k = [];\n\t\t\tfor(let i = 0;i<this.$store.state.objF.indData.length;i++){\n\t\t\t\tif(k.indexOf(this.$store.state.objF.indData[i].industry_name)==-1){\n\t\t\t\t\tk.push(this.$store.state.objF.indData[i].industry_name)\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn k\n\t\t}\n\t},\n\tmethods:{\n\t\tlog(){\n\t\t\tconsole.log(this.treeData)\n\t\t\tconsole.log(this.$store.state.matrixElement)\n\t\t},\n\t\tF_TipRemove(){\n\t\t\td3.select(\"#svgF\").selectAll(\".tips\")\n\t\t\t.remove()\n\t\t},\n\t\tF_createTip(d){\n\t\t\tfunction mouseXY(e){\n\t\t\t\t\t\t\te=e||window.event;\n\t\t\t\t\t\t\treturn { \"x\": e.offsetX, \"y\": e.offsetY };\n\t\t\t\t\t\t}\n\t\t\tlet XY = mouseXY(event);\n\t\t\tlet tempWidth = this.matrixData[d.x].length>8 || this.matrixData[d.y].length>8?  Math.max(this.matrixData[d.x].length,this.matrixData[d.y].length)*15 +10 :160\n\t\t\tlet svgF = d3.select(\"#svgF\")\n\t\t\tlet txt = this.comparisonMode == 'sim'? '结构相似性系数:':'互补性系数:'\n\t\t\t\n\t\t\tif(XY.x>0 && XY.x < this.widthF - tempWidth ){\n\t\t\t\tsvgF.append(\"rect\")\n\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"x\", XY.x+10)\n\t\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t\t.style(\"height\",80)\n\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\n\t\t\t\tsvgF.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"#e34b00\")\n\t\t\t\t//.text(this.matrixData[d.y])\n\t\t\t\t.text('company/province ***')\n\t\t\t\t\n\t\t\t\tsvgF.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t\t\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"#9eea74\")\n\t\t\t\t//.text(this.matrixData[d.x]) ;\n\t\t\t\t.text('company/province ***')\n\t\t\t\tsvgF.append(\"text\")\n\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t.attr(\"dx\",XY.x+20)\n\t\t\t\t.attr(\"dy\",XY.y+35)\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t.text(txt+d.rate.toFixed(3))\n\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsvgF.append(\"rect\")\n\t\t\t\t\t.attr(\"id\",\"tipBack\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"x\", XY.x- 10 - tempWidth)\n\t\t\t\t\t.attr(\"y\",XY.y-30)\n\t\t\t\t\t.style(\"height\",80)\n\t\t\t\t\t.style(\"width\",tempWidth)\n\t\t\t\t\t.attr(\"rx\",20);\n\t\t\t\t\t\n\t\t\t\t\tsvgF.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",XY.x- tempWidth)\n\t\t\t\t\t.attr(\"dy\",XY.y-5)\n\t\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"fill\", \"#e34b00\")\n\t\t\t\t\t//.text(this.matrixData[d.y])\n\t\t\t\t\t.text('company/province ***')\n\t\t\t\t\tsvgF.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",XY.x- tempWidth)\n\t\t\t\t\t.attr(\"dy\",XY.y+15)\n\t\t\t\t\t\n\t\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"fill\", \"#9eea74\")\n\t\t\t\t\t//.text(this.matrixData[d.x]) ;\n\t\t\t\t\t.text('company/province ***')\n\t\t\t\t\tsvgF.append(\"text\")\n\t\t\t\t\t.attr(\"class\",\"tips\")\n\t\t\t\t\t.attr(\"dx\",XY.x- tempWidth)\n\t\t\t\t\t.attr(\"dy\",XY.y+35)\n\t\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t\t.attr(\"font-size\", \"14px\")\n\t\t\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t\t\t.attr(\"fill\", \"white\")\n\t\t\t\t\t.text(txt+d.rate.toFixed(3))\n\t\t\t\t}\n\t\t\n\t\t\n\t\t},\n\t\tappendLgd(){\n\t\t\tlet defs = d3.select(\"#svgF\").append(\"defs\");\n\t\t\tlet linearGradient2 = defs.append(\"linearGradient\")\n\t\t\t\t\t\t\t\t\t.attr(\"id\",\"linearColor2\")\n\t\t\t\t\t\t\t\t\t.attr(\"x1\",\"0%\")\n\t\t\t\t\t\t\t\t\t.attr(\"y1\",\"0%\")\n\t\t\t\t\t\t\t\t\t.attr(\"x2\",\"100%\")\n\t\t\t\t\t\t\t\t\t.attr(\"y2\",\"0%\");\n\t\t\tlinearGradient2.append(\"stop\")\n\t\t\t\t\t\t\t.attr(\"offset\",\"0%\")\n\t\t\t\t\t\t\t.style(\"stop-color\",\"#c1e8ca\");\n\t\t\tlinearGradient2.append(\"stop\")\n\t\t\t\t\t\t\t.attr(\"offset\",\"100%\")\n\t\t\t\t\t\t\t.style(\"stop-color\",\"#48784f\");\n\t\t\t\t\t\t\t\n\t\t\td3.select(\"#svgF\").append(\"rect\")\t\t\t\t\n\t\t\t.attr(\"class\",\"lgd1\")\n\t\t\t.attr(\"x\",this.widthF/5)\n\t\t\t.attr(\"rx\",6)\n\t\t\t.attr(\"y\",this.heightF/5 * 2 - 10)\n\t\t\t.attr(\"width\",this.widthF/5 * 3 )\n\t\t\t.attr(\"height\",12)\n\t\t\t.style(\"fill\",\"url(#\" + linearGradient2.attr(\"id\") + \")\");\t\n\t\t\t\t\t\n\t\t\td3.select(\"#svgF\").append(\"text\")\n\t\t\t\t.attr(\"class\",\"lgd1\")\n\t\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t\t.style(\"font-size\", \"20px\")\n\t\t\t\t.attr(\"dx\",\"24px\")\n\t\t\t\t.attr(\"dy\",this.heightF/3 +10)\n\t\t\t\t.style(\"font-weight\",\"bold\")\n\t\t\t\t.attr(\"text-anchor\",\"start\")\n\t\t\t\t.text(\"结构相似性系数矩阵\")\n\t\t\t\t\n\t\t\td3.select(\"#svgF\").append(\"text\")\n\t\t\t.attr(\"class\",\"lgd1\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.style(\"font-size\", 15)\n\t\t\t.attr(\"dx\",this.widthF/5 -15)\n\t\t\t.style(\"font-weight\",\"bold\")\n\t\t\t.attr(\"dy\",this.heightF/5 * 2 + 5 )\n\t\t\t.text(0);\n\t\t\t\n\t\t\td3.select(\"#svgF\").append(\"text\")\n\t\t\t.attr(\"class\",\"lgd1\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.style(\"font-size\", 15)\n\t\t\t.style(\"font-weight\",\"bold\")\n\t\t\t.attr(\"dx\",this.widthF/5  + this.widthF/5 *3 +5 )\n\t\t\t.attr(\"dy\",this.heightF/5 * 2 + 5 )\n\t\t\t.text(1)\n\t\t\t\t\t\t\n\t\t\td3.select(\"#svgF\").selectAll(\".lgd1\")\n\t\t\t.style(\"display\",'none')\n\t\t\t\n\t\t},\n\t\tmodeChange(){\n\t\t\tif(this.comparisonMode=='sim'){\n\t\t\t\tthis.comparisonMode='complement'\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewF',\n\t\t\t\t\twidth:this.widthF,\n\t\t\t\t\theight:this.heightF,\n\t\t\t\t\tobj:'switch(comparison mode)',\n\t\t\t\t\tname:this.treeData[0],\n\t\t\t\t\tvalue:'complement',\n\t\t\t\t\tdesc:'show the complementarity of ' + this.treeData[0] + ' and others',\n\t\t\t\t\tvisualKeys:{},\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[this.treeData[0]]:[],\n            province:this.treeTypeFlag == 'province'?[this.treeData[0]]:[],\n            attribute:'complement'\n          }\n\t\t\t\t})\n\t\t\t\tthis.$store.commit('ClickRecordState')\n\t\t\t}\n\t\t\telse if(this.comparisonMode=='complement'){\n\t\t\t\tthis.comparisonMode='sim'\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewF',\n\t\t\t\t\twidth:this.widthF,\n\t\t\t\t\theight:this.heightF,\n\t\t\t\t\tobj:'switch(comparison mode)',\n\t\t\t\t\tname:this.treeData[0],\n\t\t\t\t\tvalue:'similarity',\n\t\t\t\t\tdesc:'show the similarity of ' + this.treeData[0] + ' and others',\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[this.treeData[0]]:[],\n            province:this.treeTypeFlag == 'province'?[this.treeData[0]]:[],\n            attribute:'similarity'\n          }\n\t\t\t\t})\n\t\t\t\tthis.$store.commit('ClickRecordState')\n\t\t\t}\n\t\t\tthis.updateBar()\n\t\t},\n\t\ttransform(name){\n\t\t\tfor(let i = 0;i<this.$store.state.province.length;i++){\n\t\t\t\tif (this.$store.state.province[i].substring(0,2) == name.substring(0,2)){\n\t\t\t\t\treturn this.$store.state.province[i]\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tupdateBar(){\n\t\t\tlet bar_color = d3.scale.category20();\n\t\t\tlet bar_scale = d3.scale.linear().domain([this.bar_data[this.bar_data.length-1].rate,this.bar_data[0].rate]).range([70,this.widthF/3]);\n\t\t\tlet pd = 10,wd = 8;\n\t\t\tlet bar = d3.select(\"#Fbar\")\n\t\t\t\n\t\t\tbar.selectAll('rect')\n\t\t\t.data(this.bar_data)\n\t\t\t.enter()\n\t\t\t.append(\"rect\")\n\t\t\t.attr(\"class\",\"bar1\")\n\t\t\t.attr(\"height\",wd)\n\t\t\t.attr(\"width\",0)\n\t\t\t.on(\"mouseover\",function(){\n\t\t\t\td3.select(this)\n\t\t\t\t.attr(\"stroke-width\",1)\n\t\t\t\t.attr(\"stroke\",'red')\n\t\t\t})\n\t\t\t.on(\"mouseout\",function(){\n\t\t\t\td3.select(this)\n\t\t\t\t.attr(\"stroke-width\",0)\n\t\t\t\t\n\t\t\t})\n\t\t\t.on(\"click\",(d)=>{\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'updateTreeData',\n\t\t\t\t\tname:d.name,\n\t\t\t\t\ttreeTypeFlag:this.treeTypeFlag\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userClick',\n\t\t\t\t\tview:'viewF',\n\t\t\t\t\twidth:this.widthF,\n\t\t\t\t\theight:this.heightF,\n\t\t\t\t\tobj:this.treeTypeFlag == 'company'? 'select company':'select province',\n\t\t\t\t\tname:this.treeData[0] + 'vs' + d.name,\n\t\t\t\t\tvalue:d.rate,\n\t\t\t\t\tdesc:'the ' + this.comparisonMode + ' rate of ' + this.treeData[0] + ' and ' +  d.name + ' is ' + d.rate,\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[this.treeData[0],d.name]:[],\n            province:this.treeTypeFlag == 'province'?[this.treeData[0],d.name]:[],\n            attribute:'comparison'\n          }\n\t\t\t\t})\n\t\t\t\tthis.$store.commit('ClickRecordState')\n\t\t\t})\n\t\t\t\n\t\t\t\n\t\t\tbar.selectAll(\"rect\")\n\t\t\t.data(this.bar_data)\n\t\t\t.attr(\"rx\",5)\n\t\t\t.style(\"fill\",(d,i)=>bar_color(i))\n\t\t\t.attr(\"x\",this.widthF/2)\n\t\t\t.attr(\"y\",(d,i)=> 60 + i * (pd+wd) -10)\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t\n\t\t\t.attr(\"width\",d=>bar_scale(d.rate));\n\t\t\t\n\t\t\tbar.selectAll(\"rect\")\n\t\t\t.data(this.bar_data)\n\t\t\t.exit()\n\t\t\t.remove()\n\t\t\t\n\t\t\t\n\t\t\t\n\t\t\tbar.selectAll(\".text1\")\n\t\t\t.data(this.bar_data)\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.attr(\"class\",\"text1\")\n\t\t\t.attr(\"font-size\", 0)\n\t\t\t\n\t\t\tbar.selectAll(\".text1\")\n\t\t\t.data(this.bar_data)\n\t\t\t.attr(\"dx\",this.widthF/2 - 10)\n\t\t\t.attr(\"dy\",(d,i)=> 60 + i * (pd+wd) )\n\t\t\t.attr(\"text-anchor\",\"end\")\n\t\t\t.attr(\"fill\",\"black\")\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t.attr(\"font-size\", 10)\n\t\t\t.text(d=>d.name);\n\t\t\t\n\t\t\tbar.selectAll(\".text1\")\n\t\t\t.data(this.bar_data)\n\t\t\t.exit()\n\t\t\t.remove();\n\t\t\t\n\t\t\tbar.selectAll(\".text2\")\n\t\t\t.data(this.bar_data)\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.attr(\"font-weight\", \"bold\")\n\t\t\t.style(\"fill\",'black')\n\t\t\t.attr(\"class\",\"text2\")\n\t\t\t.attr(\"font-size\", 0)\n\t\t\t\n\t\t\tbar.selectAll(\".text2\")\n\t\t\t.data(this.bar_data)\n\t\t\t.transition()\n\t\t\t.delay((d,i)=> i * 200)\n\t\t\t.attr(\"font-size\", 12)\n\t\t\t.attr(\"dx\",d=>bar_scale(d.rate) + this.widthF/2 +5)\n\t\t\t.attr(\"dy\",(d,i)=> 60 + i * (pd+wd) )\n\t\t\t.text(d=>d.rate.toFixed(3))\n\t\t\t\n\t\t\t\n\t\t\tbar.selectAll(\".text2\")\n\t\t\t.data(this.bar_data)\n\t\t\t.exit()\n\t\t\t.remove();\n\t\t},\n\t\tsim(x,y,dataset){\n\t\t\tif(x==y){\n\t\t\t\treturn 1\n\t\t\t}\n\t\t\telse if(x.substring(0,2) == \"台湾\" || x.substring(0,2) == \"香港\"||x.substring(0,2) == \"澳门\"\n\t\t\t||y.substring(0,2) == \"台湾\" ||y.substring(0,2) == \"香港\" ||y.substring(0,2) == \"澳门\"){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\telse{\n\t\t\t\tlet sumXY = 0;\n\t\t\t\tfor(let i = 0;i<this.F_indData.length;i++){\n\t\t\t\t\tif(dataset.data[x][this.F_indData[i]] && dataset.data[y][this.F_indData[i]]){\n\t\t\t\t\t\tsumXY += dataset.data[x][this.F_indData[i]] * dataset.data[y][this.F_indData[i]]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet sumXS = 0;\n\t\t\t\tfor(let i = 0;i<this.F_indData.length;i++){\n\t\t\t\t\tif(dataset.data[x][this.F_indData[i]]){\n\t\t\t\t\t\tsumXS += dataset.data[x][this.F_indData[i]] * dataset.data[x][this.F_indData[i]] \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet sumYS = 0;\n\t\t\t\tfor(let i = 0;i<this.F_indData.length;i++){\n\t\t\t\t\tif(dataset.data[y][this.F_indData[i]]){\n\t\t\t\t\t\tsumYS += dataset.data[y][this.F_indData[i]] * dataset.data[y][this.F_indData[i]] \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet simRate = sumXY/Math.sqrt(sumXS * sumYS)\n\t\t\t\t\t\n\t\t\t\treturn simRate;\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tcomplement(x,y,dataset){\n\t\t\tif(x == y){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse if(x.substring(0,2) == \"台湾\" || x.substring(0,2) == \"香港\"||x.substring(0,2) == \"澳门\"\n\t\t\t||y.substring(0,2) == \"台湾\" ||y.substring(0,2) == \"香港\" ||y.substring(0,2) == \"澳门\"){\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlet keys = [];\n\t\t\t\tfor( let key in dataset.data[x]){\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tif(dataset.data[x].hasOwnProperty(key)){\n\t\t\t\t\t\tkeys.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor( let key in dataset.data[y]){\n\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\tif(dataset.data[y].hasOwnProperty(key) && keys.indexOf(key) == -1){\n\t\t\t\t\t\tkeys.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet sumXY = 0;\n\t\t\t\tfor(let i = 0;i<keys.length;i++){\n\t\t\t\t\tif(dataset.data[x][keys[i]] && dataset.data[y][keys[i]]){\n\t\t\t\t\t\tsumXY += dataset.data[x][keys[i]] * dataset.data[y][keys[i]]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet sumXS = 0;\n\t\t\t\tfor(let i = 0;i<keys.length;i++){\n\t\t\t\t\tif(dataset.data[x][keys[i]]){\n\t\t\t\t\t\tsumXS += dataset.data[x][keys[i]] * dataset.data[x][keys[i]] \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet sumYS = 0;\n\t\t\t\tfor(let i = 0;i<keys.length;i++){\n\t\t\t\t\tif(dataset.data[y][keys[i]]){\n\t\t\t\t\t\tsumYS += dataset.data[y][keys[i]] * dataset.data[y][keys[i]] \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet simRate = sumXY/Math.sqrt(sumXS * sumYS)\n\t\t\t\t\n\t\t\t\treturn 1 - simRate;\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tmatrixUpdate(){\n\t\t\tlet pd = 2,wd = this.matrixData.length == 0? 0:(this.widthF/2 - (this.matrixData.length-1) *pd)/this.matrixData.length;\n\t\t\tlet matrix_color = d3.scale.linear().domain([0,1]).range([\"#c1e8ca\",\"#48784f\"]);\n\t\t\td3.select(\"#Fmatrix\").selectAll(\"rect\")\n\t\t\t.data(this.matrixData2)\n\t\t\t.enter()\n\t\t\t.append(\"rect\")\n\t\t\t.attr(\"fill\",'white')\n\t\t\t.attr(\"height\",0)\n\t\t\t.attr(\"width\",0)\n\t\t\t\n\t\t\td3.select(\"#Fmatrix\").selectAll(\"rect\")\n\t\t\t.data(this.matrixData2)\n\t\t\t\n\t\t\t.on(\"mouseover\",(d)=>{\n\t\t\t\td3.select(\"#Fmatrix\").selectAll(\"text\")\n\t\t\t\t.data(this.matrixData)\n\t\t\t\t.filter(data=>data == this.matrixData[d.y] )\n\t\t\t\t.style(\"fill\",\"#e34b00\");\n\t\t\t\t\n\t\t\t\td3.select(\"#Fmatrix\").selectAll(\"text\")\n\t\t\t\t.data(this.matrixData)\n\t\t\t\t.filter(data=>data == this.matrixData[d.x] )\n\t\t\t\t.style(\"fill\",\"#9eea74\");\n\t\t\t\t\n\t\t\t\td3.select(\"#Fmatrix\").selectAll(\"rect\")\n\t\t\t\t.data(this.matrixData2)\n\t\t\t\t.filter(data=>data.x == d.x && data.y == d.y || data.x == d.y && data.y == d.x)\n\t\t\t\t.style(\"fill\",\"red\");\n\t\t\t\t//this.F_TipRemove()\n\t\t\t\tthis.F_createTip(d)\n\t\t\t\tif(d.x!=d.y){\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseover'\n\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.on(\"mousemove\",(d)=>{\n\t\t\t\t\n\t\t\t\tthis.F_TipRemove();\n\t\t\t\tthis.F_createTip(d)\n\t\t\t})\n\t\t\t.on(\"mouseout\",(d)=>{\n\t\t\t\tsetTimeout(\n\t\t\t\t\t()=>{\n\t\t\t\t\t\tthis.F_TipRemove();\n\t\t\t\t\t},1500\n\t\t\t\t)\n\t\t\t\t\n\t\t\t\td3.select(\"#Fmatrix\").selectAll(\"text\")\n\t\t\t\t.data(this.matrixData)\n\t\t\t\t.filter(data=>data == this.matrixData[d.x] || data == this.matrixData[d.y])\n\t\t\t\t.style(\"fill\",\"black\");\n\t\t\t\t\n\t\t\t\td3.select(\"#Fmatrix\").selectAll(\"rect\")\n\t\t\t\t.data(this.matrixData2)\n\t\t\t\t.filter(data=>data.x == d.x && data.y == d.y || data.x == d.y && data.y == d.x)\n\t\t\t\t.style(\"fill\",data=>matrix_color(data.rate))\n\t\t\t\tlet type = this.comparisonMode == 'sim'?'similarity':'complement'\n\t\t\t\tif(d.x != d.y){\n\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\ttype:'userMouseout',\n\t\t\t\t\tdif:'fast',\n\t\t\t\t\tview:'viewF',\n\t\t\t\t\twidth:this.widthF,\n\t\t\t\t\theight:this.heightF,\n\t\t\t\t\tobj:'tips(matrix)',\n\t\t\t\t\tname:this.matrixData[d.x] +' vs '+this.matrixData[d.y],\n\t\t\t\t\tvalue:d.rate,\n\t\t\t\t\tdesc:'the ' + type + ' rate of ' + this.matrixData[d.x] + ' and ' +  this.matrixData[d.y] + ' is ' + d.rate.toFixed(3),\n          data:{\n            industry:'',\n            company:this.treeTypeFlag == 'company'?[this.matrixData[d.x],this.matrixData[d.y]]:[],\n            province:this.treeTypeFlag == 'province'?[this.matrixData[d.x],this.matrixData[d.y]]:[],\n            attribute:this.comparisonMode == 'sim'?'similarity':'complement'\n          }\n\t\t\t\t})\n\t\t\t\tthis.$store.commit('OutRecordState')\n\t\t\t\t}\n\t\t\t\t\n\t\t\t})\n\t\t\t.transition()\n\t\t\t.attr(\"x\",d=>(this.widthF - this.matrixData.length * wd - pd *(this.matrixData.length-1))/2 + d.x * (wd + pd) + this.widthF/6)\n\t\t\t.attr(\"y\",d=>(this.heightF - this.matrixData.length * wd - pd *(this.matrixData.length-1))/2 + d.y * (wd + pd) +this.heightF/5)\n\t\t\t.attr(\"height\",wd)\n\t\t\t.attr(\"width\",wd)\n\t\t\t.attr(\"rx\",wd/5)\n\t\t\t.style(\"fill\",d=>matrix_color(d.rate))\n\t\t\t\n\t\t\t\n\t\t\td3.select(\"#Fmatrix\").selectAll(\"rect\")\n\t\t\t.data(this.matrixData2)\n\t\t\t.exit()\n\t\t\t.remove()\n\t\t\t\n\t\t\td3.select(\"#Fmatrix\").selectAll(\"text\")\n\t\t\t.data(this.matrixData)\n\t\t\t.enter()\n\t\t\t.append(\"text\")\n\t\t\t.attr(\"font-family\", \"sans-serif\")\n\t\t\t.style(\"font-size\", 10)\n\t\t\t.attr(\"text-anchor\",\"end\")\n\t\t\t\n\t\t\td3.select(\"#Fmatrix\").selectAll(\"text\")\n\t\t\t.data(this.matrixData)\n\t\t\t.transition()\n\t\t\t.attr(\"dx\",(this.widthF - this.matrixData.length * wd - pd *(this.matrixData.length-1))/2+ this.widthF/6-5)\n\t\t\t.attr(\"dy\",(d,i)=>(this.heightF - this.matrixData.length * wd - pd *(this.matrixData.length-1))/2 +i* (wd + pd)+this.heightF/5 + wd /2 +3)\n\t\t\t.text(d=>d)\n\t\t\t\n\t\t\td3.select(\"#Fmatrix\").selectAll(\"text\")\n\t\t\t.data(this.matrixData)\n\t\t\t.exit()\n\t\t\t.remove()\n\t\t}\n\t},\n\twatch:{\n\t\ttreeD(){\n\t\t\tif(this.treeData[0]){\n\t\t\t\td3.select(\"#FbarTitle\")\n\t\t\t\t.text(this.treeData[0]+'竞争排序')\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#FbarTitle\")\n\t\t\t\t.text('')\n\t\t\t\t\n\t\t\t\td3.select(\"#Fmatrix\").selectAll(\"rect\").remove()\n\t\t\t\td3.select(\"#Fmatrix\").selectAll(\"text\").remove()\n\t\t\t}\n\t\t},\n\t\tmatrixData3(){\n\t\t\tthis.matrixUpdate()\n\t\t},\n\t\tcomparisonMode(val){\n\t\t\tthis.matrixUpdate()\n\t\t\tif(val == 'sim'){\n\t\t\t\td3.select(\"#FbarTitle\")\n\t\t\t\t.text(this.treeData[0]+'竞争排序')\n\t\t\t}\n\t\t\telse if(val =='complement'){\n\t\t\t\td3.select(\"#FbarTitle\")\n\t\t\t\t.text(this.treeData[0]+'互补排序')\n\t\t\t}\n\t\t},\n\t\ttreeData1(){\n\t\t\tif(this.treeData1){\n\t\t\t\tthis.updateBar();\n\t\t\t\td3.select(\"#svgF\").selectAll(\".lgd1\")\n\t\t\t\t.style(\"display\",'inline')\n\t\t\t\td3.select(\"#Fbtn\").style(\"display\",'inline')\n\t\t\t\t\n\t\t\t\tif(this.treeTypeFlag=='company'){\n\t\t\t\t\tfor(let i = 0;i<this.bar_data.length;i++){\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype : 'changeMatrixElement',\n\t\t\t\t\t\t\telement : this.bar_data[i].name\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tfor(let i = 0;i<this.bar_data.length;i++){\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.$store.commit({\n\t\t\t\t\t\t\ttype : 'changeMatrixElement',\n\t\t\t\t\t\t\telement : this.bar_data[i].name\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\td3.select(\"#Fbar\").selectAll(\"rect\").remove();\n\t\t\t\td3.select(\"#Fbar\").selectAll(\"text\").remove();\n\t\t\t\td3.select(\"#svgF\").selectAll(\".lgd1\")\n\t\t\t\t.style(\"display\",'none')\n\t\t\t\td3.select(\"#Fbtn\").style(\"display\",'none')\n\t\t\t\t\n\t\t\t}\n\t\t\t\n\t\t}\n\t},\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\n\nh3 {\n  margin: 40px 0 0;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}