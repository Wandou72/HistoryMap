(function(){"use strict";var t={226:function(t,e,a){var s=a(963),i=a(252);function r(t,e,a,s,r,l){const n=(0,i.up)("componentA");return(0,i.wg)(),(0,i.j4)(n)}(0,i.dD)("data-v-6c188985");const l=["y"],n=["dy"];function o(t,e,a,s,r,o){return(0,i.wg)(),(0,i.iD)("svg",{id:"svgA",onClick:e[0]||(e[0]=t=>o.log())},[(0,i._)("rect",{x:"0",y:r.heightA-50,height:"50",width:"60",fill:"orange"},null,8,l),(0,i._)("text",{dx:"30",dy:r.heightA-17,"text-anchor":"middle",fill:"white","font-size":"25","font-weight":"bold"},"A ",8,n)])}(0,i.Cn)();var h=a(78),c=a(669),d=a.n(c),p={name:"componentA",data(){return{heightA:.5*this.$store.state.height,widthA:.3*this.$store.state.width,hovered:"",selected:"",leaf:!1,bar_title:"",panel:!1,removeFlag:!1,timeOut:null}},mounted(){this.$store.commit({type:"changeSvg",svg:"svgA",width:this.widthA,height:this.heightA}),this.$store.commit({type:"appendBtn",svgID:"svgA",btnID:"Abtn",width:this.widthA,text:"show"}),h.select("#Abtn").on("click",(()=>{this.$store.commit("showGraph")})),d().get("data.csv").then((t=>{let e=h.csv.parse(t.data);this.$store.commit({type:"changeGlobal",key:"geo",value:e});let a=this.wholeTree(this.$store.state.geo);this.$store.commit({type:"changeGlobal",key:"data_overall",value:a})})).then((()=>{const t=JSON.parse(JSON.stringify(this.dataToFlare(this.$store.state.data_overall)));this.$store.commit({type:"changeGlobal",key:"flare",value:t})})).then((()=>{this.createSun(this.$store.state.flare)})),this.$store.commit({type:"appendLine",id:"lineA",svg:"svgA",width:this.widthA,height:2*this.heightA/3-20,color:"mediumseagreen",stroke:1}),this.$store.commit({type:"appendTitle",id:"AbarTitle",svg:"svgA",dx:"24px",dy:16+2*this.heightA/3,size:14})},computed:{statesSelected(){return this.$store.state.selected},userData(){return this.$store.state.user.actionList},global(){return this.$store.state.geo},treeData(){return this.$store.state.objB.treeData},treeDataLength(){return this.treeData.length},treeDataIndex2(){return this.treeData[1]?this.treeData[1]:void 0},rootName(){return this.$store.state.objB.rootName},depth(){return this.$store.state.objB.depth},flare(){return this.$store.state.flare},visualStates(){return this.$store.state.visualStates}},methods:{log(){console.log("selected",this.selected),console.log("visualStates",this.$store.state.visualStates.Aselected),console.log("visualList",this.$store.state.visualList),console.log("actionList",this.$store.state.user.actionList)},shot(t){this.$store.commit({type:"getImg",id:t})},A_createTip(t,e,a,s,i){function r(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}arguments.length<3&&(a="black"),arguments.length<4&&(s=.7),arguments.length<5&&(i=t.patent_num);let l=r(event);h.select("#"+e).append("rect").attr("id","tipBack").attr("class","tips").attr("fill",a).style("opacity",s).attr("x",l.x+10).attr("y",l.y-30).style("width",t.name.length>10?15*t.name.length+10:140).attr("rx",20),h.select("#"+e).append("text").attr("class","tips").attr("dx",l.x+20).attr("dy",l.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(t.name),h.select("#"+e).append("text").attr("class","tips").attr("dx",l.x+20).attr("dy",l.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+i)},A_TipRemove(t){h.select("#"+t).selectAll(".tips").remove()},tip_appendText(t,e,a,s,i){arguments.length<5&&(i="white"),h.select("#"+a).append("text").attr("class","tips").attr("dx",t).attr("dy",e).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill",i).text(s)},panel_createTip(t){function e(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}let a=e(event),s=t.name.length>10?15*t.name.length+10:140;a.x>.7*this.$store.state.width&&(a.x-=s+50),h.select("#panel").append("rect").attr("id","tipBack").attr("class","tips").style("height",100).attr("fill","#000000").style("opacity",1).attr("x",a.x+10).attr("y",a.y-30).style("width",s).attr("rx",20),this.tip_appendText(a.x+20,a.y-5,"panel",t.name),this.tip_appendText(a.x+20,a.y+15,"panel","view:Svg"+t.view.substring(t.view.length-1,t.view.length)),this.tip_appendText(a.x+20,a.y+35,"panel","action:"+t.obj),this.tip_appendText(a.x+20,a.y+55,"panel","data:"+t.data)},createBar(t){let e=h.layout.tree().size([300,300]),a=e.nodes(t);a=a.filter((t=>!t.children)),a.sort(((t,e)=>e.patent_num-t.patent_num));let s=[];if(a.length<=5)s=a;else for(let h=0;h<5;h++)s.push(a[h]);let i=s,r=h.scale.category20(),l=h.scale.linear().domain([i[i.length-1].patent_num,i[0].patent_num]).range([40,this.widthA/3]),n=8,o=8;h.select("#svgA").selectAll(".bar1").data(i).enter().append("rect").attr("class","bar1").attr("rx",5).style("fill",((t,e)=>r(e))).attr("x",this.widthA/2).attr("y",((t,e)=>40+e*(n+o)+2*this.heightA/3-14)).attr("height",0).attr("width",0).on("mouseover",(t=>{h.select("#svgA").selectAll("path").filter((e=>e.name==t.name)).style("fill","#ff0000"),this.$store.commit({type:"userMouseover"})})).on("mouseout",(t=>{h.select("#svgA").selectAll("path").filter((t=>t.name!=this.selected)).style("fill","#fcf6db"),h.select("#svgA").selectAll("path").filter((t=>t.name==this.selected)).style("fill","#06ddf4"),this.$store.commit({type:"userMouseout",view:"viewA",obj:"tips(industry)",name:t.name,value:t.patent_num,height:this.heightA,width:this.widthA,desc:"hover industry"+t.name,data:{industry:t.name,company:[],province:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})),h.select("#svgA").selectAll(".bar1").data(i).attr("width",0).style("fill",((t,e)=>r(e))).transition().delay(((t,e)=>200*e)).attr("height",o).attr("width",(t=>l(t.patent_num))),h.select("#svgA").selectAll(".bar1").data(i).exit().remove(),h.select("#svgA").selectAll(".barText1").data(i).enter().append("text").attr("font-family","sans-serif").attr("font-weight","bold").attr("class","barText1").attr("dx",this.widthA/2-10).attr("dy",((t,e)=>40+e*(n+o)+10+2*this.heightA/3-14)).attr("text-anchor","end").text((t=>t.name)).attr("fill","black").attr("font-size","0px").transition().delay(((t,e)=>200*e)).attr("font-size","12px"),h.select("#svgA").selectAll(".barText1").data(i).text((t=>t.name)).attr("font-size","0px").transition().delay(((t,e)=>200*e)).attr("font-size","12px"),h.select("#svgA").selectAll(".barText1").data(i).exit().remove(),h.select("#svgA").selectAll(".barTextTag1").data(i).enter().append("text").attr("font-family","sans-serif").attr("font-weight","bold").attr("class","barTextTag1").attr("dx",(t=>l(t.patent_num)+this.widthA/2+5)).attr("dy",((t,e)=>40+e*(n+o)+10+2*this.heightA/3-14)).text((t=>t.patent_num)).attr("font-size","0px").transition().delay(((t,e)=>200*e)).attr("font-size","12px"),h.select("#svgA").selectAll(".barTextTag1").data(i).text((t=>t.patent_num)).attr("font-size","0px").attr("dx",(t=>l(t.patent_num)+this.widthA/2+5)).transition().delay(((t,e)=>200*e)).attr("font-size","12px"),h.select("#svgA").selectAll(".barTextTag1").data(i).exit().remove()},wholeTree(t){let e=[],a=["id","name1","name2","name3","name4","name5","name6","name7","name8","comp_name","patent_num","province"];for(let s=0;s<t.length;s++){let i=new Object;for(let e=0;e<a.length;e++)i[a[e]]=t[s][a[e]];e.push(i),"OLED"==e[s].name2&&"制造工艺"==e[s].name3&&(e[s].name3="OLED制造工艺"),"OLED"==e[s].name2&&"制造设备"==e[s].name3&&(e[s].name3="OLED制造设备"),"TFT-LCD"==e[s].name2&&"制造工艺"==e[s].name3&&(e[s].name3="TFT-LCD制造工艺"),"TFT-LCD"==e[s].name2&&"制造设备"==e[s].name3&&(e[s].name3="TFT-LCD制造设备"),"电致发光体(EL)"==e[s].name7&&"电致发光体(EL)"==e[s].name6&&(e[s].name7="电致发光体(EL)(2)")}return e},createSun(t){const e=h.layout.partition().value((function(t){return t.patent_num+7e3})),a=Math.min(this.widthA,this.heightA)/3-10;let s=h.scale.linear().range([0,2*Math.PI]),i=h.scale.sqrt().range([0,a]);const r=h.svg.arc().startAngle((function(t){return Math.max(0,Math.min(2*Math.PI,s(t.x)))})).endAngle((function(t){return Math.max(0,Math.min(2*Math.PI,s(t.x+t.dx)))})).innerRadius((function(t){return Math.max(0,i(t.y))})).outerRadius((function(t){return Math.max(0,i(t.y+t.dy))}));let l=h.select("#svgA").append("g").attr("id","sunrise").attr("transform","translate("+[250,500/3]+")"),n=h.select("#svgA").append("text");n.attr("dx","24px").attr("dy","30px").attr("font-family","sans-serif").attr("font-size","20px").attr("font-weight","bold").style("fill","black").attr("text-anchor","start").text("半导体显示产业结构图"),l.selectAll("path").data(e.nodes(t)).enter().append("path").attr("d",r).on("mouseover",(t=>{this.hovered=t.name,this.A_TipRemove("svgA"),this.A_createTip(t,"svgA"),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.A_TipRemove("svgA"),this.A_createTip(t,"svgA")})).on("mouseout",(t=>{this.hovered="",setTimeout((()=>{this.A_TipRemove("svgA")}),1500),this.$store.commit({type:"userMouseout",view:"viewA",obj:"tips(industry)",name:t.name,value:t.patent_num,width:this.widthA,height:this.heightA,desc:"hover industry"+t.name,data:{industry:t.name,company:[],province:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})).on("click",(t=>{this.$store.commit("objBclear"),this.selected=t.name,this.$store.commit({type:"userClick",view:"viewA",obj:"select industry(overall)",name:t.name,value:t.patent_num,height:this.heightA,width:this.widthA,desc:"Select industry "+t.name,data:{industry:t.name,company:[],province:[],attribute:"patent_num"}}),this.$store.commit("ClickRecordState"),t.children?t.children&&(this.leaf=!1,this.createBar(t),this.bar_title=t.name):(this.leaf=!0,this.createBar(t.parent),this.bar_title=t.parent.name)})).style("fill","#fcf6db").style("fill-opacity",1).style("stroke","#6c6c6c")},dataToFlare(t){var e=[],a=[];for(let D=0;D<t.length;D++)t[D].name8&&e.push({name:t[D].name8,parent:t[D].name7});for(let D=0;D<e.length;D++)(0==D||e[D].name!=e[D-1].name)&&a.push(e[D]);for(let D=0;D<a.length;D++){let e=0;for(let s=0;s<t.length;s++)a[D].name==t[s].name8&&(e+=parseInt(t[s].patent_num));a[D].patent_num=e}var s=[],i=[];for(let D=0;D<t.length;D++)t[D].name7&&s.push({name:t[D].name7,parent:t[D].name6});for(let D=0;D<s.length;D++)(0==D||s[D].name!=s[D-1].name)&&i.push(s[D]);for(let D=0;D<i.length;D++){let e=0;for(let a=0;a<t.length;a++)i[D].name==t[a].name7&&(e+=parseInt(t[a].patent_num));i[D].patent_num=e}var r=[],l=[];for(let D=0;D<t.length;D++)t[D].name6&&r.push({name:t[D].name6,parent:t[D].name5});for(let D=0;D<r.length;D++)(0==D||r[D].name!=r[D-1].name)&&l.push(r[D]);for(let D=0;D<l.length;D++){let e=0;for(let a=0;a<t.length;a++)l[D].name==t[a].name6&&(e+=parseInt(t[a].patent_num));l[D].patent_num=e}var n=[],o=[];for(let D=0;D<t.length;D++)t[D].name5&&n.push({name:t[D].name5,parent:t[D].name4});for(let D=0;D<n.length;D++)(0==D||n[D].name!=n[D-1].name)&&o.push(n[D]);for(let D=0;D<o.length;D++){let e=0;for(let a=0;a<t.length;a++)o[D].name==t[a].name5&&(e+=parseInt(t[a].patent_num));o[D].patent_num=e}var h=[],c=[];for(let D=0;D<t.length;D++)t[D].name4&&h.push({name:t[D].name4,parent:t[D].name3});for(let D=0;D<h.length;D++)(0==D||h[D].name!=h[D-1].name)&&c.push(h[D]);for(let D=0;D<c.length;D++){let e=0;for(let a=0;a<t.length;a++)c[D].name==t[a].name4&&(e+=parseInt(t[a].patent_num));c[D].patent_num=e}var d=[],p=[];for(let D=0;D<t.length;D++)t[D].name3&&d.push({name:t[D].name3,parent:t[D].name2});for(let D=0;D<d.length;D++)(0==D||d[D].name!=d[D-1].name)&&p.push(d[D]);for(let D=0;D<p.length;D++){let e=0;for(let a=0;a<t.length;a++)p[D].name==t[a].name3&&(e+=parseInt(t[a].patent_num));p[D].patent_num=e}var m=[],g=[];for(let D=0;D<t.length;D++)t[D].name2&&m.push({name:t[D].name2,parent:t[D].name1});for(let D=0;D<m.length;D++)(0==D||m[D].name!=m[D-1].name)&&g.push(m[D]);for(let D=0;D<g.length;D++){let e=0;for(let a=0;a<t.length;a++)g[D].name==t[a].name2&&(e+=parseInt(t[a].patent_num));g[D].patent_num=e}var f=[],u=[],y=[],x=[],v=[],B=[],_=[];for(let D=0;D<i.length;D++){let t=[];for(let e=0;e<a.length;e++)i[D].name==a[e].parent&&t.push(a[e]);t.length>0?_.push({name:i[D].name,children:t,patent_num:i[D].patent_num}):_.push({name:i[D].name,patent_num:i[D].patent_num})}for(let D=0;D<l.length;D++){let t=[];for(let e=0;e<_.length;e++)l[D].name==i[e].parent&&t.push(_[e]);t.length>0?B.push({name:l[D].name,children:t,patent_num:l[D].patent_num}):B.push({name:l[D].name,patent_num:l[D].patent_num})}for(let D=0;D<o.length;D++){let t=[];for(let e=0;e<l.length;e++)o[D].name==l[e].parent&&t.push(B[e]);t.length>0?v.push({name:o[D].name,children:t,patent_num:o[D].patent_num}):v.push({name:o[D].name,patent_num:o[D].patent_num})}for(let D=0;D<c.length;D++){let t=[];for(let e=0;e<o.length;e++)c[D].name==o[e].parent&&t.push(v[e]);t.length>0?x.push({name:c[D].name,children:t,patent_num:c[D].patent_num}):x.push({name:c[D].name,patent_num:c[D].patent_num})}for(let D=0;D<p.length;D++){let t=[];for(let e=0;e<c.length;e++)p[D].name==c[e].parent&&t.push(x[e]);t.length>0?y.push({name:p[D].name,children:t,patent_num:p[D].patent_num}):y.push({name:p[D].name,patent_num:p[D].patent_num})}for(let D=0;D<g.length;D++){let t=[];for(let e=0;e<p.length;e++)g[D].name==p[e].parent&&t.push(y[e]);t.length>0?u.push({name:g[D].name,children:t,patent_num:g[D].patent_num}):u.push({name:g[D].name,patent_num:g[D].patent_num})}let w=0;for(let D=0;D<u.length;D++)w+=u[D].patent_num;return f={name:"半导体显示",children:u,patent_num:w},f},aler2(){},createPanel(){let t=.85*this.$store.state.width,e=.7*this.$store.state.height,a=this.userData,s=a.length,i=8,r=5,l=e/(Math.ceil(s/i)+1),n=(t-50)/i-r,o=30;h.select("body").append("svg").attr("id","panel").style("left",.08*this.$store.state.width).style("top",.1*this.$store.state.height).style("position","absolute").attr("width",t).attr("height",e).style("background-color","#000000").style("opacity",.7);let c=h.select("#panel").append("g"),d=h.scale.category10(),p=h.scale.linear().domain([1,5]).range([o,l]);c.selectAll("rect").data(a).enter().append("rect").attr("width",(t=>t.lastTime?3*n/4:n)).attr("height",(t=>t.lastTime?p(t.lastTime):o)).attr("x",((t,e)=>t.lastTime?e%i*(n+r)+r+n/8:e%i*(n+r)+r)).attr("y",((t,e)=>t.lastTime?(Math.floor(e/i)+1)*l-p(t.lastTime)+30:(Math.floor(e/i)+1)*l)).attr("rx",10).style("fill",(t=>d(t.view))).style("stroke-width",3).style("stroke",(t=>t.lastTime?"None":"white")).on("mouseover",(t=>this.panel_createTip(t))).on("mousemove",(t=>{this.A_TipRemove("panel"),this.panel_createTip(t)})).on("mouseout",(()=>{this.A_TipRemove("panel")})),c.selectAll("text").data(a).enter().append("text").attr("width",n).attr("height",o).style("fill","white").style("text-weight","bold").attr("text-anchor","middle").attr("dx",((t,e)=>e%i*(n+r)+r+n/2)).attr("dy",((t,e)=>(Math.floor(e/i)+1)*l+15)).on("mouseover",(t=>this.panel_createTip(t))).on("mousemove",(t=>{this.A_TipRemove("panel"),this.panel_createTip(t)})).on("mouseout",(()=>{this.A_TipRemove("panel")})).text((t=>t.obj))}},watch:{panel(t){t?this.createPanel():h.select("#panel").remove()},hovered(t){h.select("#svgA").selectAll("path").filter((e=>e.name==t)).style("fill","#06ddf4"),h.select("#svgA").selectAll("path").filter((e=>e.name!=t&&e.name!=this.selected)).style("fill","#fcf6db")},selected(t){h.select("#svgA").selectAll("path").filter((e=>e.name==t)).style("fill","#06ddf4"),h.select("#svgA").selectAll("path").filter((e=>e.name!=t)).style("fill","#fcf6db"),this.$store.commit({type:"changeDataD",selected:t,leaf:this.leaf}),this.$store.commit({type:"changeStatesA",Aselected:t,Aleaf:this.leaf}),this.$store.commit({type:"changeGlobalD",key:"title",value:t})},bar_title(t){h.select("#AbarTitle").text(t+"叶子产业专利数排序")},leaf(t){this.$store.commit({type:"changeDataD",selected:this.selected,leaf:t}),this.$store.commit({type:"changeStatesA",Aselected:this.selected,Aleaf:t})},treeDataLength(t){let e=[],a=[],s=[],i=[],r=[];if(0==t)this.$store.commit({type:"changeBflare"});else if(1==t){for(let a=0;a<this.$store.state.data_overall.length;a++)this.$store.state.data_overall[a].comp_name==this.treeData[0]&&e.push(this.$store.state.data_overall[a]);let t=this.dataToFlare(e);this.$store.commit({type:"changeBflare",flare0:t})}else if(2==t){for(let a=0;a<this.$store.state.data_overall.length;a++)this.$store.state.data_overall[a]["name"+(this.depth+1)]==this.rootName&&this.$store.state.data_overall[a].comp_name==this.treeData[0]&&e.push(this.$store.state.data_overall[a]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e]["name"+(this.depth+1)]==this.rootName&&this.$store.state.data_overall[e].comp_name==this.treeData[1]&&a.push(this.$store.state.data_overall[e]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e]["name"+(this.depth+1)]!=this.rootName||this.$store.state.data_overall[e].comp_name!=this.treeData[0]&&this.$store.state.data_overall[e].comp_name!=this.treeData[1]||s.push(this.$store.state.data_overall[e]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e]["name"+(this.depth+1)]!=this.rootName||this.$store.state.data_overall[e].comp_name!=this.treeData[0]&&this.$store.state.data_overall[e].comp_name!=this.treeData[1]||i.push(this.$store.state.data_overall[e]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e]["name"+(this.depth+1)]!=this.rootName||this.$store.state.data_overall[e].comp_name!=this.treeData[0]&&this.$store.state.data_overall[e].comp_name!=this.treeData[1]||r.push(this.$store.state.data_overall[e]);let t=this.dataToFlare(e),l=this.dataToFlare(a),n=this.dataToFlare(s),o=this.dataToFlare(i),h=this.dataToFlare(r);this.$store.commit({type:"changeBflare",flare0:t,flare1:l,flareSum:n,flareSum2:o,flareSum3:h}),this.$store.commit({type:"changeStatesB",Bflare0:t,Bflare1:l,BflareSum:n,BflareSum2:o,BflareSum3:h})}},treeDataIndex2(t){let e=[],a=[],s=[],i=[],r=[];if(t){for(let a=0;a<this.$store.state.data_overall.length;a++)this.$store.state.data_overall[a].comp_name==this.treeData[0]&&e.push(this.$store.state.data_overall[a]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e].comp_name==this.treeData[1]&&a.push(this.$store.state.data_overall[e]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e].comp_name!=this.treeData[0]&&this.$store.state.data_overall[e].comp_name!=this.treeData[1]||s.push(this.$store.state.data_overall[e]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e].comp_name!=this.treeData[0]&&this.$store.state.data_overall[e].comp_name!=this.treeData[1]||i.push(this.$store.state.data_overall[e]);for(let e=0;e<this.$store.state.data_overall.length;e++)this.$store.state.data_overall[e].comp_name!=this.treeData[0]&&this.$store.state.data_overall[e].comp_name!=this.treeData[1]||r.push(this.$store.state.data_overall[e]);let t=this.dataToFlare(e),l=this.dataToFlare(a),n=this.dataToFlare(s),o=this.dataToFlare(i),h=this.dataToFlare(r);this.$store.commit({type:"changeBflare",flare0:t,flare1:l,flareSum:n,flareSum2:o,flareSum3:h}),this.$store.commit({type:"changeStatesB",Bflare0:t,Bflare1:l,BflareSum:n,BflareSum2:o,BflareSum3:h})}}}};p.render=o,p.__scopeId="data-v-6c188985";var m=p,g={name:"App",components:{componentA:m},data(){return{heightA:.5*this.$store.state.height,widthA:.3*this.$store.state.width}},mounted(){this.$store.commit({type:"changeApp",app:"app",width:this.widthA,height:this.heightA,top:15,left:20})}};g.render=r;var f=g;function u(t,e,a,s,r,l){const n=(0,i.up)("componentB");return(0,i.wg)(),(0,i.j4)(n)}(0,i.dD)("data-v-25868297");const y={id:"svgB"},x=["y"],v=["dy"],B=(0,i._)("svg",{id:"svgB2"},null,-1);function _(t,e,a,s,r,l){return(0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(),(0,i.iD)("svg",y,[(0,i._)("rect",{x:"0",y:r.heightB-50,height:"50",width:"60",fill:"orange"},null,8,x),(0,i._)("text",{dx:"30",dy:r.heightB-17,"text-anchor":"middle",fill:"white","font-size":"25","font-weight":"bold"},"C ",8,v)])),B],64)}(0,i.Cn)();var w={name:"componentB",data(){return{heightB:.85*this.$store.state.height,widthB:.4*this.$store.state.width,heightB2:.15*this.$store.state.height+5,reportFlag:!1,storyFlag:!1,storyIndex:0,story:{list:["a1","is","a","a2","semiconductor","display","enterprise,","with","a","total","of","a3","patents ","in","the","semiconductor","display","industry.","The","main","secondary","industry","of","a1","is","a4",",","with","a5","patents.","Its","overall","industrial","distribution","involves","a6","secondary","industries","and","a7","leaf","industries,","of","which","a8","has","the","largest","number","of","patents","reaching","a9","patents."]}}},mounted(){this.$store.commit({type:"appendBtn",svgID:"svgB2",btnID:"Bbtn",width:this.widthB,text:"next"}),h.select("#Bbtn").style("display","none").attr("transform","translate("+[this.widthB-70,3]+")").on("click",(()=>{1==this.storyIndex?this.storyIndex=2:this.storyIndex=1})),h.select("#svgB").attr("width",this.widthB).attr("height",this.heightB),h.select("#svgB2").attr("width",this.widthB).attr("height",this.heightB2),h.select("#svgB2").append("g").attr("id","storyText"),this.$store.commit({type:"appendLine",id:"lineB",svg:"svgB2",width:this.widthB,height:1,color:"mediumseagreen",stroke:1}),h.select("#svgB").append("g").attr("id","gDia"),h.select("#svgB").append("g").attr("id","gLinks1"),h.select("#svgB").append("g").attr("id","gCircles1"),h.select("#svgB").append("g").attr("id","gLinks2"),h.select("#svgB").append("g").attr("id","gCircles2"),h.select("#svgB").append("g").attr("id","gTag1"),h.select("#svgB").append("g").attr("id","gTag2"),h.select("#svgB").append("g").attr("id","report").attr("transform","translate("+[0,20]+")"),h.select("#svgB").append("g").attr("id","splitBtn").style("cursor","pointer").style("display","none").on("click",(()=>{this.$store.commit("objBSplitFlag")})).attr("transform","translate("+[this.widthB/7*5-45,0]+")"),h.select("#splitBtn").append("rect").attr("height",30).attr("width",55).attr("x",30).attr("y",30).attr("rx",15).style("fill","#939393"),h.select("#splitBtn").append("circle").attr("cx",45).attr("cy",45).attr("r",13).style("fill","white"),h.select("#splitBtn").append("text").attr("text-anchor","middle").attr("dx",57.5).attr("dy",26).attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").text("split"),h.select("#svgB").append("g").attr("id","reportBtn").style("cursor","pointer").style("display","none").on("click",(()=>{this.reportFlag?this.reportFlag=!1:this.reportFlag=!0})).attr("transform","translate("+[this.widthB/7*5+50,0]+")"),h.select("#reportBtn").append("rect").attr("height",30).attr("width",55).attr("x",30).attr("y",30).attr("rx",15).style("fill","#939393"),h.select("#reportBtn").append("circle").attr("cx",45).attr("cy",45).attr("r",13).style("fill","white"),h.select("#reportBtn").append("text").attr("text-anchor","middle").attr("dx",57.5).attr("dy",26).attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").text("report"),h.select("#svgB").append("text").attr("id","Btitle").attr("dx","24px").attr("dy","36px").attr("font-family","sans-serif").attr("font-size","24px").attr("font-weight","bold").style("fill","black").attr("text-anchor","start").text(this.rootName+"产业树对比图").style("display","none"),h.select("#svgB").append("text").attr("id","Bleft").attr("dx",20).attr("text-anchor","start").attr("dy",this.heightB/8).attr("font-family","sans-serif").attr("font-size","13px").attr("font-weight","bold").style("fill","#000000").style("cursor","pointer").on("click",(()=>{this.$store.commit({type:"delTreeData",index:"left"})})),h.select("#svgB").append("text").attr("id","Bright").attr("dx",this.widthB-50).attr("text-anchor","end").attr("dy",this.heightB/8).attr("font-family","sans-serif").attr("font-size","13px").attr("font-weight","bold").style("fill","#000000").style("cursor","pointer").on("click",(()=>{this.$store.commit({type:"delTreeData",index:"right"})})),h.select("#svgB").select("#txt23").attr("dy",60).style("display","inline").on("click",(()=>{}))},computed:{asd(){return this.$store.state.user.actionList},story_text(){let t=h.select("#storyText");return t},treeD(){return this.treeData+"1"},showBtn(){return 2==this.treeData.length},treeTypeFlag(){return this.$store.state.treeTypeFlag},B_nodes1(){if(this.treeData[0]){let t=[];for(let i=0;i<this.data_overall.length;i++)"company"==this.treeTypeFlag?this.data_overall[i].comp_name==this.treeData[0]&&this.data_overall[i]["name"+(this.depth+1)]==this.rootName&&t.push(this.data_overall[i]):"province"==this.treeTypeFlag&&this.data_overall[i].province.substring(0,2)==this.treeData[0].substring(0,2)&&this.data_overall[i]["name"+(this.depth+1)]==this.rootName&&t.push(this.data_overall[i]);let e=this.dataToFlare(t),a=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),s=a.nodes(e);for(let i=0;i<s.length;i++)s[i].x+=this.heightB/6,s[i].y+=this.widthB/20;return s}return[]},B_nodes2(){if(this.treeData[1]){let t=[];for(let i=0;i<this.data_overall.length;i++)"company"==this.treeTypeFlag?this.data_overall[i].comp_name==this.treeData[1]&&this.data_overall[i]["name"+(this.depth+1)]==this.rootName&&t.push(this.data_overall[i]):"province"==this.treeTypeFlag&&this.data_overall[i].province.substring(0,2)==this.treeData[1].substring(0,2)&&this.data_overall[i]["name"+(this.depth+1)]==this.rootName&&t.push(this.data_overall[i]);let e=this.dataToFlare(t),a=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),s=a.nodes(e);return s}return[]},B_nodes3(){if(this.treeData[1]){let t=[];for(let i=0;i<this.data_overall.length;i++)"company"==this.treeTypeFlag?this.data_overall[i]["name"+(this.depth+1)]!=this.rootName||this.data_overall[i].comp_name!=this.treeData[0]&&this.data_overall[i].comp_name!=this.treeData[1]||t.push(this.data_overall[i]):"province"==this.treeTypeFlag&&(this.data_overall[i]["name"+(this.depth+1)]!=this.rootName||this.data_overall[i].province.substring(0,2)!=this.treeData[0].substring(0,2)&&this.data_overall[i].province.substring(0,2)!=this.treeData[1].substring(0,2)||t.push(this.data_overall[i]));let e=this.dataToFlare(t);for(let i=0;i<this.depth;i++)e=e.children[0];let a=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),s=a.nodes(e);for(let i=0;i<s.length;i++)s[i].x+=this.heightB/6,s[i].y+=this.widthB/20;return s}return[]},B_nodes4(){if(this.treeData[1]){let t=[];for(let i=0;i<this.data_overall.length;i++)"company"==this.treeTypeFlag?this.data_overall[i]["name"+(this.depth+1)]!=this.rootName||this.data_overall[i].comp_name!=this.treeData[0]&&this.data_overall[i].comp_name!=this.treeData[1]||t.push(this.data_overall[i]):"province"==this.treeTypeFlag&&(this.data_overall[i]["name"+(this.depth+1)]!=this.rootName||this.data_overall[i].province.substring(0,2)!=this.treeData[0].substring(0,2)&&this.data_overall[i].province.substring(0,2)!=this.treeData[1].substring(0,2)||t.push(this.data_overall[i]));let e=this.dataToFlare(t);for(let i=0;i<this.depth;i++)e=e.children[0];let a=h.layout.tree().size([4*this.heightB/5,-2*this.widthB/5]),s=a.nodes(e);for(let i=0;i<s.length;i++)s[i].x+=this.heightB/6,s[i].y+=this.widthB/20;return s}return[]},B_nodes31(){let t=[];for(let e=0;e<this.B_nodes3.length;e++)-1!=this.D1.indexOf(this.B_nodes3[e].name)&&t.push(this.B_nodes3[e]);for(let e=0;e<t.length;e++)t[e].y=t[e].y-(t[e].y-t[0].y)/2;return t},B_nodes32(){let t=[];for(let e=0;e<this.B_nodes4.length;e++)-1!=this.D2.indexOf(this.B_nodes4[e].name)&&t.push(this.B_nodes4[e]);for(let e=0;e<t.length;e++)t[e].y+=this.widthB-80;return t},data_overall(){return this.$store.state.data_overall},rootName(){return this.$store.state.objB.rootName},depth(){return this.$store.state.objB.depth},splited(){return this.$store.state.objB.splited},treeData(){return this.$store.state.objB.treeData},treeDataLength(){return this.treeData.length},flare0(){return this.$store.state.objB.flare0},flare1(){return this.$store.state.objB.flare1},flareSum(){return this.$store.state.objB.flareSum},flareSum2(){return this.$store.state.objB.flareSum2},flareSum3(){return this.$store.state.objB.flareSum3},D1(){let t=[];for(let e=0;e<this.B_nodes1.length;e++)t.push(this.B_nodes1[e].name);return t},D2(){let t=[];for(let e=0;e<this.B_nodes2.length;e++)t.push(this.B_nodes2[e].name);return t},D3(){let t=[];for(let e=0;e<this.B_nodes3.length;e++)t.push(this.B_nodes3[e].name);return t}},methods:{appendStory(t,e,a,s,i,r,l,n,o,c,d,p,m){let g=e,f=h.select("#svgB");var u=(t,e,s,i,r)=>{"create"==t?s?s&&(h.select("#gCircles"+r).selectAll("circle").data(i).filter((t=>t.name==w("a8"))).style("stroke",a).style("stroke-width",2),B(w("a8"),i,1==r?this.B_nodes1:this.B_nodes2)):(h.select("#gCircles1").selectAll("circle").data(e).filter((t=>t.name==w("a8"))).style("stroke",a).style("stroke-width",2),B(w("a8"),e,1==r?this.B_nodes1:this.B_nodes2)):"remove"==t&&(f.select("#gCircles1").selectAll("circle").style("stroke-width",1).style("stroke","black"),f.select("#gCircles2").selectAll("circle").style("stroke-width",1).style("stroke","black"),this.B_TipRemove())},y=(t,e,s,i,r,l,n)=>{let o=["OLED","QLED","应刷显示","TFT-LCD","MiniLED","MicroLED"],c=[];function d(t,e){let a=!1;if("secondary"==e){for(let e=0;e<o.length;e++)if(o[e]==t.name){a=!0,c.push(t.name);break}return a}if("leaf"==e)return t.children||(a=!0,c.push(t.name)),a}if("create"==t){if(r){if(r&&(h.select("#gCircles"+n).selectAll("circle").data(l).filter((t=>d(t,e)&&-1!=i.indexOf(t.name))).style("stroke",a).style("stroke-width",2),c.length<9))for(let a=0;a<c.length;a++)i.indexOf(-1!=c[a])&&(1==n?B(c[a],this.B_nodes31,this.B_nodes1):B(c[a],this.B_nodes32,this.B_nodes2))}else if(h.select("#gCircles1").selectAll("circle").data(s).filter((t=>d(t,e)&&-1!=i.indexOf(t.name))).style("stroke",a).style("stroke-width",2),c.length<9)for(let a=0;a<c.length;a++)-1!=i.indexOf(c[a])&&B(c[a],this.B_nodes3,1==n?this.B_nodes1:this.B_nodes2)}else"remove"==t&&(f.select("#gCircles1").selectAll("circle").style("stroke-width",1).style("stroke","black"),f.select("#gCircles2").selectAll("circle").style("stroke-width",1).style("stroke","black"),this.B_TipRemove())},x=(t,s,i,r,l)=>{let n,o=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),c=h.layout.tree().size([4*this.heightB/5,-.4*this.widthB]);s?s&&(n=c.links(r),n=n.filter((t=>{if(-1!=l.indexOf(t.target.name))return t})),f.select("#gLinks"+i).selectAll("path").data(n).filter((t=>v(t.source,T))).style("stroke",a).style("stroke-opacity",.5).style("stroke-width",3),B(b(e,"name"),r,1==i?this.B_nodes1:this.B_nodes2)):(n=o.links(t),f.select("#gLinks1").selectAll("path").data(n).filter((t=>v(t.source,T))).style("stroke",a).style("stroke-opacity",.5).style("stroke-width",3),B(b(e,"name"),t,1==i?this.B_nodes1:this.B_nodes2))},v=(t,e)=>{let a=[];function s(t){if(a.push(t),t.children)for(let e=0;e<t.children.length;e++)s(t.children[e])}s(this.$store.state.flare);for(let i=0;i<a.length;i++){if(t.name==a[i].name&&a[i].name==e)return!0;if(t.name==a[i].name&&a[i].parent)return v(a[i].parent,e)}},B=(t,e,a)=>{let s,i;for(let r=0;r<e.length;r++)e[r].name==t&&(s=this.splited||"半导体显示"==t?{x:e[r].y+10,y:e[r].x}:{x:e[r].y+50,y:e[r].x+50},i=e[r]);this.B_createTip(i,0,a,s)};function _(t){return t[0].patent_num<200?"small-scale":t[0].patent_num<1e3?"middle-scale":"large-scale"}function w(t){return"a1"==t?s:"a2"==t?_(e):"a3"==t?e[0].patent_num:"a4"==t?b(g,"name"):"a5"==t?b(g,"max"):"a6"==t?b(g,"count"):"a7"==t?A(g,"count"):"a8"==t?A(g,"name"):"a9"==t?A(g,"max"):t}function D(t){return"a1"==t||"a2"==t||"a3"==t||"a4"==t||"a5"==t||"a6"==t||"a7"==t||"a8"==t||"a9"==t?a:"#000000"}function b(t,e){let a,s=0,i=0;for(let r=0;r<t.length;r++)k(t[r])&&t[r].patent_num>s&&(s=t[r].patent_num,a=t[r].name);for(let r=0;r<t.length;r++)k(t[r])&&i++;return"name"==e?a:"max"==e?s:"count"==e?i:void 0}var k=t=>{let e=["OLED","QLED","应刷显示","TFT-LCD","MiniLED","MicroLED"];function a(t){for(let a=0;a<e.length;a++)if(e[a]==t)return!0}let s=[],i=t=>{if(s.push(t),t.children)for(let e=0;e<t.children.length;e++)i(t.children[e])};i(this.$store.state.flare);for(let r=0;r<s.length;r++)if(t.name==s[r].name&&a(s[r].name))return!0};function A(t,e){let a,s=0,i=0;for(let r=0;r<t.length;r++)!t[r].children&&t[r].patent_num>s&&(s=t[r].patent_num,a=t[r].name);for(let r=0;r<t.length;r++)t[r].children||i++;return"name"==e?a:"max"==e?s:"count"==e?i:void 0}arguments.length<9&&(o=14),arguments.length<10&&(c="simsun, arial");let T=b(e,"name"),C=[{x:0,y:0}],$=0,F=0;for(let h=1;h<i.length;h++)"a1"==i[h-1]?$+w("a1").length*o+i[h].length/2*o<n?($+=15+s.length*o,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a2"==i[h-1]?$+w("a2").length*o/2+i[h].length/2*o<n?($+=15+_(e).length*o/2,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a3"==i[h-1]?$+w("a3").toString().length*o/2+i[h].length/2*o<n?($+=15+e[0].patent_num.toString().length*o/2,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a4"==i[h-1]?$+w("a4").toString().length*o+i[h].length/2*o<n?($+=15+b(e,"name").toString().length*o,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a5"==i[h-1]?$+w("a5").toString().length*o/2+i[h].length/2*o<n?($+=15+b(e,"max").toString().length*o/2,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a6"==i[h-1]?$+w("a6").toString().length*o/2+i[h].length/2*o<n?($+=15+b(e,"count").toString().length*o/2,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a7"==i[h-1]?$+w("a7").toString().length*o/2+i[h].length/2*o<n?($+=15+A(e,"count").toString().length*o/2,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a8"==i[h-1]?$+w("a8").toString().length*o+i[h].length/2*o<n?($+=15+A(e,"name").toString().length*o,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):"a9"==i[h-1]?$+w("a9").toString().length*o/2+i[h].length/2*o<n?($+=15+A(e,"max").toString().length*o/2,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F})):$+i[h-1].length*o/2+i[h].length/2*o<n?($+=i[h-1].length>12?o+i[h-1].length*o/2+3:o/2+i[h-1].length*o/2+7,C.push({x:$,y:F})):($=0,F+=o+5,C.push({x:$,y:F}));t.selectAll(".storyText").data(i).enter().append("text").attr("class","storyText").attr("dx",((t,e)=>C[e].x+r)).attr("dy",((t,e)=>C[e].y+l)).style("font-size",o).style("fill",(t=>D(t))).style("font-weight","bold").text((t=>w(t))),t.selectAll(".storyText").data(i).transition().attr("dx",((t,e)=>C[e].x+r)).attr("dy",((t,e)=>C[e].y+l)).style("font-size",o).style("font-family",c).style("fill",(t=>D(t))).text((t=>w(t))),t.selectAll(".storyText").data(i).exit().remove(),t.selectAll(".storyText").data(i).filter((t=>"a3"==t||"a1"==t||"a2"==t)).on("mouseover",(()=>{this.$store.commit({type:"userMouseover"}),this.splited?B("半导体显示",m,e):B("半导体显示",this.B_nodes3,e)})).on("mouseout",(()=>{this.B_TipRemove()})),t.selectAll(".storyText").data(i).filter((t=>"a4"==t||"a5"==t)).on("mouseover",(()=>{this.$store.commit({type:"userMouseover"}),x(this.B_nodes3,this.splited,p,m,d)})).on("mouseout",(()=>{f.selectAll("path").style("stroke","black").style("stroke-opacity",.5).style("stroke-width",1),this.B_TipRemove()})),t.selectAll(".storyText").data(i).filter((t=>"a6"==t)).on("mouseover",(()=>{this.$store.commit({type:"userMouseover"}),y("create","secondary",this.B_nodes3,d,this.splited,m,p)})).on("mouseout",(()=>{y("remove","secondary")})),t.selectAll(".storyText").data(i).filter((t=>"a7"==t)).on("mouseover",(()=>{this.$store.commit({type:"userMouseover"}),y("create","leaf",this.B_nodes3,d,this.splited,m,p)})).on("mouseout",(()=>{y("remove","leaf",this.B_nodes3,d,this.splited,m,p)})),t.selectAll(".storyText").data(i).filter((t=>"a8"==t||"a9"==t)).on("mouseover",(()=>{this.$store.commit({type:"userMouseover"}),u("create",this.B_nodes3,this.splited,m,p)})).on("mouseout",(()=>{u("remove")}))},B_report(){function t(t,e){function a(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}let s=a(event);h.select("#svgB").append("rect").attr("id","tipBack").attr("class","tips2").attr("x",s.x+10).attr("y",s.y-30).style("width",150).attr("rx",20),h.select("#svgB").append("text").attr("class","tips2").attr("dx",s.x+20).attr("dy",s.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(t[0].children[e].name),h.select("#svgB").append("text").attr("class","tips2").attr("dx",s.x+20).attr("dy",s.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+t[0].children[e].patent_num)}function e(){h.select("#svgB").selectAll(".tips2").remove()}let a=this.widthB;function s(t,e,s,i,r,l,n){if(t+e!=0){let o=["#5975ff","#4cde71"],c=[{startAngle:0,endAngle:t/(t+e)*2*Math.PI},{startAngle:t/(t+e)*2*Math.PI,endAngle:2*Math.PI}],d=h.svg.arc().outerRadius(a/15).innerRadius(a/18);r.selectAll("."+l).data(c).enter().append("path").attr("transform","translate("+[s,i]+")").attr("class",l).classed("tips",!0).attr("fill",((t,e)=>o[e])).transition().duration(1e3).attrTween("d",(function(t){var e={startAngle:0,endAngle:0},a=h.interpolate(e,t);return function(t){return d(a(t))}})),r.append("g").attr("class","tips").attr("transform","translate("+[s,i]+")").selectAll("."+l).data(c).enter().append("text").attr("class","tips").attr("dx",((t,e)=>0==e?13:-13)).attr("transform",(function(t){return"translate("+d.centroid(t)+")"})).attr("font-family","sans-serif").attr("font-size","16px").attr("font-weight","bold").attr("text-anchor","middle").style("fill","white").transition().delay(1e3).text((function(a,s){if(a.endAngle-a.startAngle!=0)return 0==s?t:e})),r.append("text").attr("dx",s).attr("dy",i+a/12+20).attr("class","tips").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("text-anchor","middle").style("fill","white").text(n)}}let i=3*this.widthB/4,r=3*this.heightB/4+100,l=h.select("#svgB").select("#report");l.append("rect").attr("id","tipBack").attr("class","tips").attr("x",30).attr("y",30).style("height",r).style("width",i).attr("rx",20);let n=l.append("g").attr("transform","translate("+[50,80]+")"),o=l.append("g").attr("transform","translate("+[30+3*this.widthB/8,60]+")"),c=l.append("g"),d=l.append("g"),p=h.scale.linear().domain([0,Math.max(this.B_nodes1[0].patent_num,this.B_nodes2[0].patent_num)]).range([0,this.widthB/2]),m=h.scale.category20c(),g=[],f=[];this.B_nodes1[0].children.forEach((function(t,e){0==e?g.push({x0:0,x1:t.patent_num}):g.push({x0:g[e-1].x0+g[e-1].x1,x1:t.patent_num})})),this.B_nodes2[0].children.forEach((function(t,e){0==e?f.push({x0:0,x1:t.patent_num}):f.push({x0:f[e-1].x0+f[e-1].x1,x1:t.patent_num})})),o.append("text").attr("id","reportTitle").attr("class","tips").attr("font-family","sans-serif").attr("font-size","20px").attr("font-weight","bold").attr("text-anchor","middle").style("fill","white").text(this.rootName+"产业对比分析"),n.append("text").attr("id","stackName1").attr("class","tips").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("text-anchor","start").attr("dx",20).attr("dy",30).style("fill","white").text(this.treeData[0]),n.append("text").attr("id","stackName2").attr("class","tips").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("text-anchor","start").attr("dx",20).attr("dy",80).style("fill","white").text(this.treeData[1]),n.append("text").attr("id","stackTag1").attr("class","tips").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("text-anchor","start").attr("dx",(()=>p(this.B_nodes1[0].patent_num)+25)).attr("dy",55).style("fill","white").transition().delay(1500).text(this.B_nodes1[0].patent_num),n.append("text").attr("id","stackTag2").attr("class","tips").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("text-anchor","start").attr("dx",(()=>p(this.B_nodes2[0].patent_num)+25)).attr("dy",105).style("fill","white").transition().delay(1500).text(this.B_nodes2[0].patent_num);let u=this.B_nodes1;n.selectAll(".rect1").data(g).enter().append("rect").attr("class","rect1 tips").attr("x",(t=>p(t.x0)+20)).attr("y",40).attr("width",0).attr("height",20).style("fill",((t,e)=>m(this.B_nodes1[0].children[e].name))).on("mouseover",(function(e,a){h.select(this).style("stroke","white").style("stroke-width",1),t(u,a)})).on("mousemove",((a,s)=>{e(),t(this.B_nodes1,s)})).on("mouseout",(function(){h.select(this).style("stroke-width",0),e()})).transition().duration(500).delay(((t,e)=>500*e)).attr("width",(t=>p(t.x1)));let y=this.B_nodes2;n.selectAll(".rect2").data(f).enter().append("rect").attr("class","rect2 tips").attr("x",(t=>p(t.x0)+20)).attr("y",90).attr("width",0).attr("height",20).style("fill",((t,e)=>m(this.B_nodes2[0].children[e].name))).on("mouseover",(function(e,a){h.select(this).style("stroke","white").style("stroke-width",1),t(y,a)})).on("mousemove",(function(a,s){e(),t(y,s)})).on("mouseout",(function(){h.select(this).style("stroke-width",0),e()})).transition().duration(500).delay(((t,e)=>500*e)).attr("width",(t=>p(t.x1)));let x=0,v=0,B=0,_=0,w=0,D=0,b=0,k=0,A=0,T=0,C=0,$=0;u.forEach((t=>{-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,u)>this.B_getPat(t.name,0,this.B_nodes2)?x++:-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,u)<this.B_getPat(t.name,0,this.B_nodes2)&&v++})),u.forEach((t=>{t.children&&(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,u)>this.B_getPat(t.name,0,this.B_nodes2)?B++:-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,u)<this.B_getPat(t.name,0,this.B_nodes2)&&_++)})),u.forEach((t=>{t.children||(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,u)>this.B_getPat(t.name,0,this.B_nodes2)?w++:-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,u)<this.B_getPat(t.name,0,this.B_nodes2)&&D++)})),s(x,v,130,280,c,"pie1","总体优势产业数"),s(B,_,i/2+30,280,c,"pie2","非叶优势产业数"),s(w,D,i-70,280,c,"pie3","叶优势产业数"),u.forEach((t=>{-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name)&&C++})),this.B_nodes2.forEach((t=>{-1==this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&$++})),u.forEach((t=>{t.children&&-1==this.D2.indexOf(t.name)&&b++})),this.B_nodes2.forEach((t=>{t.children&&-1==this.D1.indexOf(t.name)&&A++})),u.forEach((t=>{t.children||-1==this.D2.indexOf(t.name)&&k++})),this.B_nodes2.forEach((t=>{t.children||-1==this.D1.indexOf(t.name)&&T++})),s(C,$,130,450,c,"pie4","总体特有产业数"),s(b,A,i/2+30,450,c,"pie5","非叶特有产业数"),s(k,T,i-70,450,c,"pie6","叶特有产业数"),d.append("rect").attr("class","tips").attr("height",15).attr("width",15).style("fill","#5975ff").attr("rx",3).attr("x",i/2+30-160).attr("y",450+this.widthB/12+50),d.append("text").attr("class","tips").attr("dx",i/2+30-140).attr("dy",450+this.widthB/12+65).attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("text-anchor","start").style("fill","white").text(this.treeData[0]),d.append("rect").attr("class","tips").attr("height",15).attr("width",15).style("fill","#4cde71").attr("rx",3).attr("x",i/2+30-160).attr("y",450+this.widthB/12+75),d.append("text").attr("class","tips").attr("dx",i/2+30-140).attr("dy",450+this.widthB/12+90).attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("text-anchor","start").style("fill","white").text(this.treeData[1])},B_TipRemove(){h.select("#svgB").selectAll(".tips").remove()},B_createTip(t,e,a,s){let i;function r(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}this.reportFlag=!1,arguments.length<4?i=r(event):4==arguments.length&&(i=s);let l=h.select("#svgB"),n=t.name.length>8?15*t.name.length+10:120;i.x>0&&i.x<this.widthB-n?(l.append("rect").attr("id","tipBack").attr("class","tips").attr("x",i.x+10).attr("y",i.y-30).style("width",n).attr("rx",20),l.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(t.name),l.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,e,a))):(l.append("rect").attr("id","tipBack").attr("class","tips").attr("x",i.x-10-n).attr("y",i.y-30).style("width",n).attr("rx",20),l.append("text").attr("class","tips").attr("dx",i.x-n).attr("dy",i.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(t.name),l.append("text").attr("class","tips").attr("dx",i.x-n).attr("dy",i.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,e,a)))},B_createTipBar(t,e,a){function s(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}this.reportFlag=!1;let i=s(event),r=Math.max(t.name.length,this.treeData[0].length,this.treeData[1].length)>8?15*Math.max(t.name.length,this.treeData[0].length,this.treeData[1].length)+10:120,l=h.scale.linear().domain([0,Math.max(this.B_getPat(t.name,0,e),this.B_getPat(t.name,0,a))]).range([20,Math.max(t.name.length,this.treeData[0].length,this.treeData[1].length)>8?15*Math.max(t.name.length,this.treeData[0].length,this.treeData[1].length)-40:40]),n=h.select("#svgB");i.x>0&&i.x<this.widthB-r&&i.y>0&&i.y<this.widthB-130?(n.append("rect").attr("id","tipBack").attr("class","tips").style("height",160).attr("x",i.x+10).attr("y",i.y-30).style("width",r).attr("rx",20),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company ***"),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company X"),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y+35).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,e)),n.append("rect").attr("class","tips").attr("x",i.x+20).attr("y",i.y+42).attr("width",0).attr("height",14).attr("rx",5).style("fill","#5975ff").transition().attr("width",l(this.B_getPat(t.name,0,e))),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y+75).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company Y"),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y+95).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,a)),n.append("rect").attr("class","tips").attr("x",i.x+20).attr("y",i.y+102).attr("width",0).attr("height",14).attr("rx",5).style("fill","#4cde71").transition().attr("width",l(this.B_getPat(t.name,0,a)))):i.x>this.widthB-r&&i.y>0&&i.y<this.heightB-130?(n.append("rect").attr("id","tipBack").attr("class","tips").style("height",160).attr("x",this.widthB-r).attr("y",i.y+10).style("width",r).attr("rx",20),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y+35).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(t.name),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y+55).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company X"),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y+75).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,e)),n.append("rect").attr("class","tips").attr("x",this.widthB-r+10).attr("y",i.y+82).attr("width",0).attr("height",14).attr("rx",5).style("fill","#5975ff").transition().attr("width",l(this.B_getPat(t.name,0,e))),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y+115).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company Y"),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y+135).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,a)),n.append("rect").attr("class","tips").attr("x",this.widthB-r+10).attr("y",i.y+142).attr("width",0).attr("height",14).attr("rx",5).style("fill","#4cde71").transition().attr("width",l(this.B_getPat(t.name,0,a)))):i.x>0&&i.x<this.widthB-r&&i.y>this.widthB-130?(n.append("rect").attr("id","tipBack").attr("class","tips").style("height",160).attr("x",i.x+10).attr("y",i.y-130).style("width",r).attr("rx",20),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y-105).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(t.name),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y-85).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company X"),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y-65).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,e)),n.append("rect").attr("class","tips").attr("x",i.x+20).attr("y",i.y-58).attr("width",0).attr("height",14).attr("rx",5).style("fill","#5975ff").transition().attr("width",l(this.B_getPat(t.name,0,e))),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y-25).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company Y"),n.append("text").attr("class","tips").attr("dx",i.x+20).attr("dy",i.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,a)),n.append("rect").attr("class","tips").attr("x",i.x+20).attr("y",i.y+2).attr("width",0).attr("height",14).attr("rx",5).style("fill","#4cde71").transition().attr("width",l(this.B_getPat(t.name,0,a)))):i.x>this.widthB-r&&i.y>this.heightB-130&&(n.append("rect").attr("id","tipBack").attr("class","tips").style("height",160).attr("x",this.widthB-r).attr("y",i.y-170).style("width",r).attr("rx",20),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y-145).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(t.name),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y-125).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company X"),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y-105).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,e)),n.append("rect").attr("class","tips").attr("x",this.widthB-r+10).attr("y",i.y-98).attr("width",0).attr("height",14).attr("rx",5).style("fill","#5975ff").transition().attr("width",l(this.B_getPat(t.name,0,e))),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y-65).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company Y"),n.append("text").attr("class","tips").attr("dx",this.widthB-r+10).attr("dy",i.y-45).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+this.B_getPat(t.name,0,a)),n.append("rect").attr("class","tips").attr("x",this.widthB-r+10).attr("y",i.y-38).attr("width",0).attr("height",14).attr("rx",5).style("fill","#4cde71").transition().attr("width",l(this.B_getPat(t.name,0,a))))},dataToFlare(t){var e=[],a=[];for(let D=0;D<t.length;D++)t[D].name8&&e.push({name:t[D].name8,parent:t[D].name7});for(let D=0;D<e.length;D++)(0==D||e[D].name!=e[D-1].name)&&a.push(e[D]);for(let D=0;D<a.length;D++){let e=0;for(let s=0;s<t.length;s++)a[D].name==t[s].name8&&(e+=parseInt(t[s].patent_num));a[D].patent_num=e}var s=[],i=[];for(let D=0;D<t.length;D++)t[D].name7&&s.push({name:t[D].name7,parent:t[D].name6});for(let D=0;D<s.length;D++)(0==D||s[D].name!=s[D-1].name)&&i.push(s[D]);for(let D=0;D<i.length;D++){let e=0;for(let a=0;a<t.length;a++)i[D].name==t[a].name7&&(e+=parseInt(t[a].patent_num));i[D].patent_num=e}var r=[],l=[];for(let D=0;D<t.length;D++)t[D].name6&&r.push({name:t[D].name6,parent:t[D].name5});for(let D=0;D<r.length;D++)(0==D||r[D].name!=r[D-1].name)&&l.push(r[D]);for(let D=0;D<l.length;D++){let e=0;for(let a=0;a<t.length;a++)l[D].name==t[a].name6&&(e+=parseInt(t[a].patent_num));l[D].patent_num=e}var n=[],o=[];for(let D=0;D<t.length;D++)t[D].name5&&n.push({name:t[D].name5,parent:t[D].name4});for(let D=0;D<n.length;D++)(0==D||n[D].name!=n[D-1].name)&&o.push(n[D]);for(let D=0;D<o.length;D++){let e=0;for(let a=0;a<t.length;a++)o[D].name==t[a].name5&&(e+=parseInt(t[a].patent_num));o[D].patent_num=e}var h=[],c=[];for(let D=0;D<t.length;D++)t[D].name4&&h.push({name:t[D].name4,parent:t[D].name3});for(let D=0;D<h.length;D++)(0==D||h[D].name!=h[D-1].name)&&c.push(h[D]);for(let D=0;D<c.length;D++){let e=0;for(let a=0;a<t.length;a++)c[D].name==t[a].name4&&(e+=parseInt(t[a].patent_num));c[D].patent_num=e}var d=[],p=[];for(let D=0;D<t.length;D++)t[D].name3&&d.push({name:t[D].name3,parent:t[D].name2});for(let D=0;D<d.length;D++)(0==D||d[D].name!=d[D-1].name)&&p.push(d[D]);for(let D=0;D<p.length;D++){let e=0;for(let a=0;a<t.length;a++)p[D].name==t[a].name3&&(e+=parseInt(t[a].patent_num));p[D].patent_num=e}var m=[],g=[];for(let D=0;D<t.length;D++)t[D].name2&&m.push({name:t[D].name2,parent:t[D].name1});for(let D=0;D<m.length;D++)(0==D||m[D].name!=m[D-1].name)&&g.push(m[D]);for(let D=0;D<g.length;D++){let e=0;for(let a=0;a<t.length;a++)g[D].name==t[a].name2&&(e+=parseInt(t[a].patent_num));g[D].patent_num=e}var f=[],u=[],y=[],x=[],v=[],B=[],_=[];for(let D=0;D<i.length;D++){let t=[];for(let e=0;e<a.length;e++)i[D].name==a[e].parent&&t.push(a[e]);t.length>0?_.push({name:i[D].name,children:t,patent_num:i[D].patent_num}):_.push({name:i[D].name,patent_num:i[D].patent_num})}for(let D=0;D<l.length;D++){let t=[];for(let e=0;e<_.length;e++)l[D].name==i[e].parent&&t.push(_[e]);t.length>0?B.push({name:l[D].name,children:t,patent_num:l[D].patent_num}):B.push({name:l[D].name,patent_num:l[D].patent_num})}for(let D=0;D<o.length;D++){let t=[];for(let e=0;e<l.length;e++)o[D].name==l[e].parent&&t.push(B[e]);t.length>0?v.push({name:o[D].name,children:t,patent_num:o[D].patent_num}):v.push({name:o[D].name,patent_num:o[D].patent_num})}for(let D=0;D<c.length;D++){let t=[];for(let e=0;e<o.length;e++)c[D].name==o[e].parent&&t.push(v[e]);t.length>0?x.push({name:c[D].name,children:t,patent_num:c[D].patent_num}):x.push({name:c[D].name,patent_num:c[D].patent_num})}for(let D=0;D<p.length;D++){let t=[];for(let e=0;e<c.length;e++)p[D].name==c[e].parent&&t.push(x[e]);t.length>0?y.push({name:p[D].name,children:t,patent_num:p[D].patent_num}):y.push({name:p[D].name,patent_num:p[D].patent_num})}for(let D=0;D<g.length;D++){let t=[];for(let e=0;e<p.length;e++)g[D].name==p[e].parent&&t.push(y[e]);t.length>0?u.push({name:g[D].name,children:t,patent_num:g[D].patent_num}):u.push({name:g[D].name,patent_num:g[D].patent_num})}let w=0;for(let D=0;D<u.length;D++)w+=u[D].patent_num;return f={name:"半导体显示",children:u,patent_num:w},f},createNewTree(){if(0==this.treeData.length)this.$store.commit("objBclear");else if(1==this.treeData.length){let t=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),e=t.links(this.B_nodes1),a=h.svg.diagonal().projection((function(t){return[t.y+10,t.x]}));h.select("#gLinks1").selectAll("path").data(e).enter().append("path").attr("class","links1").style("fill","none").style("stroke","black").style("stroke-opacity",.5),h.select("#gLinks1").selectAll("path").data(e).attr("d",(function(t){return a(t)})).style("stroke-width",0).transition().style("stroke-width",1),h.select("#gLinks1").selectAll("path").data(e).exit().remove(),h.select("#gCircles1").selectAll("circle").data(this.B_nodes1).enter().append("circle").attr("class","circles1").append("title").text((t=>t.name)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes1).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)).style("fill","white").style("stroke","black").attr("r",0).on("mouseover",(t=>{this.B_TipRemove(),h.select("#gCircles1").selectAll("circle").data(this.B_nodes1).filter((e=>e==t)).style("stroke","red"),this.B_createTip(t,1,this.B_nodes1),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes1)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes1).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",obj:"tips(tree nodes)",name:this.treeData[0]+":"+t.name,value:t.patent_num,width:this.widthB,height:this.heightB,desc:"hover:"+this.treeData[0]+"in"+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0]]:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})).transition().attr("r",4),h.select("#gCircles1").selectAll("circle").data(this.B_nodes1).exit().remove()}else if(2==this.treeData.length){let t=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),e=t.links(this.B_nodes3),a=h.svg.diagonal().projection((function(t){return[t.y+10,t.x]}));h.select("#gLinks1").selectAll("path").data(e).enter().append("path").attr("class","links1").style("fill","none").style("stroke","black").style("stroke-opacity",.5),h.select("#gLinks1").selectAll("path").data(e).transition().attr("d",(function(t){return a(t)})).style("stroke-width",1),h.select("#gLinks1").selectAll("path").data(e).exit().remove(),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).enter().append("circle").attr("class","circles1"),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).on("click",(t=>{this.roam(t.name,t.depth)})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes3),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes3)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:t.patent_num,width:this.widthB,height:this.heightB,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).style("fill","white").style("stroke","black").attr("r",0).transition().attr("r",4).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name))return t})).transition().style("fill","#5975ff").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(-1==this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).transition().style("fill","#4cde71").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500);let e=this.B_getPat(t.name,0,this.B_nodes1),a=this.B_getPat(t.name,0,this.B_nodes2);this.$store.commit({type:"userMouseout",view:"viewB",obj:"tips(tree nodes)",width:this.widthB,height:this.heightB,name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:e+" vs "+a,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).exit().remove()}},split(){let t=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),e=t.links(this.B_nodes31);e=e.filter((t=>{if(-1!=this.D1.indexOf(t.target.name))return t}));let a=t.links(this.B_nodes32);a=a.filter((t=>{if(-1!=this.D2.indexOf(t.target.name))return t}));let s=h.svg.diagonal().projection((function(t){return[t.y+10,t.x]})),i=h.svg.diagonal().projection((function(t){return[t.y,t.x]}));h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).enter().append("circle").attr("class","circles31").style("fill","white"),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).style("fill","white").attr("r",4).on("click",(()=>{})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes31),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes31)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",obj:"tips(tree nodes)",name:this.treeData[0]+":"+t.name,value:t.patent_num,width:this.widthB,height:this.heightB,desc:"hover:"+this.treeData[0]+"in"+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0]]:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})).transition().attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name))return!0})).transition().style("fill","#5975ff").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,this.B_nodes1)>this.B_getPat(t.name,0,this.B_nodes2))return!0})).attr("r",6),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return!0})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500);let e=this.B_getPat(t.name,0,this.B_nodes1),a=this.B_getPat(t.name,0,this.B_nodes2);this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:e+" vs "+a,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if("半导体显示"!=t.name&&t.children&&-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("click",(t=>{this.roam(t.name,t.depth)})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(!t.parent&&"半导体显示"!=t.name)return t})).on("click",(()=>{this.$store.commit({type:"objBDepth",flag:0,depth:0,rootName:"半导体显示"}),this.roam("半导体显示",0)})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).exit().remove(),h.select("#gLinks1").selectAll("path").data(e).enter().append("path").attr("class","links1").style("fill","none").style("stroke","black").style("stroke-width",.5),h.select("#gLinks1").selectAll("path").data(e).transition().attr("d",(function(t){return s(t)})),h.select("#gLinks1").selectAll("path").data(e).exit().remove(),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).enter().append("circle").attr("class","circles32").style("fill","white").style("stroke","black").append("title").text((t=>t.name)),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).style("fill","white").attr("r",4).attr("cx",this.widthB/2).attr("cy",this.heightB/2).on("mouseover",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes32),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes32)})).on("mouseout",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[1]+":"+t.name,value:t.patent_num,desc:"hover:"+this.treeData[1]+"in"+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[1]]:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})).transition().attr("cx",(t=>t.y)).attr("cy",(t=>t.x)),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(-1!=this.D2.indexOf(t.name)&&-1==this.D1.indexOf(t.name))return t})).transition().style("fill","#4cde71").attr("r",7).attr("cx",(t=>t.y)).attr("cy",(t=>t.x)),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,this.B_nodes2)>this.B_getPat(t.name,0,this.B_nodes1))return!0})).attr("r",6),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return!0})).on("mouseover",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2)})).on("mouseout",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500);let e=this.B_getPat(t.name,0,this.B_nodes1),a=this.B_getPat(t.name,0,this.B_nodes2);this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:e+" vs "+a,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if("半导体显示"!=t.name&&t.children&&-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("click",(t=>{this.roam(t.name,t.depth)})),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(!t.parent&&"半导体显示"!=t.name)return t})).on("click",(()=>{this.$store.commit({type:"objBDepth",flag:0,depth:0,rootName:"半导体显示"}),this.roam("半导体显示",0)})),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).exit().remove(),h.select("#gLinks2").selectAll("path").data(a).enter().append("path").attr("class","links2").style("fill","none").style("stroke","black"),h.select("#gLinks2").selectAll("path").data(a).style("stroke-width",0).transition().attr("d",(function(t){return i(t)})).style("stroke-width",.5),h.select("#gLinks2").selectAll("path").data(a).exit().remove(),this.createDia();let r=h.select("#gTag1"),l=h.select("#gTag2");r.selectAll(".text1").data(this.B_nodes31).enter().append("text").attr("class","text1").attr("dx",20).attr("dy",this.heightB/2).attr("font-family","sans-serif").attr("font-size","10px").attr("font-weight","bold").style("fill","black").attr("text-anchor","start"),r.selectAll(".text1").data(this.B_nodes31).filter((t=>{if(this.B_nodes31.length<100&&!t.children&&-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name))return t})).transition().attr("dx",(t=>t.y+20)).attr("dy",(t=>t.x+5)).text((t=>t.name)),r.selectAll(".text1").data(this.B_nodes31).exit().remove(),l.selectAll(".text2").data(this.B_nodes32).enter().append("text").attr("class","text2").attr("dx",20).attr("dy",this.heightB/2).attr("font-family","sans-serif").attr("font-size","10px").attr("font-weight","bold").style("fill","black").attr("text-anchor","end"),l.selectAll(".text2").data(this.B_nodes32).filter((t=>{if(this.B_nodes32.length<100&&!t.children&&-1==this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).transition().attr("dx",(t=>t.y-10)).attr("dy",(t=>t.x+5)).text((t=>t.name)),l.selectAll(".text2").data(this.B_nodes32).exit().remove()},B_getPat(t,e,a){for(let s=0;s<a.length;s++)if(t==a[s].name)return a[s].patent_num},createDia(){h.select("#svgB").selectAll("linearGradient").remove();let t=[],e=[];for(let a=0;a<this.B_nodes31.length;a++)for(let s=0;s<this.B_nodes32.length;s++)this.B_nodes31[a].children||this.B_nodes31[a].name!=this.B_nodes32[s].name||(t.push({a:this.B_nodes31[a],b:this.B_nodes32[s],pat_numA:this.B_getPat(this.B_nodes31[a].name,0,this.B_nodes1),pat_numB:this.B_getPat(this.B_nodes31[a].name,0,this.B_nodes2)}),e.push(this.B_nodes31[a].name));h.select("#gDia").selectAll(".dia").data(t).enter().append("line").attr("class","dia").style("fill","none").style("stroke","black").style("stroke-width",3).attr("x1",this.widthB/2).attr("y1",this.heightB/2).attr("x2",this.widthB/2).attr("y2",this.heightB/2),t.forEach((function(t,e){let a=h.select("#svgB").append("defs"),s=t.pat_numA/(t.pat_numA+t.pat_numB),i=a.append("linearGradient").attr("id","contrastColor"+e).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");i.append("stop").attr("offset",s).style("stop-color","#5975ff"),i.append("stop").attr("offset",s).style("stop-color","#4cde71")})),h.select("#gDia").selectAll(".dia").data(t).transition().style("stroke",((t,e)=>"url(#contrastColor"+e+")")).style("stroke-width",3).attr("x1",(t=>t.a.y+14)).attr("y1",(t=>t.a.x)).attr("x2",(t=>t.b.y-4)).attr("y2",(t=>t.b.x+.01)),h.select("#gDia").selectAll(".dia").data(t).exit().remove()},merge(){h.select("#gCircles2").selectAll("circle").remove(),h.select("#gLinks2").selectAll("path").remove(),h.select("#gDia").selectAll("line").remove();let t=[];for(let n=0;n<this.data_overall.length;n++)"company"==this.treeTypeFlag?this.data_overall[n]["name"+(this.depth+1)]!=this.rootName||this.data_overall[n].comp_name!=this.treeData[0]&&this.data_overall[n].comp_name!=this.treeData[1]||t.push(this.data_overall[n]):"province"==this.treeTypeFlag&&(this.data_overall[n]["name"+(this.depth+1)]!=this.rootName||this.data_overall[n].province.substring(0,2)!=this.treeData[0].substring(0,2)&&this.data_overall[n].province.substring(0,2)!=this.treeData[1].substring(0,2)||t.push(this.data_overall[n]));let e=this.dataToFlare(t);for(let n=0;n<this.depth;n++)e=e.children[0];let a=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),s=a.nodes(e);for(let n=0;n<s.length;n++)s[n].x+=this.heightB/6,s[n].y+=this.widthB/20;let i=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),r=i.links(s),l=h.svg.diagonal().projection((function(t){return[t.y+10,t.x]}));h.select("#gLinks1").selectAll("path").data(r).enter().append("path").attr("class","links1").attr("d",[this.heightB/2]).style("fill","none").style("stroke","black").style("stroke-opacity",.5),h.select("#gLinks1").selectAll("path").data(r).style("stroke","black").style("stroke-opacity",.5).transition().attr("d",(function(t){return l(t)})).style("stroke-width",1),h.select("#gLinks1").selectAll("path").data(r).exit().remove(),h.select("#gCircles1").selectAll("circle").data(s).enter().append("circle").attr("class","circles1"),h.select("#gCircles1").selectAll("circle").data(s).on("click",(t=>{this.roam(t.name,t.depth)})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes3),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes3)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:t.patent_num,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(s).style("fill","white").style("stroke","black").attr("r",0).transition().attr("r",4).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(s).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name))return t})).transition().style("fill","#5975ff").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(s).filter((t=>{if(-1==this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).transition().style("fill","#4cde71").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500);let e=this.B_getPat(t.name,0,this.B_nodes1),a=this.B_getPat(t.name,0,this.B_nodes2);this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:e+" vs "+a,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(s).exit().remove()},ale(){this.$store.commit("objBSplitFlag")},roam(t,e){setTimeout((()=>{this.B_TipRemove()}),1600),this.$store.commit({type:"objBDepth",depth:e,flag:e,rootName:t}),this.$store.commit({type:"userClick",view:"viewB",width:this.widthB,height:this.heightB,obj:"zoom(tree nodes)",name:this.treeData[0]+" vs "+this.treeData[1],value:t,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t,visualKeys:{},data:{industry:t,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("ClickRecordState");let a=h.layout.tree().size([4*this.heightB/5,4*this.widthB/5]),s=h.svg.diagonal().projection((function(t){return[t.y+10,t.x]})),i=a.links(this.B_nodes3);if(this.splited){i=i.filter((t=>{if(-1!=this.D1.indexOf(t.target.name))return t}));let t=a.links(this.B_nodes32);t=t.filter((t=>{if(-1!=this.D2.indexOf(t.target.name))return t}));let e=h.svg.diagonal().projection((function(t){return[t.y,t.x]}));h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).enter().append("circle").attr("class","circles1").style("stroke","black"),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).style("fill","white").attr("r",4).on("click",(()=>{})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes31),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes31)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+":"+t.name,value:t.patent_num,desc:"hover:"+this.treeData[0]+"in"+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0]]:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})).transition().attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if("半导体显示"!=t.name&&t.children&&-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("click",(t=>{this.roam(t.name,t.depth)})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(!t.parent&&"半导体显示"!=t.name)return t})).on("click",(()=>{this.$store.commit({type:"objBDepth",flag:0,depth:0,rootName:"半导体显示"}),this.roam("半导体显示",0)})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name))return t})).transition().style("fill","#5975ff").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,this.B_nodes1)>this.B_getPat(t.name,0,this.B_nodes2))return!0})).attr("r",6),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return!0})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500);let e=this.B_getPat(t.name,0,this.B_nodes1),a=this.B_getPat(t.name,0,this.B_nodes2);this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:e+" vs "+a,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes31).exit().remove(),h.select("#gLinks1").selectAll("path").data(i).enter().append("path").attr("class","links1").style("fill","none").style("stroke","black").style("stroke-width",.5),h.select("#gLinks1").selectAll("path").data(i).transition().attr("d",(function(t){return s(t)})),h.select("#gLinks1").selectAll("path").data(i).exit().remove(),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).enter().append("circle").attr("class","circles2").attr("r",4).style("fill","white").style("stroke","black"),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).style("fill","white").on("click",(()=>{})).on("mouseover",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes32),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes32)})).on("mouseout",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[1]+":"+t.name,value:t.patent_num,desc:"hover:"+this.treeData[1]+"in"+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[1]]:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})).transition().attr("r",4).attr("cx",(t=>t.y)).attr("cy",(t=>t.x)),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if("半导体显示"!=t.name&&t.children&&-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("click",(t=>{this.roam(t.name,t.depth)})),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(!t.parent&&"半导体显示"!=t.name)return t})).on("click",(()=>{this.$store.commit({type:"objBDepth",flag:0,depth:0,rootName:"半导体显示"}),this.roam("半导体显示",0)})),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(-1!=this.D2.indexOf(t.name)&&-1==this.D1.indexOf(t.name))return!0})).transition().style("fill","#4cde71").attr("r",7).attr("cx",(t=>t.y)).attr("cy",(t=>t.x)),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name)&&this.B_getPat(t.name,0,this.B_nodes2)>this.B_getPat(t.name,0,this.B_nodes1))return!0})).attr("r",6),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return!0})).on("mouseover",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2)})).on("mouseout",(t=>{h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500);let e=this.B_getPat(t.name,0,this.B_nodes1),a=this.B_getPat(t.name,0,this.B_nodes2);this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:e+" vs "+a,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles2").selectAll("circle").data(this.B_nodes32).exit().remove(),h.select("#gLinks2").selectAll("path").data(t).enter().append("path").attr("class","links2").style("fill","none").style("stroke","black").style("stroke-width",.5),h.select("#gLinks2").selectAll("path").data(t).attr("d",(function(t){return e(t)})),h.select("#gLinks2").selectAll("path").data(t).exit().remove(),this.createDia(),h.select("#gTag1").selectAll("text").remove(),h.select("#gTag1").selectAll("text").data(this.B_nodes31).enter().append("text").attr("dx",20).attr("dy",this.heightB/2).attr("font-family","sans-serif").attr("font-size","10px").attr("font-weight","bold").style("fill","black").attr("text-anchor","start"),h.select("#gTag1").selectAll("text").data(this.B_nodes31).filter((t=>{if(this.B_nodes31.length<100&&!t.children&&-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name))return t})).transition().attr("dx",(t=>t.y+20)).attr("dy",(t=>t.x+5)).text((t=>t.name)),h.select("#gTag2").selectAll("text").remove(),h.select("#gTag2").selectAll("text").data(this.B_nodes32).enter().append("text").attr("dx",20).attr("dy",this.heightB/2).attr("font-family","sans-serif").attr("font-size","10px").attr("font-weight","bold").style("fill","black").attr("text-anchor","end"),h.select("#gTag2").selectAll("text").data(this.B_nodes32).filter((t=>{if(this.B_nodes32.length<100&&!t.children&&-1==this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).transition().attr("dx",(t=>t.y-10)).attr("dy",(t=>t.x+5)).text((t=>t.name))}else h.select("#gLinks1").selectAll("path").data(i).enter().append("path").attr("class","links1"),h.select("#gLinks1").selectAll("path").data(i).transition().style("fill","none").style("stroke","black").style("stroke-opacity",.5).attr("d",(function(t){return s(t)})),h.select("#gLinks1").selectAll("path").data(i).exit().remove(),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).enter().append("circle").attr("class","circles1").style("stroke","black"),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes3),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTip(t,1,this.B_nodes3)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:t.patent_num,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).on("click",(()=>{})).style("fill","white").attr("r",4).transition().attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if("半导体显示"!=t.name&&t.children&&-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("click",(t=>{this.roam(t.name,t.depth)})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(!t.parent&&"半导体显示"!=t.name)return t})).on("click",(()=>{this.$store.commit({type:"objBDepth",flag:0,depth:0,rootName:"半导体显示"}),this.roam("半导体显示",0)})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1==this.D2.indexOf(t.name))return t})).transition().style("fill","#5975ff").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(-1==this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).transition().style("fill","#4cde71").attr("r",7).attr("cx",(t=>t.y+10)).attr("cy",(t=>t.x)),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((t=>{if(-1!=this.D1.indexOf(t.name)&&-1!=this.D2.indexOf(t.name))return t})).on("mouseover",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","red"),this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.B_TipRemove(),this.B_createTipBar(t,this.B_nodes1,this.B_nodes2)})).on("mouseout",(t=>{h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).filter((e=>e==t)).style("stroke","black"),setTimeout((()=>{this.B_TipRemove()}),1500);let e=this.B_getPat(t.name,0,this.B_nodes1),a=this.B_getPat(t.name,0,this.B_nodes2);this.$store.commit({type:"userMouseout",view:"viewB",width:this.widthB,height:this.heightB,obj:"tips(tree nodes)",name:this.treeData[0]+"vs"+this.treeData[1]+":"+t.name,value:e+" vs "+a,desc:"compare "+this.treeData[0]+" to "+this.treeData[1]+" in "+t.name,data:{industry:t.name,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("OutRecordState")})),h.select("#gCircles1").selectAll("circle").data(this.B_nodes3).exit().remove(),h.select("#gCircles2").selectAll("circle").remove(),h.select("#gLinks2").selectAll("path").remove(),h.select("#gDia").selectAll("line").remove()}},watch:{splited(t){2==this.treeData.length&&(t?(this.split(),this.$store.commit({type:"userClick",view:"viewB",obj:"split(button)",width:this.widthB,height:this.heightB,name:this.treeData[0]+" vs "+this.treeData[1],value:"split:true",desc:"split view of"+this.treeData[0]+" and "+this.treeData[1],data:{industry:this.rootName,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("ClickRecordState")):(this.merge(),this.$store.commit({type:"userClick",view:"viewB",width:this.widthB,height:this.heightB,obj:"split(button)",name:this.treeData[0]+" vs "+this.treeData[1],value:"split:false",desc:"merged view of"+this.treeData[0]+" and "+this.treeData[1],visualKeys:{},data:{industry:this.rootName,company:"company"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],this.treeData[1]]:[],attribute:"comparison"}}),this.$store.commit("ClickRecordState"))),t?(h.select("#splitBtn").select("rect").transition().style("fill","#1ee710"),h.select("#splitBtn").select("circle").transition().attr("cx",70)):(h.select("#gTag1").selectAll("text").remove(),h.select("#gTag2").selectAll("text").remove(),h.select("#splitBtn").select("rect").transition().style("fill","#939393"),h.select("#splitBtn").select("circle").transition().attr("cx",45))},showBtn(t){t?(h.select("#splitBtn").style("display","inline"),h.select("#reportBtn").style("display","inline")):(h.select("#splitBtn").style("display","none"),h.select("#reportBtn").style("display","none"))},rootName(t){h.select("#Btitle").text(t+"产业树对比图")},reportFlag(t){t?(this.B_report(),h.select("#reportBtn").select("rect").transition().style("fill","#1ee710"),h.select("#reportBtn").select("circle").transition().attr("cx",70)):(this.B_TipRemove(),h.select("#reportBtn").select("rect").transition().style("fill","#939393"),h.select("#reportBtn").select("circle").transition().attr("cx",45))},treeD(){this.splited&&this.$store.commit("objBSplitFlag"),this.createNewTree(),this.treeData[0]?(h.select("#Btitle").style("display","inline"),h.select("#Bleft").text(this.treeData[0]),this.treeData[1]?(h.select("#Bright").text(this.treeData[1]),this.storyFlag=!0,h.select):(h.select("#gCircles2").selectAll("circle").remove(),h.select("#gLinks2").selectAll("path").remove(),h.select("#gDia").selectAll("line").remove(),h.select("#Bright").text(""),this.createNewTree(),this.storyFlag=!1)):(h.select("#Bleft").text(""),h.select("#Bright").text(""),h.select("#Btitle").style("display","none"),this.storyFlag=!1)},storyFlag(t){t?(h.select("#Bbtn").style("display","inline"),this.storyIndex=1):(h.select("#Bbtn").style("display","none"),h.select("#svgB2").selectAll(".storyText").remove(),this.storyIndex=0)},storyIndex(t){1==t?this.appendStory(this.story_text,this.B_nodes1,"red",this.treeData[0],this.story.list,35,25,this.widthB-110,14,"simsun",this.D1,1,this.B_nodes31):2==t?this.appendStory(this.story_text,this.B_nodes2,"blue",this.treeData[1],this.story.list,35,25,this.widthB-110,14,"simsun",this.D2,2,this.B_nodes32):0==t&&h.select("#svgB2").selectAll(".storyText").remove()}}};w.render=_,w.__scopeId="data-v-25868297";var D=w,b={name:"App2",components:{componentB:D},data(){return{heightB:1*this.$store.state.height+10,widthB:.4*this.$store.state.width}},mounted(){this.$store.commit({type:"changeApp",app:"app2",width:this.widthB,height:this.heightB,top:15,left:.3*this.$store.state.width+30})}};b.render=u;var k=b;function A(t,e,a,s,r,l){const n=(0,i.up)("componentC");return(0,i.wg)(),(0,i.j4)(n)}var T=a(577);(0,i.dD)("data-v-25965f1f");const C={id:"svgC"},$={id:"txt"},F=["y"],j=["dy"];function S(t,e,a,s,r,l){return(0,i.wg)(),(0,i.iD)("svg",C,[(0,i._)("text",$,"Select Mode:"+(0,T.zw)(l.matrixFlag),1),(0,i._)("rect",{x:"0",y:r.heightC-50,height:"50",width:"60",fill:"orange"},null,8,F),(0,i._)("text",{dx:"30",dy:r.heightC-17,"text-anchor":"middle",fill:"white","font-size":"25","font-weight":"bold"},"D ",8,j)])}(0,i.Cn)();var L={name:"componentC",data(){return{heightC:.4*this.$store.state.height,widthC:.3*this.$store.state.width,hovered:"",nodesLength:0}},mounted(){this.$store.commit({type:"appendBtn",svgID:"svgC",btnID:"Cbtn",width:this.widthC,text:"switch"}),h.select("#svgC").select("#Cbtn").on("click",(()=>{"tree"==this.matrixFlag?this.$store.commit({type:"changeMatrixFlag",flag:"matrix"}):this.$store.commit({type:"changeMatrixFlag",flag:"tree"})})).style("display","none"),h.select("#txt").attr("dy",70).attr("dx",this.widthC-150).style("display","none"),h.select("#svgC").attr("width",this.widthC).attr("height",this.heightC),this.$store.commit({type:"appendTitle",id:"CTitle",class:"classC",svg:"svgC",dx:"24px",dy:"36px",size:"20px"}),h.select("#CTitle").style("display","none"),d().get("china.sea.json").then((t=>{this.$store.commit({type:"Cseajson",seajson:t})})).then((()=>{this.createSea()})),d().get("china.geo.json").then((t=>{this.$store.commit({type:"Cgeojson",geojson:t})})).then((()=>{this.createMap()})),h.select("#svgC").append("g").attr("id","Csea").style("display","none"),h.select("#svgC").append("g").attr("id","Cmap").style("display","none")},computed:{C_province(){let t=[],e=[],a=0;for(let s=0;s<this.data_overall.length;s++)this.data_overall[s].name1!=this.selected&&this.data_overall[s].name2!=this.selected&&this.data_overall[s].name3!=this.selected&&this.data_overall[s].name4!=this.selected&&this.data_overall[s].name5!=this.selected&&this.data_overall[s].name6!=this.selected&&this.data_overall[s].name7!=this.selected&&this.data_overall[s].name8!=this.selected||e.push(this.data_overall[s]);for(let s=0;s<this.geojson.data.features.length;s++)t.push({name:this.geojson.data.features[s].properties.name,pat_num:0,pat_pro:0});for(let s=0;s<e.length;s++)for(let a=0;a<t.length;a++)e[s].province.substring(0,2)==t[a].name.substring(0,2)&&(t[a].pat_num+=parseInt(e[s].patent_num));for(let s=0;s<t.length;s++)a+=t[s].pat_num;for(let s=0;s<t.length;s++)t[s].pat_pro=t[s].pat_num/a;return t},matrixElement1(){return this.matrixElement+"1"},matrixElement(){return this.$store.state.matrixElement},matrixFlag(){return this.$store.state.matrixFlag},treeD(){return this.treeData+"1"},treeData(){return this.$store.state.objB.treeData},seajson(){return this.$store.state.objC.seajson},geojson(){return this.$store.state.objC.geojson},data_overall(){return this.$store.state.data_overall},leaf(){return this.$store.state.leaf},selected(){return this.$store.state.selected},colorScale(){return h.scale.linear().domain([0,.5]).range(["#c8ccf9","#00007f"])}},methods:{C_TipRemove(){h.select("#svgC").selectAll(".tips").remove()},C_createTip(t){function e(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}let a=e(event),s=h.select("#svgC");s.append("rect").attr("id","tipBack").attr("class","tips").attr("x",a.x+10).attr("y",a.y-30).style("width",t.properties.name.length>8?15*t.properties.name.length+10:140).attr("rx",20),s.append("text").attr("class","tips").attr("dx",a.x+20).attr("dy",a.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(this.transform(t.properties.name)),s.append("text").attr("class","tips").attr("dx",a.x+20).attr("dy",a.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text((()=>{for(let e=0;e<this.C_province.length;e++)if(t.properties.name==this.C_province[e].name)return"专利份额:"+this.C_province[e].pat_pro.toFixed(4)}))},transform(t){for(let e=0;e<this.$store.state.province.length;e++)if(this.$store.state.province[e].substring(0,2)==t.substring(0,2))return this.$store.state.province[e]},createSea(){var t=h.geo.mercator().center([113,29]).scale(350/1900*this.$store.state.width).translate([this.widthC/2,3*this.heightC/5]),e=h.geo.path().projection(t);h.select("#Csea").selectAll("path").data(this.seajson.data.features).enter().append("path").attr("class","path2").style("fill","white").style("stroke","black").style("stroke-width",1).attr("d",e)},getPatPro(t){for(let e=0;e<this.C_province.length;e++)if(t.properties.name==this.C_province[e].name)return this.C_province[e].pat_pro},createMap(){var t=h.geo.mercator().center([113,29]).scale(350/1900*this.$store.state.width).translate([this.widthC/2,3*this.heightC/5]),e=h.geo.path().projection(t);let a=h.select("#svgC"),s=h.select("#svgC").append("defs"),i=s.append("linearGradient").attr("id","linearColor4").attr("x1","0%").attr("y1","100%").attr("x2","0%").attr("y2","0%");i.append("stop").attr("offset","0%").style("stop-color","#ffffff"),i.append("stop").attr("offset","100%").style("stop-color","#00007f");let r=a.append("g").attr("id","Clgd").style("display","none").attr("transform","translate("+[0,20]+")");r.append("rect").attr("class","lgdC").attr("x",9*this.widthC/10+3).attr("y",this.heightC/5).attr("rx",6).attr("width",12).attr("height",3*this.heightC/5).style("fill","url(#"+i.attr("id")+")"),r.append("text").attr("class","lgdC").attr("font-family","sans-serif").style("font-size",15).style("font-weight","bold").attr("text-anchor","middle").attr("dx",9*this.widthC/10+10).attr("dy",this.heightC/5-5).text(.5),r.append("text").attr("class","lgdC").attr("font-family","sans-serif").style("font-size",15).style("font-weight","bold").attr("text-anchor","middle").attr("dx",9*this.widthC/10+10).attr("dy",this.heightC/5*4+15).text(0),h.select("#Cmap").selectAll("path").data(this.geojson.data.features).enter().append("path").attr("class","path1").style("fill","white").style("stroke","black").style("stroke-width",.2).attr("d",e).on("mouseover",(t=>{this.hovered=t.properties.name,this.C_TipRemove(),this.C_createTip(t),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.C_TipRemove(),this.C_createTip(t)})).on("mouseout",(t=>{this.hovered="";let e=this.getPatPro(t);setTimeout((()=>{this.C_TipRemove()}),1300),this.$store.commit({type:"userMouseout",view:"viewC",obj:"tips(province)",width:this.widthC,height:this.heightC,name:this.transform(t.properties.name)+":"+this.selected,value:e,desc:"hover province:  in "+this.transform(t.properties.name),data:{industry:this.selected,company:[],province:[this.transform(t.properties.name)],attribute:"proportion"}}),this.$store.commit("OutRecordState")})).on("click",(t=>{let e=this.getPatPro(t);this.$store.commit({type:"elementClear",flag:"province"}),this.$store.commit({type:"userClick",view:"viewC",width:this.widthC,height:this.heightC,obj:"select province",name:this.transform(t.properties.name)+":"+this.selected,value:e,desc:"select province:"+this.transform(t.properties.name),visualKeys:{},data:{industry:this.selected,company:[],province:[this.transform(t.properties.name)],attribute:"proportion"}}),this.$store.commit("ClickRecordState"),"tree"==this.matrixFlag?this.$store.commit({type:"updateTreeData",name:this.transform(t.properties.name)}):this.$store.commit({type:"changeMatrixElement",element:this.transform(t.properties.name)})}))},C_update(){h.select("#Cmap").selectAll(".path1").data(this.geojson.data.features).style("stroke-width",.2).transition().style("stroke-width",.2).style("fill",(t=>{for(let e=0;e<this.C_province.length;e++)if(t.properties.name==this.C_province[e].name)return 0==this.C_province[e].pat_pro?"white":this.colorScale(this.C_province[e].pat_pro)}))},inData(t,e){let a=this.transform(t.properties.name);return-1!=e.indexOf(a)}},watch:{selected(t){h.select("#Cmap").style("display","inline"),h.select("#Csea").style("display","inline"),h.select("#Clgd").style("display","inline"),h.select("#CTitle").style("display","inline").text(t+"产业地区分布图"),h.select("#Cbtn").style("display","inline"),h.select("#svgC").select("#txt").style("display","inline"),this.C_update()},treeD(){h.select("#svgC").selectAll(".path1").filter((t=>this.inData(t,this.treeData))).style("fill","#06ddf4"),h.select("#svgC").selectAll(".path1").filter((t=>!this.inData(t,this.treeData))).style("fill",(t=>{for(let e=0;e<this.C_province.length;e++)if(t.properties.name==this.C_province[e].name)return 0==this.C_province[e].pat_pro?"white":this.colorScale(this.C_province[e].pat_pro)}))},hovered(t){h.select("#Cmap").selectAll(".path1").data(this.geojson.data.features).filter((e=>t==e.properties.name||this.inData(e,this.treeData))).style("fill","#06ddf4"),h.select("#Cmap").selectAll(".path1").data(this.geojson.data.features).filter((e=>t!=e.properties.name&&!this.inData(e,this.treeData))).style("fill",(t=>{for(let e=0;e<this.C_province.length;e++)if(t.properties.name==this.C_province[e].name)return 0==this.C_province[e].pat_pro?"white":this.colorScale(this.C_province[e].pat_pro)}))},matrixElement1(){h.select("#svgC").selectAll(".path1").filter((t=>this.inData(t,this.matrixElement))).style("stroke","red").style("stroke-width",1),h.select("#svgC").selectAll(".path1").filter((t=>!this.inData(t,this.matrixElement))).style("stroke","black").style("stroke-width",.2)}}};L.render=S,L.__scopeId="data-v-25965f1f";var O=L,M={name:"App3",components:{componentC:O},data(){return{heightC:.4*this.$store.state.height,widthC:.3*this.$store.state.width}},mounted(){this.$store.commit({type:"changeApp",app:"app3",width:this.widthC,height:this.heightC,top:15,left:.7*this.$store.state.width+30+10})}};M.render=A;var z=M;function R(t,e,a,s,r,l){const n=(0,i.up)("componentD");return(0,i.wg)(),(0,i.j4)(n)}(0,i.dD)("data-v-754c12f2");const N={id:"svgD"},P={id:"txD"},I=["y"],E=["dy"];function Y(t,e,a,s,r,l){return(0,i.wg)(),(0,i.iD)("svg",N,[(0,i._)("text",P,"Select Mode:"+(0,T.zw)(l.matrixFlag),1),(0,i._)("rect",{x:"0",y:r.heightD-50,height:"50",width:"60",fill:"orange"},null,8,I),(0,i._)("text",{dx:"30",dy:r.heightD-17,"text-anchor":"middle",fill:"white","font-size":"25","font-weight":"bold"},"B ",8,E)])}(0,i.Cn)();var X={name:"componentD",data(){return{heightD:.5*this.$store.state.height,widthD:.3*this.$store.state.width,hovered:"",nodesLength:0}},mounted(){h.select("#txD").attr("dy",70).attr("dx",this.widthD-150).style("display","none"),h.select("#svgD").attr("width",this.widthD).attr("height",this.heightD),this.$store.commit({type:"appendTitle",id:"DTitle",class:"classD",svg:"svgD",dx:"24px",dy:"36px",size:"20px"}),this.$store.commit({type:"appendBtn",svgID:"svgD",btnID:"Dbtn",width:this.widthD,text:"switch"}),h.select("#svgD").select("#Dbtn").on("click",(()=>{"tree"==this.matrixFlag?this.$store.commit({type:"changeMatrixFlag",flag:"matrix"}):this.$store.commit({type:"changeMatrixFlag",flag:"tree"})})).style("display","none")},computed:{matrixElement1(){return this.matrixElement+"1"},matrixElement(){return this.$store.state.matrixElement},matrixFlag(){return this.$store.state.matrixFlag},treeTypeFlag(){return this.$store.state.treeTypeFlag},treeD(){return this.treeData+"1"},treeData(){return this.$store.state.objB.treeData},circled(){return this.$store.state.objD.circled},circledLength(){return this.circled.length},D_title(){return this.$store.state.objD.title},data_overall(){return this.$store.state.data_overall},leaf(){return this.$store.state.leaf},selected(){return this.$store.state.selected},colorScale(){return h.scale.linear().domain([0,this.nodesLength]).range(["#aaa7aa","#4e7f78"])}},methods:{D_TipRemove(){h.select("#svgD").selectAll(".tips").remove()},D_createTip(t){function e(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}let a=e(event);h.select("#svgD").append("rect").attr("id","tipBack").attr("class","tips").attr("x",a.x+10).attr("y",a.y-30).style("width",15*t.name.length+10).attr("rx",20),h.select("#svgD").append("text").attr("class","tips").attr("dx",a.x+20).attr("dy",a.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("company ***"),h.select("#svgD").append("text").attr("class","tips").attr("dx",a.x+20).attr("dy",a.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text("专利数:"+t.patent_num)},inner(t){let e,a=[],s=[],i="",r="";for(let h=0;h<this.data_overall.length;h++)(this.data_overall[h].name2==t||this.data_overall[h].name3==t||this.data_overall[h].name4==t||this.data_overall[h].name5==t||this.data_overall[h].name6==t||this.data_overall[h].name7==t||this.data_overall[h].name8==t)&&(s.push({name:this.data_overall[h].comp_name,patent_num:this.data_overall[h].patent_num}),i=h+1);for(var l=0;l<this.data_overall.length;l++)if(i==this.data_overall[l].id){r=this.data_overall[l].industry_name;break}a={name:t,children:s},console.log("indname"+r);let n=.65*this.widthD,o=h.layout.pack().size([n,n]).value((function(t){return t.patent_num}));e=o.nodes(a),this.nodesLength=e.length,e.sort((function(t,e){return t.patent_num-e.patent_num})),h.select("#svgD").selectAll("circle").data(e).enter().append("circle").attr("class","classD").attr("id",(function(t){return t.name})),h.select("#svgD").selectAll("circle").data(e).attr("transform","translate(70,50)").attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("r",(function(t){return t.r})).on("mouseover",(t=>{this.hovered=t.name,this.D_TipRemove(),this.D_createTip(t),this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.D_TipRemove(),this.D_createTip(t)})).on("mouseout",(t=>{this.hovered="",setTimeout((()=>{this.D_TipRemove()}),1500),this.$store.commit({type:"userMouseout",view:"viewD",width:this.widthD,height:this.heightD,obj:"tips(company)",name:t.name+":"+this.selected,value:t.patent_num,desc:"hover company"+t.name,data:{industry:this.selected,company:[t.name],province:[],attribute:"patent_num"}}),this.$store.commit("OutRecordState")})).on("click",(t=>{this.$store.commit({type:"elementClear",flag:"company"}),this.$store.commit({type:"clearStatesB",flag:"company"}),this.$store.commit({type:"userClick",view:"viewD",width:this.widthD,height:this.heightD,obj:"select company",name:t.name+":"+this.selected,value:t.patent_num,desc:"select company"+t.name,visualKeys:{},data:{industry:this.selected,company:[t.name],province:[],attribute:"patent_num"}}),this.$store.commit("ClickRecordState"),"tree"==this.matrixFlag?this.$store.commit({type:"updateTreeData",name:t.name}):this.$store.commit({type:"changeMatrixElement",element:t.name})})).style("stroke","none").style("stroke-width",2).style("fill","white").transition().delay((function(t,e){return e+3*t.r})).duration(500).style("fill",((t,e)=>t.patent_num?this.colorScale(e):"none")),h.select("#svgD").selectAll("circle").data(e).exit().remove()},ale(){}},watch:{leaf(t){t?(this.inner(this.selected),h.select("#Dbtn").style("display","inline"),h.select("#txD").style("display","inline")):(h.select("#svgD").selectAll("circle").remove(),h.select("#DTitle").text(""),h.select("#Dbtn").style("display","none"),h.select("#txD").style("display","none"))},selected(t){this.leaf&&this.inner(t)},D_title(t){this.leaf&&h.select("#DTitle").text(t+"产业包含企业情况")},hovered(t){h.select("#svgD").selectAll("circle").filter((e=>e.name!=t)).style("fill",((t,e)=>t.patent_num?this.colorScale(e):"none")),h.select("#svgD").selectAll("circle").filter((t=>-1!=this.treeData.indexOf(t.name))).style("fill","#25f4ff"),h.select("#svgD").selectAll("circle").filter((e=>e.name==t&&0!=e.depth)).style("fill","red")},treeD(){h.select("#svgD").selectAll("circle").filter((t=>-1!=this.treeData.indexOf(t.name))).style("fill","#25f4ff"),h.select("#svgD").selectAll("circle").filter((t=>-1==this.treeData.indexOf(t.name))).style("fill",((t,e)=>t.patent_num?this.colorScale(e):"none"))},matrixElement1(){h.selectAll("#svgD").selectAll("circle").filter((t=>{if(-1!=this.matrixElement.indexOf(t.name))return!0})).style("stroke","red"),h.selectAll("#svgD").selectAll("circle").filter((t=>{if(-1==this.matrixElement.indexOf(t.name))return!0})).style("stroke","none")}}};X.render=Y,X.__scopeId="data-v-754c12f2";var G=X,H={name:"App4",components:{componentD:G},data(){return{heightD:.5*this.$store.state.height,widthD:.3*this.$store.state.width}},mounted(){this.$store.commit({type:"changeApp",app:"app4",width:this.widthD,height:this.heightD,top:.5*this.$store.state.height+25,left:20})}};H.render=R;var q=H;function K(t,e,a,r,l,n){const o=(0,i.up)("graphNew"),h=(0,i.up)("storyText");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.wy)((0,i.Wm)(o,null,null,512),[[s.F8,n.graphBtn]]),n.graphBtn&&this.$store.state.story.btn?((0,i.wg)(),(0,i.j4)(h,{key:0})):(0,i.kq)("",!0)],64)}const W=["height","width"],U=["x","fill"],J=["dx"],Q=["x","fill"],V=["dx"],Z=["x","fill"],tt=["dx"],et=["transform"],at={id:"outerLinks"},st={key:0,id:"outerCircle"},it=["d","fill","transform"],rt=["cx","cy","fill","onMouseover","onClick"],lt={id:"innerLinks"},nt=(0,i._)("g",{id:"innerGraph"},null,-1),ot={key:0,id:"tip"},ht=["width","x","y"],ct=["dx","dy"],dt=["dx","dy"],pt=["dx","dy"],mt=["dx","dy"],gt=["scr"],ft={key:1,id:"tip"},ut=["width","x","y"],yt=["dx","dy"],xt=["dx","dy"],vt=["dx","dy"],Bt=["dx","dy"];function _t(t,e,a,r,l,n){return(0,i.wg)(),(0,i.iD)("svg",{id:"graphSvg",height:l.svgConfig.height,width:l.svgConfig.width,onClick:e[4]||(e[4]=t=>n.log())},[(0,i._)("g",{onClick:e[0]||(e[0]=t=>l.innerLinkFlag=!l.innerLinkFlag)},[(0,i._)("rect",{id:"btnIndexLink",x:l.svgConfig.width-110,y:20,fill:l.innerLinkFlag?"#5aeaf1":"lightgrey"},null,8,U),(0,i._)("text",{dx:l.svgConfig.width-65,dy:45,fill:"black","text-anchor":"middle"}," inner link ",8,J)]),(0,i._)("g",{onClick:e[1]||(e[1]=t=>l.outerLinkFlag=!l.outerLinkFlag)},[(0,i._)("rect",{id:"btnIndexLink",x:l.svgConfig.width-210,y:20,fill:l.outerLinkFlag?"#5aeaf1":"lightgrey"},null,8,Q),(0,i._)("text",{dx:l.svgConfig.width-165,dy:45,fill:"black","text-anchor":"middle"}," outer link ",8,V)]),(0,i._)("g",{onClick:e[2]||(e[2]=t=>(this.$store.commit("changeStoryBtn"),this.$store.commit({type:"changeStoryText",text:n.storyTest})))},[(0,i._)("rect",{id:"btnIndexLink",x:l.svgConfig.width-310,y:20,fill:this.$store.state.story.btn?"#5aeaf1":"lightgrey"},null,8,Z),(0,i._)("text",{dx:l.svgConfig.width-265,dy:45,fill:"black","text-anchor":"middle"}," Show story ",8,tt)]),(0,i._)("g",{id:"graph",transform:"translate("+[.2*-l.svgConfig.width,0]+")"},[(0,i.wy)((0,i._)("g",at,null,512),[[s.F8,l.outerLinkFlag]]),n.actionList.length>4?((0,i.wg)(),(0,i.iD)("g",st,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.arcData,((t,e)=>((0,i.wg)(),(0,i.iD)("path",{key:e,d:n.arc(t,e),fill:t.color,"fill-opacity":"0.8",transform:"translate("+[l.svgConfig.width/2,l.svgConfig.height/2]+")"},null,8,it)))),128)),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.actionNodes,((t,a)=>((0,i.wg)(),(0,i.iD)("circle",{key:a,cx:t.xy[0],cy:t.xy[1],r:"10",fill:l.color(t.data.view),stroke:"white",onMouseover:e=>(n.outerTip(t),n.outerHighlight(t)),onMouseout:e[3]||(e[3]=t=>(l.hover.flag=!1,n.outerOut())),onClick:e=>n.rebuildState(t.states)},null,40,rt)))),128))])):(0,i.kq)("",!0),(0,i.wy)((0,i._)("g",lt,null,512),[[s.F8,l.innerLinkFlag]]),nt],8,et),l.hover.flag&&"outer"==l.hover.type?((0,i.wg)(),(0,i.iD)("g",ot,[(0,i._)("rect",{height:"180",width:l.hover.data.data.desc.length>20?12*(l.hover.data.data.desc.length+4):300,fill:"black","fill-opacity":"0.7",x:l.XY[0]+10-.2*l.svgConfig.width,y:l.XY[1]-30,rx:"20"},null,8,ht),(0,i._)("text",{fill:"white",dx:l.XY[0]+20-.2*this.svgConfig.width,dy:l.XY[1]-5},(0,T.zw)(l.hover.data.data.desc),9,ct),(0,i._)("text",{fill:"white",dx:l.XY[0]+20-.2*this.svgConfig.width,dy:l.XY[1]+15},"Interaction: "+(0,T.zw)(l.hover.data.data.obj),9,dt),(0,i._)("text",{fill:"white",dx:l.XY[0]+20-.2*this.svgConfig.width,dy:l.XY[1]+35},"View: "+(0,T.zw)(l.hover.data.data.view.substring(l.hover.data.data.view.length-1,l.hover.data.data.view.length)),9,pt),(0,i._)("text",{fill:"white",dx:l.XY[0]+20-.2*this.svgConfig.width,dy:l.XY[1]+55},"Time stamp: "+(0,T.zw)(l.hover.data.data.timeStamp.toFixed(2)),9,mt),(0,i._)("img",{scr:l.hover.data.data.pic},null,8,gt)])):(0,i.kq)("",!0),l.hover.flag&&"inner"==l.hover.type?((0,i.wg)(),(0,i.iD)("g",ft,[(0,i._)("rect",{height:"100",width:l.hover.data.name.length>10?15*(l.hover.data.name.length+5)+10:230,fill:"black","fill-opacity":"0.7",x:l.XY[0]+10,y:l.XY[1]-30,rx:"20"},null,8,ut),(0,i._)("text",{fill:"white",dx:l.XY[0]+20,dy:l.XY[1]-5},"Name: "+(0,T.zw)(l.hover.data.name),9,yt),(0,i._)("text",{fill:"white",dx:l.XY[0]+20,dy:l.XY[1]+15},"Type: "+(0,T.zw)(l.hover.data.type),9,xt),(0,i._)("text",{fill:"white",dx:l.XY[0]+20,dy:l.XY[1]+35},"Count: "+(0,T.zw)(l.hover.data.count),9,vt),(0,i._)("text",{fill:"white",dx:l.XY[0]+20,dy:l.XY[1]+55},"Duration: "+(0,T.zw)(l.hover.data.dura),9,Bt)])):(0,i.kq)("",!0)],8,W)}var wt={name:"graphNew",data(){return{color:h.scale.category10(),svgConfig:{height:.95*this.$store.state.height,width:.95*this.$store.state.width,backgroundColor:"black",opacity:.8},innerLinkFlag:!0,outerLinkFlag:!0,hover:{flag:!1,data:{},type:"inner"},XY:[],storyBtn:!1}},mounted(){},computed:{nCluster(){let t=[];for(let e=0;e<this.cluster.length;e++){let a=this.cluster[e],s={};s["nodes"]=a.nodes,s["count"]=a.count,s["time"]=a.time,this.diction[e]>=0?s["desc"]=this.diction[e]:s["desc"]=null,t.push(s)}return t},diction(){let t={};for(let e=0;e<this.cluster.length;e++){let a=this.cluster[e].nodes;if(a.length<5){let s=[];for(let t of a)s.push(t.name);for(let a=0;a<this.actToData.length;a++){let i=!0;for(let t of this.actToData[a])-1===s.indexOf(t)&&(i=!1);if(1==i){t[e]=a;break}}}}return t},actToData(){let t=[];for(let e=0;e<this.actionNodes.length;e++){let a=this.actionNodes[e].data.data,s=[];a.attribute&&s.push(a.attribute),a.industry&&s.push(a.industry);for(let t of a.company)s.push(t);for(let t of a.province)s.push(t);t.push(s)}return t},imgStory(){let t=[];for(let e=0;e<this.actionNodes.length;e++)t.push(this.actionNodes[e].data.desc);return t},storyTest(){let t=[];for(let e=0;e<this.newCluster.length;e++)if(0===e){let a,s={},i=this.getStory(this.newCluster[e].parent);1==i.length?a="The user is most concerned about "+i[0]+".":2==i.length&&(a="The user is most concerned about "+i[0]+" and "+i[1]+"."),s["main"]=a,s["sub"]=[];for(let t=0;t<this.newCluster[e].son.length;t++){let a=this.newCluster[e].son[t];a.desc>=0&&s["sub"].push({id:a.desc,desc:this.imgStory[a.desc]})}t.push(s)}else if(e>=1){let a,s={},i=this.getStory(this.newCluster[e].parent);1==i.length?a="The user is also concerned about "+i[0]+".":2==i.length&&(a="The user is also concerned about "+i[0]+" and "+i[1]+"."),s["main"]=a,s["sub"]=[];for(let t=0;t<this.newCluster[e].son.length;t++){let a=this.newCluster[e].son[t];a.desc>=0&&s["sub"].push({id:a.desc,desc:this.imgStory[a.desc]})}t.push(s)}return t},storyPieces(){let t=[];for(let e=0;e<this.cluster.length;e++)t.push(this.getStory(this.cluster[e]));return t},newCluster(){let t=[],e=[];for(let a=0;a<this.nCluster.length-1;a++){let s=[];for(let t=a+1;t<this.nCluster.length;t++)this.judgeSub(this.nCluster[a],this.nCluster[t])&&(s.push(this.nCluster[t]),e.push(t));-1==e.indexOf(a)&&t.push({parent:this.nCluster[a],son:s})}return t},lenScale(){return h.scale.linear().domain([0,this.maxWeight]).range([5,75])},maxWeight(){let t=0;for(let e=0;e<this.cluster.length;e++){let a=this.getWeight(this.cluster[e]);a>t&&(t=a)}return t},linkDistance(){return this.dataNodes.length<10?200:this.dataNodes.length<20?150:this.dataNodes.length<30?100:50},community(){let t=[];for(let e=0;e<this.dataNodes.length;e++){let e=[];for(let t=0;t<this.cluster.length;t++)e.push(0);t.push(e)}for(let e=0;e<this.cluster.length;e++)for(let a=0;a<this.cluster[e].nodes.length;a++){let s=this.cluster[e].nodes[a].index,i=e;t[s][i]=1}return t},cluster(){let t=[],e=[];for(let a=0;a<this.dataNodes.length;a++){let s=!1,i=!1;if("attribute"!=this.dataNodes[a].type){let r=[this.dataNodes[a]],l=this.dataNodes[a].dura,n=this.dataNodes[a].count,o=[a];for(let t=0;t<this.dataLinks.length;t++)this.dataLinks[t].i==a&&("company"==this.dataNodes[this.dataLinks[t].j].type&&(i=!0),"province"==this.dataNodes[this.dataLinks[t].j].type&&(s=!0),r.push(this.dataNodes[this.dataLinks[t].j]),o.push(this.dataLinks[t].j),l+=this.dataNodes[this.dataLinks[t].j].dura,n+=this.dataNodes[this.dataLinks[t].j].count),this.dataLinks[t].j==a&&("company"==this.dataNodes[this.dataLinks[t].i].type&&(i=!0),"province"==this.dataNodes[this.dataLinks[t].i].type&&(s=!0),r.push(this.dataNodes[this.dataLinks[t].i]),o.push(this.dataLinks[t].i),l+=this.dataNodes[this.dataLinks[t].i].dura,n+=this.dataNodes[this.dataLinks[t].j].count);o.sort();let h=o.join("+");-1!=e.indexOf(h)||i&&s||(e.push(h),t.push({nodes:r,count:n,time:l}))}}return t.sort(((t,e)=>this.getWeight(e)-this.getWeight(t))),t},adjMatrix(){let t=[],e=this.dataNodes.length;var a=(t,e,a)=>{if(t==e)return 0;for(let s=0;s<a.length;s++)if(a[s].i==t&&a[s].j==e||a[s].i==e&&a[s].j==t)return a[s].weight;return 0};for(let s=0;s<e;s++){let i=[];for(let t=0;t<e;t++)i.push(a(s,t,this.dataLinks));t.push(i)}return t},arc(){return h.svg.arc().outerRadius(this.svgConfig.height/2-18).innerRadius(this.svgConfig.height/2-22)},arcData(){let t=2*Math.PI*350/360,e=this.actionList[this.actionList.length-1].timeStamp,a=[];for(let s=0;s<this.actionList.length-1;s++)a.push({startAngle:this.actionList[s].timeStamp/e*t,endAngle:this.actionList[s+1].timeStamp/e*t,color:this.color(this.actionList[s].view)});return a},force(){return h.layout.force().size([this.svgConfig.width,this.svgConfig.height]).on("tick",this.tick).gravity(.1).charge(-1e3).friction(.85)},actionList(){return this.$store.state.user.actionList},visualStates(){return this.$store.state.visualStates},visualList(){return this.$store.state.visualList},screenShot(){return this.$store.state.screenShot},selected(){return this.$store.state.selected},actionNodes(){if(this.actionList.length<2)return[];{let e=[this.svgConfig.width/2,this.svgConfig.height/2],a=this.actionList[this.actionList.length-1].timeStamp,s=2*Math.PI*350/360,i=this.svgConfig.height/2-20;var t=(t,a,s,i)=>{let r=t.timeStamp/s*i;return[e[0]+a*Math.sin(r),e[1]-a*Math.cos(r)]};let r=[];for(let l=0;l<this.actionList.length;l++)r.push({xy:t(this.actionList[l],i,a,s),data:this.actionList[l],states:this.visualList[l+1]});return r}},dataNodes(){let t=[];if(this.actionList.length<2)return t;{let s=[];for(let t=0;t<this.actionList.length;t++){if(""!=this.actionList[t].data.industry&&s.push({name:this.actionList[t].data.industry,type:"industry",time:t<this.actionList.length-1?this.actionList[t+1].timeStamp-this.actionList[t].timeStamp:10}),this.actionList[t].data.company.length>0)for(let e=0;e<this.actionList[t].data.company.length;e++)s.push({name:this.actionList[t].data.company[e],type:"company",time:t<this.actionList.length-1?this.actionList[t+1].timeStamp-this.actionList[t].timeStamp:10});if(this.actionList[t].data.province.length>0)for(let e=0;e<this.actionList[t].data.province.length;e++)s.push({name:this.actionList[t].data.province[e],type:"province",time:t<this.actionList.length-1?this.actionList[t+1].timeStamp-this.actionList[t].timeStamp:10});""!=this.actionList[t].data.attribute&&s.push({name:this.actionList[t].data.attribute,type:"attribute",time:t<this.actionList.length-1?this.actionList[t+1].timeStamp-this.actionList[t].timeStamp:10})}let i=[];var e=(t,e)=>{let a=0;for(let s=0;s<e.length;s++)e[s].name==t&&a++;return a},a=(t,e)=>{let a=0;for(let s=0;s<e.length;s++)e[s].name==t&&(a+=e[s].time);return parseFloat(a.toFixed(2))};let r=0;for(let l=0;l<s.length;l++)-1==i.indexOf(s[l].name)&&(i.push(s[l].name),t.push({index:r,name:s[l].name,type:s[l].type,count:e(s[l].name,s),dura:a(s[l].name,s)}),r++);return t}},dataNodes2(){return this.dataNodes.length},dataLinks(){let t=[];if(this.actionList.length<2)return[];var e=(t,e,a)=>{for(let s=0;s<a.length;s++)if(a[s].source.name==t&&a[s].target.name==e||a[s].source.name==e&&a[s].target.name==t)return s;return"notIn"},a=(t,e)=>{for(let a=0;a<e.length;a++)if(e[a].name==t)return a};for(let s=0;s<this.actionNodes.length;s++){let i=[];if(""!=this.actionList[s].data.industry&&i.push(this.actionList[s].data.industry),this.actionList[s].data.company.length>0)for(let t=0;t<this.actionList[s].data.company.length;t++)i.push(this.actionList[s].data.company[t]);if(this.actionList[s].data.province.length>0)for(let t=0;t<this.actionList[s].data.province.length;t++)i.push(this.actionList[s].data.province[t]);""!=this.actionList[s].data.attribute&&i.push(this.actionList[s].data.attribute);for(let s=0;s<i.length-1;s++)for(let r=s+1;r<i.length;r++)"notIn"==e(i[s],i[r],t)&&i[s]!=i[r]?t.push({source:this.dataNodes[a(i[s],this.dataNodes)],target:this.dataNodes[a(i[r],this.dataNodes)],weight:1,i:a(i[s],this.dataNodes),j:a(i[r],this.dataNodes)}):t[e(i[s],i[r],t)].weight++}return t},interactionLinks(){let t=[];if(this.actionList.length<2)return[];var e=(t,e)=>{for(let a=0;a<e.length;a++)if(e[a].name==t)return a};for(let a=0;a<this.actionNodes.length;a++){let s=[];if(""!=this.actionList[a].data.industry&&s.push(this.actionList[a].data.industry),this.actionList[a].data.company.length>0)for(let t=0;t<this.actionList[a].data.company.length;t++)s.push(this.actionList[a].data.company[t]);if(this.actionList[a].data.province.length>0)for(let t=0;t<this.actionList[a].data.province.length;t++)s.push(this.actionList[a].data.province[t]);""!=this.actionList[a].data.attribute&&s.push(this.actionList[a].data.attribute);for(let i=0;i<s.length;i++)t.push({source:this.actionNodes[a],target:this.dataNodes[e(s[i],this.dataNodes)]})}return t}},methods:{rebuildState(t){this.$store.commit("showGraph"),this.$store.commit({type:"rebuildStates",Aselected:t.Aselected,Aleaf:t.Aleaf,Bflare0:t.Bflare0,Bflare1:t.Bflare1,BflareSum:t.BflareSum,BflareSum2:t.BflareSum2,BflareSum3:t.BflareSum3,BtreeTypeFlag:t.BtreeTypeFlag,Bsplited:t.Bsplited,Bdepth:t.Bdepth,BrootName:t.BrootName,BtreeData:t.BtreeData})},getStory(t){let e=[],a=[],s=[],i=[];for(let c=0;c<t.nodes.length;c++)"company"==t.nodes[c].type||"province"==t.nodes[c].type?e.push(t.nodes[c].name):"attribute"==t.nodes[c].type?"proportion"==t.nodes[c].name?a.push("patent proportion"):"patent_num"==t.nodes[c].name?a.push("patent number"):i.push(t.nodes[c].name):"industry"==t.nodes[c].type&&s.push(t.nodes[c].name);let r="",l="",n="",o="";a.length>0&&(n=1==a.length?a[0]:2==a.length?a[0]+" and "+a[1]:a.join(", ")),i.length>0&&(o=1==i.length?i[0]:2==i.length?i[0]+" and "+i[1]:i.join(", ")),e.length>0&&(r=1==e.length?e[0]:2==e.length?e[0]+" and "+e[1]:e.join(", ")),s.length>0&&(l=1==s.length?s[0]:2==s.length?s[0]+" and "+s[1]:s.join(", "));let h=[];if(o){let t="similarity"===o||"complement"===o?"the "+o+" between "+r:"the "+o+" between "+r+" in "+l;h.push(t)}if(n){let t="the "+n+" of "+r+" in "+l;h.push(t)}return h},judgeSub(t,e){for(let a=0;a<e.nodes.length;a++)if(-1==t.nodes.indexOf(e.nodes[a]))return!1;return!0},getColor(t,e){let a=this.getWeight(this.cluster[e]),s=0;for(let r=0;r<this.cluster[e].nodes.length;r++){let t=5*this.cluster[e].nodes[r].count+this.cluster[e].nodes[r].dura;t>s&&(s=t)}let i=h.scale.linear().domain([0,s/a]).range(["#f8de85","#da0000"]);return i((5*this.dataNodes[t].count+this.dataNodes[t].dura)/a)},getWeight(t){return 5*t.count+t.time},clusterHighlight(t){let e=[];for(let a=0;a<this.community.length;a++)1==this.community[a][t]&&e.push(a);h.select("#innerGraph").selectAll("circle").filter((t=>-1==e.indexOf(t.index))).style("fill-opacity",.3).style("stroke-opacity",.3),h.select("#innerGraph").selectAll("circle").filter((t=>-1!=e.indexOf(t.index))).style("fill-opacity",1).style("stroke-opacity",1),h.select("#innerLinks").selectAll("line").filter((t=>-1!=e.indexOf(t.source.index)&&-1!=e.indexOf(t.target.index))).style("stroke-opacity",1),h.select("#innerLinks").selectAll("line").filter((t=>-1==e.indexOf(t.source.index)||-1==e.indexOf(t.target.index))).style("stroke-opacity",0),h.select("#outerLinks").selectAll("line").filter((t=>-1!=e.indexOf(t.target.index))).style("stroke-opacity",1).style("stroke-width",2),h.select("#outerLinks").selectAll("line").filter((t=>-1==e.indexOf(t.target.index))).style("stroke-opacity",0),h.select("#outerLinks").selectAll("polygon").filter((t=>-1!=e.indexOf(t.target.index))).style("fill-opacity",1),h.select("#outerLinks").selectAll("polygon").filter((t=>-1==e.indexOf(t.target.index))).style("fill-opacity",0)},outerTip(t){this.XY=[t.xy[0],t.xy[1]>this.svgConfig.height/2?t.xy[1]-30:t.xy[1]+30],this.hover.flag=!0,this.hover.type="outer",this.hover.data=t},innerHighlight(t){let e=[t.name];for(let a=0;a<this.dataLinks.length;a++)t.name==this.dataLinks[a].target.name?e.push(this.dataLinks[a].source.name):t.name==this.dataLinks[a].source.name&&e.push(this.dataLinks[a].target.name);h.select("#innerGraph").selectAll("circle").filter((t=>-1==e.indexOf(t.name))).style("fill-opacity",.3).style("stroke-opacity",.3),h.select("#innerGraph").selectAll("circle").filter((t=>-1!=e.indexOf(t.name))).style("fill-opacity",1).style("stroke-opacity",1),h.select("#innerLinks").selectAll("line").filter((t=>-1!=e.indexOf(t.source.name)&&-1!=e.indexOf(t.target.name))).style("stroke-opacity",1),h.select("#innerLinks").selectAll("line").filter((t=>-1==e.indexOf(t.source.name)||-1==e.indexOf(t.target.name))).style("stroke-opacity",0),h.select("#outerLinks").selectAll("line").filter((e=>e.target.name==t.name)).style("stroke-opacity",1).style("stroke-width",2),h.select("#outerLinks").selectAll("line").filter((e=>e.target.name!=t.name)).style("stroke-opacity",0),h.select("#outerLinks").selectAll("polygon").filter((e=>e.target.name==t.name)).style("fill-opacity",1),h.select("#outerLinks").selectAll("polygon").filter((e=>e.target.name!=t.name)).style("fill-opacity",0)},outerHighlight(t){let e=[];if(""!=t.data.data.industry&&e.push(t.data.data.industry),t.data.data.company.length>0)for(let a=0;a<t.data.data.company.length;a++)e.push(t.data.data.company[a]);if(t.data.data.province.length>0)for(let a=0;a<t.data.data.province.length;a++)e.push(t.data.data.province[a]);""!=t.data.data.attribute&&e.push(t.data.data.attribute),h.select("#innerGraph").selectAll("circle").filter((t=>-1==e.indexOf(t.name))).style("fill-opacity",.3).style("stroke-opacity",.3),h.select("#innerGraph").selectAll("circle").filter((t=>-1!=e.indexOf(t.name))).style("fill-opacity",1).style("stroke-opacity",1),h.select("#outerLinks").selectAll("line").filter((e=>e.source.data.timeStamp==t.data.timeStamp)).style("stroke-opacity",1).style("stroke-width",2),h.select("#outerLinks").selectAll("line").filter((e=>e.source.data.timeStamp!=t.data.timeStamp)).style("stroke-opacity",0),h.select("#outerLinks").selectAll("polygon").filter((e=>e.source.data.timeStamp==t.data.timeStamp)).style("fill-opacity",1),h.select("#outerLinks").selectAll("polygon").filter((e=>e.source.data.timeStamp!=t.data.timeStamp)).style("fill-opacity",0),h.select("#innerLinks").selectAll("line").filter((t=>-1!=e.indexOf(t.source.name)&&-1!=e.indexOf(t.target.name))).style("stroke-opacity",1),h.select("#innerLinks").selectAll("line").filter((t=>-1==e.indexOf(t.source.name)||-1==e.indexOf(t.target.name))).style("stroke-opacity",0)},outerOut(){h.select("#innerGraph").selectAll("circle").style("fill-opacity",1).style("stroke-opacity",1),h.select("#innerLinks").selectAll("line").style("stroke-opacity",1).style("stroke-width",2),h.select("#outerLinks").selectAll("line").style("stroke-opacity",1).style("stroke-width",.5),h.select("#outerLinks").selectAll("polygon").style("fill-opacity",1)},getAngle(t,e){let a=this.tri(t,e,"sin");return Math.asin(a)},getPoint(t,e){let a=15,s=Math.PI/9,i=this.getAngle(t,e);t.xy[0]<e.x&&(i=Math.PI-i);let r=i-s,l=i+s,n=Math.sin(r),o=Math.sin(l),h=Math.cos(r),c=Math.cos(l),d=this.getNewPos(e,t,-(10+3*e.count)-10)[0],p=this.getNewPos(e,t,-(10+3*e.count)-10)[1],m=[d+a*h,p+a*n],g=[d+a*c,p+a*o],f=[d,p];return[m,g,f]},log(){console.log("selected",this.selected),console.log("actionList",this.actionList),console.log("visualStates",this.visualStates),console.log("visualList",this.visualList)},tick(){h.select("#innerGraph").selectAll("circle").attr("cx",(t=>t.x)).attr("cy",(t=>t.y)),h.select("#innerLinks").selectAll("line").attr("x1",(t=>t.source.x)).attr("x2",(t=>t.target.x)).attr("y1",(t=>t.source.y)).attr("y2",(t=>t.target.y)),h.select("#outerLinks").selectAll("line").attr("x1",(t=>t.source.xy[0])).attr("x2",(t=>this.getNewPos(t.target,t.source,-(10+3*t.target.count)-10)[0])).attr("y1",(t=>t.source.xy[1])).attr("y2",(t=>this.getNewPos(t.target,t.source,-(10+3*t.target.count)-10)[1])),h.select("#outerLinks").selectAll("polygon").attr("points",(t=>this.getPoint(t.source,t.target)))},tri(t,e,a){let s=t.xy[0],i=e.x,r=t.xy[1],l=e.y,n=r-l,o=s-i,h=Math.sqrt(n*n+o*o);return"sin"==a?n/h:"cos"==a?o/h:"tan"==a?0==o?0:n/o:void 0},getNewPos(t,e,a){return[t.x-a*this.tri(e,t,"cos"),t.y-a*this.tri(e,t,"sin")]},createNodes(){this.force.linkStrength(.8).linkDistance(100).nodes(this.dataNodes).links(this.dataLinks).start(),h.select("#innerGraph").selectAll("circle").data(this.dataNodes).enter().append("circle").call(this.force.drag),h.select("#innerGraph").selectAll("circle").data(this.dataNodes).attr("class","dots").attr("r",20).style("fill",(t=>this.color(t.type))).style("stroke","white"),h.select("#innerLinks").selectAll("line").data(this.dataLinks).enter().append("line"),h.select("#innerLinks").selectAll("line").data(this.dataLinks).attr("stroke","red").attr("stroke-width",2)}},watch:{dataNodes(){this.force.linkStrength(.8).linkDistance(this.linkDistance).nodes(this.dataNodes).links(this.dataLinks).start(),h.select("#innerGraph").selectAll("circle").data(this.dataNodes).enter().append("circle").call(this.force.drag),h.select("#innerGraph").selectAll("circle").data(this.dataNodes).attr("r",(t=>10+3*t.count)).style("fill",(t=>this.color(t.type))).style("stroke","white").on("mouseover",(t=>{this.hover.type="inner",this.hover.flag=!0,this.hover.data=t,this.innerHighlight(t)})).on("mousemove",(()=>{let t=this.hover.data.name.length>10?10*(this.hover.data.name.length+5)+10:230;this.XY=[event.offsetX>this.svgConfig.width-t-20?event.offsetX-t-20:event.offsetX,event.offsetY]})).on("mouseout",(()=>{this.hover.flag=!1,this.hover.data={},this.outerOut()})),h.select("#innerGraph").selectAll("circle").data(this.dataNodes).exit().remove(),h.select("#innerLinks").selectAll("line").data(this.dataLinks).enter().append("line"),h.select("#innerLinks").selectAll("line").data(this.dataLinks).attr("stroke","red").attr("stroke-width",2),h.select("#innerLinks").selectAll("line").data(this.dataLinks).exit().remove(),h.select("#outerLinks").selectAll("line").data(this.interactionLinks).enter().append("line"),h.select("#outerLinks").selectAll("line").data(this.interactionLinks).attr("stroke","grey").attr("stroke-width",.5),h.select("#outerLinks").selectAll("line").data(this.interactionLinks).exit().remove(),h.select("#outerLinks").selectAll("polygon").data(this.interactionLinks).enter().append("polygon"),h.select("#outerLinks").selectAll("polygon").data(this.interactionLinks).attr("fill","grey"),h.select("#outerLinks").selectAll("polygon").data(this.interactionLinks).exit().remove()}}};wt.render=_t;var Dt=wt;const bt={id:"test"},kt={class:"main"},At=["src"];function Tt(t,e,a,s,r,l){return(0,i.wg)(),(0,i.iD)("div",bt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.story,((t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:e},[(0,i._)("p",kt,(0,T.zw)(t.main),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.sub,((t,e)=>((0,i.wg)(),(0,i.iD)(i.HY,{key:e},[t.desc?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[(0,i._)("img",{src:l.img64[t.id]},null,8,At),(0,i._)("span",{class:(0,T.C_)(!0&e?"left":"right")},(0,T.zw)(t.desc),3)],64)):(0,i.kq)("",!0)],64)))),128))],64)))),128))])}var Ct={name:"storyText",data(){return{count:0}},computed:{img64(){return console.log("screenShots",this.$store.state.screenShot[0]),this.$store.state.screenShot},story(){return this.$store.state.story.text}},methods:{}};Ct.render=Tt;var $t=Ct,Ft={name:"App5",components:{graphNew:Dt,storyText:$t},data(){return{height:.9*this.$store.state.height,width:.9*this.$store.state.width}},mounted(){},computed:{graphBtn(){return this.$store.state.graphBtn}}};Ft.render=K;var jt=Ft;function St(t,e,a,s,r,l){const n=(0,i.up)("componentF");return(0,i.wg)(),(0,i.j4)(n)}(0,i.dD)("data-v-e4ce62c2");const Lt=["y"],Ot=["dy"];function Mt(t,e,a,s,r,l){return(0,i.wg)(),(0,i.iD)("svg",{id:"svgF",onClick:e[0]||(e[0]=t=>l.log())},[(0,i._)("rect",{x:"0",y:r.heightF-50,height:"50",width:"60",fill:"orange"},null,8,Lt),(0,i._)("text",{dx:"30",dy:r.heightF-17,"text-anchor":"middle",fill:"white","font-size":"25","font-weight":"bold"},"E ",8,Ot)])}(0,i.Cn)();var zt={name:"componentF",data(){return{heightF:.6*this.$store.state.height,widthF:.3*this.$store.state.width,hovered:"",nodesLength:0,comparisonMode:"sim",tipFlag:!1}},mounted(){h.select("#tx").attr("dy",20),this.$store.commit({type:"appendLine",id:"lineF",svg:"svgF",width:this.widthF,height:1*this.heightF/3-20,color:"mediumseagreen",stroke:1}),this.$store.commit({type:"appendTitle",id:"FbarTitle",class:"classF",svg:"svgF",dx:"24px",dy:"36px",size:"14px"}),h.select("#svgF").attr("width",this.widthF).attr("height",this.heightF),d().get("province_pat_pro.json").then((t=>{this.$store.commit({type:"FprovincePro",provjson:t})})),d().get("comp_pat_pro.json").then((t=>{this.$store.commit({type:"FcompanyPro",projson:t})})),d().get("supply_chain(1).csv").then((t=>{let e=h.csv.parse(t.data);this.$store.commit({type:"FindData",value:e})})),h.select("#svgF").append("g").attr("id","Fbar"),h.select("#svgF").append("g").attr("id","Fmatrix"),this.$store.commit({type:"appendBtn",svgID:"svgF",btnID:"Fbtn",width:this.widthF,text:"switch"}),h.select("#Fbtn").on("click",(()=>{this.modeChange()})).style("display","none"),this.appendLgd()},computed:{matrixData(){let t=[];for(let e=0;e<this.treeData.length;e++)t.push(this.treeData[e]);for(let e=0;e<this.$store.state.matrixElement.length;e++)-1==this.treeData.indexOf(this.$store.state.matrixElement[e])&&t.push(this.$store.state.matrixElement[e]);return t},matrixData3(){return this.matrixData2+"1"},matrixData2(){let t=[];if("company"==this.treeTypeFlag)for(let e=0;e<this.matrixData.length;e++)for(let a=0;a<this.matrixData.length;a++)"sim"==this.comparisonMode?t.push({x:e,y:a,rate:this.sim(this.matrixData[e],this.matrixData[a],this.projson)}):"complement"==this.comparisonMode&&t.push({x:e,y:a,rate:this.complement(this.matrixData[e],this.matrixData[a],this.projson)});else if("province"==this.treeTypeFlag)for(let e=0;e<this.matrixData.length;e++)for(let a=0;a<this.matrixData.length;a++)"sim"==this.comparisonMode?t.push({x:e,y:a,rate:this.sim(this.matrixData[e].substring(0,2),this.matrixData[a].substring(0,2),this.provjson)}):"complement"==this.comparisonMode&&t.push({x:e,y:a,rate:this.complement(this.matrixData[e].substring(0,2),this.matrixData[a].substring(0,2),this.provjson)});return t},treeData1(){return this.treeData[0]?this.treeData[0]:""},bar_data1(){return this.bar_data+"1"},bar_data(){let t=[],e=[],a=[];if(this.treeData[0]&&"company"==this.treeTypeFlag){h.select("#svgD").selectAll("circle").filter(((e,a)=>{a>0&&t.push(e.name)})),t=t.filter((t=>t!=this.treeData[0]));for(let a=0;a<t.length;a++)"sim"==this.comparisonMode?e.push({name:t[a],rate:this.sim(t[a],this.treeData[0],this.projson)}):"complement"==this.comparisonMode&&e.push({name:t[a],rate:this.complement(t[a],this.treeData[0],this.projson)});e.sort(((t,e)=>e.rate-t.rate)),a=e.slice(0,5)}else if(this.treeData[0]&&"province"==this.treeTypeFlag){for(let e=0;e<this.$store.state.province.length;e++)t.push(this.$store.state.province[e].substring(0,2));t=t.filter((t=>t!=this.treeData[0].substring(0,2)));for(let a=0;a<t.length;a++)"sim"==this.comparisonMode?e.push({name:this.transform(t[a]),rate:this.sim(t[a],this.treeData[0].substring(0,2),this.provjson)}):"complement"==this.comparisonMode&&e.push({name:this.transform(t[a]),rate:this.complement(t[a],this.treeData[0].substring(0,2),this.provjson)});e.sort(((t,e)=>e.rate-t.rate)),a=e.slice(0,5)}return a},province(){return this.$store.state.province},treeTypeFlag(){return this.$store.state.treeTypeFlag},treeData(){return this.$store.state.objB.treeData},treeD(){return this.treeData+"1"},provjson(){return this.$store.state.objF.provjson},projson(){return this.$store.state.objF.projson},F_indData(){let t=[];for(let e=0;e<this.$store.state.objF.indData.length;e++)-1==t.indexOf(this.$store.state.objF.indData[e].industry_name)&&t.push(this.$store.state.objF.indData[e].industry_name);return t}},methods:{log(){console.log(this.treeData),console.log(this.$store.state.matrixElement)},F_TipRemove(){h.select("#svgF").selectAll(".tips").remove()},F_createTip(t){function e(t){return t=t||window.event,{x:t.offsetX,y:t.offsetY}}let a=e(event),s=this.matrixData[t.x].length>8||this.matrixData[t.y].length>8?15*Math.max(this.matrixData[t.x].length,this.matrixData[t.y].length)+10:160,i=h.select("#svgF"),r="sim"==this.comparisonMode?"结构相似性系数:":"互补性系数:";a.x>0&&a.x<this.widthF-s?(i.append("rect").attr("id","tipBack").attr("class","tips").attr("x",a.x+10).attr("y",a.y-30).style("height",80).style("width",s).attr("rx",20),i.append("text").attr("class","tips").attr("dx",a.x+20).attr("dy",a.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","#e34b00").text("company/province ***"),i.append("text").attr("class","tips").attr("dx",a.x+20).attr("dy",a.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","#9eea74").text("company/province ***"),i.append("text").attr("class","tips").attr("dx",a.x+20).attr("dy",a.y+35).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(r+t.rate.toFixed(3))):(i.append("rect").attr("id","tipBack").attr("class","tips").attr("x",a.x-10-s).attr("y",a.y-30).style("height",80).style("width",s).attr("rx",20),i.append("text").attr("class","tips").attr("dx",a.x-s).attr("dy",a.y-5).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","#e34b00").text("company/province ***"),i.append("text").attr("class","tips").attr("dx",a.x-s).attr("dy",a.y+15).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","#9eea74").text("company/province ***"),i.append("text").attr("class","tips").attr("dx",a.x-s).attr("dy",a.y+35).attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size","14px").attr("font-weight","bold").attr("fill","white").text(r+t.rate.toFixed(3)))},appendLgd(){let t=h.select("#svgF").append("defs"),e=t.append("linearGradient").attr("id","linearColor2").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");e.append("stop").attr("offset","0%").style("stop-color","#c1e8ca"),e.append("stop").attr("offset","100%").style("stop-color","#48784f"),h.select("#svgF").append("rect").attr("class","lgd1").attr("x",this.widthF/5).attr("rx",6).attr("y",this.heightF/5*2-10).attr("width",this.widthF/5*3).attr("height",12).style("fill","url(#"+e.attr("id")+")"),h.select("#svgF").append("text").attr("class","lgd1").attr("font-family","sans-serif").style("font-size","20px").attr("dx","24px").attr("dy",this.heightF/3+10).style("font-weight","bold").attr("text-anchor","start").text("结构相似性系数矩阵"),h.select("#svgF").append("text").attr("class","lgd1").attr("font-family","sans-serif").style("font-size",15).attr("dx",this.widthF/5-15).style("font-weight","bold").attr("dy",this.heightF/5*2+5).text(0),h.select("#svgF").append("text").attr("class","lgd1").attr("font-family","sans-serif").style("font-size",15).style("font-weight","bold").attr("dx",this.widthF/5+this.widthF/5*3+5).attr("dy",this.heightF/5*2+5).text(1),h.select("#svgF").selectAll(".lgd1").style("display","none")},modeChange(){"sim"==this.comparisonMode?(this.comparisonMode="complement",this.$store.commit({type:"userClick",view:"viewF",width:this.widthF,height:this.heightF,obj:"switch(comparison mode)",name:this.treeData[0],value:"complement",desc:"show the complementarity of "+this.treeData[0]+" and others",visualKeys:{},data:{industry:"",company:"company"==this.treeTypeFlag?[this.treeData[0]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0]]:[],attribute:"complement"}}),this.$store.commit("ClickRecordState")):"complement"==this.comparisonMode&&(this.comparisonMode="sim",this.$store.commit({type:"userClick",view:"viewF",width:this.widthF,height:this.heightF,obj:"switch(comparison mode)",name:this.treeData[0],value:"similarity",desc:"show the similarity of "+this.treeData[0]+" and others",data:{industry:"",company:"company"==this.treeTypeFlag?[this.treeData[0]]:[],province:"province"==this.treeTypeFlag?[this.treeData[0]]:[],attribute:"similarity"}}),this.$store.commit("ClickRecordState")),this.updateBar()},transform(t){for(let e=0;e<this.$store.state.province.length;e++)if(this.$store.state.province[e].substring(0,2)==t.substring(0,2))return this.$store.state.province[e]},updateBar(){let t=h.scale.category20(),e=h.scale.linear().domain([this.bar_data[this.bar_data.length-1].rate,this.bar_data[0].rate]).range([70,this.widthF/3]),a=10,s=8,i=h.select("#Fbar");i.selectAll("rect").data(this.bar_data).enter().append("rect").attr("class","bar1").attr("height",s).attr("width",0).on("mouseover",(function(){h.select(this).attr("stroke-width",1).attr("stroke","red")})).on("mouseout",(function(){h.select(this).attr("stroke-width",0)})).on("click",(t=>{this.$store.commit({type:"updateTreeData",name:t.name,treeTypeFlag:this.treeTypeFlag}),this.$store.commit({type:"userClick",view:"viewF",width:this.widthF,height:this.heightF,obj:"company"==this.treeTypeFlag?"select company":"select province",name:this.treeData[0]+"vs"+t.name,value:t.rate,desc:"the "+this.comparisonMode+" rate of "+this.treeData[0]+" and "+t.name+" is "+t.rate,data:{industry:"",company:"company"==this.treeTypeFlag?[this.treeData[0],t.name]:[],province:"province"==this.treeTypeFlag?[this.treeData[0],t.name]:[],attribute:"comparison"}}),this.$store.commit("ClickRecordState")})),i.selectAll("rect").data(this.bar_data).attr("rx",5).style("fill",((e,a)=>t(a))).attr("x",this.widthF/2).attr("y",((t,e)=>60+e*(a+s)-10)).transition().delay(((t,e)=>200*e)).attr("width",(t=>e(t.rate))),i.selectAll("rect").data(this.bar_data).exit().remove(),i.selectAll(".text1").data(this.bar_data).enter().append("text").attr("font-family","sans-serif").attr("font-weight","bold").attr("class","text1").attr("font-size",0),i.selectAll(".text1").data(this.bar_data).attr("dx",this.widthF/2-10).attr("dy",((t,e)=>60+e*(a+s))).attr("text-anchor","end").attr("fill","black").transition().delay(((t,e)=>200*e)).attr("font-size",10).text((t=>t.name)),i.selectAll(".text1").data(this.bar_data).exit().remove(),i.selectAll(".text2").data(this.bar_data).enter().append("text").attr("font-family","sans-serif").attr("font-weight","bold").style("fill","black").attr("class","text2").attr("font-size",0),i.selectAll(".text2").data(this.bar_data).transition().delay(((t,e)=>200*e)).attr("font-size",12).attr("dx",(t=>e(t.rate)+this.widthF/2+5)).attr("dy",((t,e)=>60+e*(a+s))).text((t=>t.rate.toFixed(3))),i.selectAll(".text2").data(this.bar_data).exit().remove()},sim(t,e,a){if(t==e)return 1;if("台湾"==t.substring(0,2)||"香港"==t.substring(0,2)||"澳门"==t.substring(0,2)||"台湾"==e.substring(0,2)||"香港"==e.substring(0,2)||"澳门"==e.substring(0,2))return 0;{let s=0;for(let n=0;n<this.F_indData.length;n++)a.data[t][this.F_indData[n]]&&a.data[e][this.F_indData[n]]&&(s+=a.data[t][this.F_indData[n]]*a.data[e][this.F_indData[n]]);let i=0;for(let e=0;e<this.F_indData.length;e++)a.data[t][this.F_indData[e]]&&(i+=a.data[t][this.F_indData[e]]*a.data[t][this.F_indData[e]]);let r=0;for(let t=0;t<this.F_indData.length;t++)a.data[e][this.F_indData[t]]&&(r+=a.data[e][this.F_indData[t]]*a.data[e][this.F_indData[t]]);let l=s/Math.sqrt(i*r);return l}},complement(t,e,a){if(t==e)return 0;if("台湾"==t.substring(0,2)||"香港"==t.substring(0,2)||"澳门"==t.substring(0,2)||"台湾"==e.substring(0,2)||"香港"==e.substring(0,2)||"澳门"==e.substring(0,2))return 0;{let s=[];for(let e in a.data[t])a.data[t].hasOwnProperty(e)&&s.push(e);for(let t in a.data[e])a.data[e].hasOwnProperty(t)&&-1==s.indexOf(t)&&s.push(t);let i=0;for(let o=0;o<s.length;o++)a.data[t][s[o]]&&a.data[e][s[o]]&&(i+=a.data[t][s[o]]*a.data[e][s[o]]);let r=0;for(let e=0;e<s.length;e++)a.data[t][s[e]]&&(r+=a.data[t][s[e]]*a.data[t][s[e]]);let l=0;for(let t=0;t<s.length;t++)a.data[e][s[t]]&&(l+=a.data[e][s[t]]*a.data[e][s[t]]);let n=i/Math.sqrt(r*l);return 1-n}},matrixUpdate(){let t=2,e=0==this.matrixData.length?0:(this.widthF/2-(this.matrixData.length-1)*t)/this.matrixData.length,a=h.scale.linear().domain([0,1]).range(["#c1e8ca","#48784f"]);h.select("#Fmatrix").selectAll("rect").data(this.matrixData2).enter().append("rect").attr("fill","white").attr("height",0).attr("width",0),h.select("#Fmatrix").selectAll("rect").data(this.matrixData2).on("mouseover",(t=>{h.select("#Fmatrix").selectAll("text").data(this.matrixData).filter((e=>e==this.matrixData[t.y])).style("fill","#e34b00"),h.select("#Fmatrix").selectAll("text").data(this.matrixData).filter((e=>e==this.matrixData[t.x])).style("fill","#9eea74"),h.select("#Fmatrix").selectAll("rect").data(this.matrixData2).filter((e=>e.x==t.x&&e.y==t.y||e.x==t.y&&e.y==t.x)).style("fill","red"),this.F_createTip(t),t.x!=t.y&&this.$store.commit({type:"userMouseover"})})).on("mousemove",(t=>{this.F_TipRemove(),this.F_createTip(t)})).on("mouseout",(t=>{setTimeout((()=>{this.F_TipRemove()}),1500),h.select("#Fmatrix").selectAll("text").data(this.matrixData).filter((e=>e==this.matrixData[t.x]||e==this.matrixData[t.y])).style("fill","black"),h.select("#Fmatrix").selectAll("rect").data(this.matrixData2).filter((e=>e.x==t.x&&e.y==t.y||e.x==t.y&&e.y==t.x)).style("fill",(t=>a(t.rate)));let e="sim"==this.comparisonMode?"similarity":"complement";t.x!=t.y&&(this.$store.commit({type:"userMouseout",dif:"fast",view:"viewF",width:this.widthF,height:this.heightF,obj:"tips(matrix)",name:this.matrixData[t.x]+" vs "+this.matrixData[t.y],value:t.rate,desc:"the "+e+" rate of "+this.matrixData[t.x]+" and "+this.matrixData[t.y]+" is "+t.rate.toFixed(3),data:{industry:"",company:"company"==this.treeTypeFlag?[this.matrixData[t.x],this.matrixData[t.y]]:[],province:"province"==this.treeTypeFlag?[this.matrixData[t.x],this.matrixData[t.y]]:[],attribute:"sim"==this.comparisonMode?"similarity":"complement"}}),this.$store.commit("OutRecordState"))})).transition().attr("x",(a=>(this.widthF-this.matrixData.length*e-t*(this.matrixData.length-1))/2+a.x*(e+t)+this.widthF/6)).attr("y",(a=>(this.heightF-this.matrixData.length*e-t*(this.matrixData.length-1))/2+a.y*(e+t)+this.heightF/5)).attr("height",e).attr("width",e).attr("rx",e/5).style("fill",(t=>a(t.rate))),h.select("#Fmatrix").selectAll("rect").data(this.matrixData2).exit().remove(),h.select("#Fmatrix").selectAll("text").data(this.matrixData).enter().append("text").attr("font-family","sans-serif").style("font-size",10).attr("text-anchor","end"),h.select("#Fmatrix").selectAll("text").data(this.matrixData).transition().attr("dx",(this.widthF-this.matrixData.length*e-t*(this.matrixData.length-1))/2+this.widthF/6-5).attr("dy",((a,s)=>(this.heightF-this.matrixData.length*e-t*(this.matrixData.length-1))/2+s*(e+t)+this.heightF/5+e/2+3)).text((t=>t)),h.select("#Fmatrix").selectAll("text").data(this.matrixData).exit().remove()}},watch:{treeD(){this.treeData[0]?h.select("#FbarTitle").text(this.treeData[0]+"竞争排序"):(h.select("#FbarTitle").text(""),h.select("#Fmatrix").selectAll("rect").remove(),h.select("#Fmatrix").selectAll("text").remove())},matrixData3(){this.matrixUpdate()},comparisonMode(t){this.matrixUpdate(),"sim"==t?h.select("#FbarTitle").text(this.treeData[0]+"竞争排序"):"complement"==t&&h.select("#FbarTitle").text(this.treeData[0]+"互补排序")},treeData1(){if(this.treeData1)if(this.updateBar(),h.select("#svgF").selectAll(".lgd1").style("display","inline"),h.select("#Fbtn").style("display","inline"),"company"==this.treeTypeFlag)for(let t=0;t<this.bar_data.length;t++)this.$store.commit({type:"changeMatrixElement",element:this.bar_data[t].name});else for(let t=0;t<this.bar_data.length;t++)this.$store.commit({type:"changeMatrixElement",element:this.bar_data[t].name});else h.select("#Fbar").selectAll("rect").remove(),h.select("#Fbar").selectAll("text").remove(),h.select("#svgF").selectAll(".lgd1").style("display","none"),h.select("#Fbtn").style("display","none")}}};zt.render=Mt,zt.__scopeId="data-v-e4ce62c2";var Rt=zt,Nt={name:"App6",components:{componentF:Rt},data(){return{heightF:.6*this.$store.state.height,widthF:.3*this.$store.state.width}},mounted(){this.$store.commit({type:"changeApp",app:"app6",width:this.widthF,height:this.heightF,top:25+.4*this.$store.state.height,left:.7*this.$store.state.width+30+10})}};Nt.render=St;var Pt=Nt,It=a(709),Et=a(120),Yt=a.n(Et);const Xt=(0,It.MT)({state(){return{width:document.documentElement.clientWidth-50,height:document.documentElement.clientHeight-50,geo:1,data_overall:[],flare:{},province:["河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省","四川省","贵州省","云南省","陕西省","甘肃省","青海省","台湾省","内蒙古自治区","广西壮族自治区","西藏自治区","宁夏回族自治区","新疆维吾尔自治区","北京市","天津市","上海市","重庆市","香港特别行政区","澳门特别行政区"],leaf:!1,selected:"",treeTypeFlag:"",matrixFlag:"tree",matrixElement:[],graphBtn:!1,objB:{treeData:Array(0),flare0:!1,flare1:!1,flareSum:!1,flareSum2:!1,flareSum3:!1,splited:!1,rootName:"半导体显示",depth:0},objD:{title:""},objC:{geojson:{},seajson:{},circled:Array(0)},objF:{projson:{},provjson:{},indData:[]},user:{index1:0,actionList:[]},timeStamp:0,timeStampInterval:-1,userMouseover:{index1:0,time:0,interval:-1,mouseoverList:[]},story:{btn:!1,text:[]},screenShot:[],visualStates:{Aselected:"",Aleaf:!1,Bflare0:!1,Bflare1:!1,BflareSum:!1,BflareSum2:!1,BflareSum3:!1,BtreeData:[],BtreeTypeFlag:"",Bsplited:!1,Bdepth:0,BrootName:"半导体显示",Ccircled:[]},visualList:[]}},getters:{},mutations:{rebuildStates(t,e){t.selected=e.Aselected,t.leaf=e.Aleaf,t.objB.flare0=e.Bflare0,t.objB.flare1=e.Bflare1,t.objB.flareSum=e.BflareSum,t.objB.flareSum2=e.BflareSum2,t.objB.flareSum3=e.BflareSum3,t.objB.treeTypeFlag=e.BtreeTypeFlag,t.objB.splited=e.Bsplited,t.objB.depth=e.Bdepth,t.objB.rootName=e.BrootName,t.objB.treeData=e.BtreeData},changeStatesA(t,e){t.visualStates.Aselected=e.Aselected,t.visualStates.Aleaf=e.Aleaf},changeStatesB(t,e){t.visualStates.Bflare0=e.Bflare0,t.visualStates.Bflare1=e.Bflare1,t.visualStates.BflareSum=e.BflareSum,t.visualStates.BflareSum2=e.BflareSum2,t.visualStates.BflareSum3=e.BflareSum3},clearStatesB(t,e){t.visualStates.BtreeData=[],t.visualStates.BtreeTypeFlag=e.flag,t.visualStates.Bsplited=!1,t.visualStates.Bdepth=0,t.visualStates.BrootName="半导体显示"},ClickRecordState(t){let e=Object.assign({},t.visualStates);t.visualList.push(e)},OutRecordState(t){if(t.userMouseover.time>3){let e=Object.assign({},t.visualStates);t.visualList.push(e)}},getImg(t,e){Yt()(document.getElementById(e.id),{width:e.width-2,height:e.height-2,x:2,y:2,backgroundColor:"white",useCORS:!0,scale:.5}).then((e=>{t.screenShot.push(e.toDataURL("image/jpeg"))}))},changeStoryText(t,e){t.story.text=e.text},changeStoryBtn(t){t.story.btn=!t.story.btn},showGraph(t){t.graphBtn=!t.graphBtn},userClick(t,e){let a;0==t.timeStamp&&(t.timeStampInterval=setInterval((function(){t.timeStamp+=.1}),100)),"viewA"==e.view?a="app":"viewB"==e.view?a="app2":"viewC"==e.view?a="app3":"viewD"==e.view?a="app4":"viewF"==e.view&&(a="app6"),setTimeout((()=>{Yt()(document.getElementById(a),{width:e.width-2,height:e.height-2,x:2,y:2,backgroundColor:"white",useCORS:!0,scale:1}).then((a=>{t.screenShot.push(a.toDataURL("image/jpeg")),t.user.actionList.push({pic:a.toDataURL("image/jpeg"),desc:e.desc,timeStamp:t.timeStamp,index1:t.user.index1,view:e.view,obj:e.obj,name:e.name,data:e.data,value:e.value})}))}),1100),t.user.index1++},userMouseover(t){t.userMouseover.time=0,clearInterval(t.userMouseover.interval),t.userMouseover.interval=setInterval((function(){t.userMouseover.time+=.1}),100)},userMouseout(t,e){if(t.userMouseover.time>3){let a;"viewA"==e.view?a="app":"viewB"==e.view?a="app2":"viewC"==e.view?a="app3":"viewD"==e.view?a="app4":"viewF"==e.view&&(a="app6"),setTimeout((()=>{Yt()(document.getElementById(a),{width:e.width,height:e.height,x:0,y:0,backgroundColor:"white",useCORS:!0,scale:1}).then((a=>{t.screenShot.push(a.toDataURL("image/jpeg")),t.user.actionList.push({pic:a.toDataURL("image/jpeg"),desc:e.desc,timeStamp:t.timeStamp-t.userMouseover.time,lastTime:t.userMouseover.time,index1:t.user.index1,view:e.view,obj:e.obj,name:e.name,data:e.data,value:e.value})}))}),"fast"===e.dif?0:1100),t.user.index1++}},elementClear(t,e){"company"==t.treeTypeFlag&&"province"==e.flag||"province"==t.treeTypeFlag&&"company"==e.flag?(t.matrixElement=[],t.objB.treeData=[],t.treeTypeFlag=e.flag,t.objB.splited=!1,t.objB.depth=0,t.objB.rootName="半导体显示",h.select("#svgB").selectAll("path").remove(),h.select("#svgB").selectAll("line").remove(),h.select("#gCircles1").selectAll("circle").remove(),h.select("#gCircles2").selectAll("circle").remove()):t.treeTypeFlag=e.flag},changeMatrixElement(t,e){-1==t.matrixElement.indexOf(e.element)?t.matrixElement.push(e.element):-1!=t.matrixElement.indexOf(e.element)&&t.matrixElement.splice(t.matrixElement.indexOf(e.element),1)},changeMatrixFlag(t,e){t.matrixFlag=e.flag},appendBtn(t,e){h.select("#"+e.svgID).append("g").attr("id",e.btnID).style("cursor","pointer").attr("transform","translate("+[e.width-70,20]+")").on("mousedown",(()=>{h.select("#"+e.btnID).select("rect").style("fill","#4f4f51"),h.select("#"+e.btnID).select("text").style("fill","white")})).on("mouseup",(()=>{h.select("#"+e.btnID).select("rect").style("fill","#b4acc8"),h.select("#"+e.btnID).select("text").style("fill","black")})),h.select("#"+e.btnID).append("rect").attr("width",60).attr("height",25).style("fill","#b4acc8").attr("stroke","black").attr("rx",8),h.select("#"+e.btnID).append("text").attr("dx",30).attr("dy",17).attr("text-anchor","middle").style("fill","black").style("font-weight","bold").text(e.text)},updateTreeData(t,e){0==t.objB.treeData.length?t.objB.treeData.push(e.name):1==t.objB.treeData.length?t.objB.treeData[0]!=e.name?t.objB.treeData.push(e.name):t.objB.treeData[0]==e.name&&(t.objB.treeData=[]):2==t.objB.treeData.length&&(-1==t.objB.treeData.indexOf(e.name)?t.objB.treeData[1]=e.name:-1!=t.objB.treeData.indexOf(e.name)&&t.objB.treeData.splice(t.objB.treeData.indexOf(e.name),1));let a=Object.assign([],t.objB.treeData);t.visualStates.BtreeData=a},FindData(t,e){t.objF.indData=e.value},FprovincePro(t,e){t.objF.provjson=e.provjson},FcompanyPro(t,e){t.objF.projson=e.projson},Cgeojson(t,e){t.objC.geojson=e.geojson},Cseajson(t,e){t.objC.seajson=e.seajson},delTreeData(t,e){"left"==e.index?t.objB.treeData.splice(0,1):"right"==e.index&&t.objB.treeData.splice(1,1);let a=Object.assign({},t.objB.treeData);t.visualStates.BtreeData=a},objBDepth(t,e){0==e.flag?(t.objB.depth=0,t.objB.rootName="半导体显示",t.visualStates.Bdepth=0,t.visualStates.BrootName="半导体显示"):e.flag>0&&(t.objB.depth+=e.depth,t.objB.rootName=e.rootName,t.visualStates.Bdepth+=e.depth,t.visualStates.BrootName=e.rootName)},objBSplitFlag(t){t.objB.splited?(t.objB.splited=!1,t.visualStates.Bsplited=!1):(t.objB.splited=!0,t.visualStates.Bsplited=!0)},objBclear(t){h.select("#svgB").selectAll("path").remove(),h.select("#svgB").selectAll("line").remove(),h.select("#gCircles1").selectAll("circle").remove(),h.select("#gCircles2").selectAll("circle").remove(),t.objB={treeData:Array(0),flare0:!1,flare1:!1,flareSum:!1,flareSum2:!1,flareSum3:!1,splited:!1,rootName:"半导体显示",depth:0},t.visualStates.Bflare0=!1,t.visualStates.Bflare1=!1,t.visualStates.BflareSum=!1,t.visualStates.BflareSum2=!1,t.visualStates.BflareSum3=!1,t.visualStates.Bsplited=!1,t.visualStates.BrootName="半导体显示",t.visualStates.Bdepth=0,t.objC.circled=[],t.visualStates.Ccircled=[]},changeBtreeData(t,e){0==t.objB.treeData.length?t.objB.treeData.push(e.comp):1==t.objB.treeData.length?t.objB.treeData[0]!=e.comp?t.objB.treeData.push(e.comp):t.objB.treeData[0]==e.comp&&(t.objB.treeData=[]):2==t.objB.treeData.length&&(-1==t.objB.treeData.indexOf(e.comp)?t.objB.treeData[1]=e.comp:-1!=t.objB.treeData.indexOf(e.comp)&&t.objB.treeData.splice(t.objB.treeData.indexOf(e.comp),1));let a=Object.assign({},t.objB.treeData);t.visualStates.BtreeData=a},changeBflare(t,e){0==t.objB.treeData.length?(t.objB.flare0=!1,t.objB.flare1=!1,t.objB.flareSum=!1,t.objB.flareSum2=!1,t.objB.flareSum3=!1):1==t.objB.treeData.length?(t.objB.flare0=e.flare0,t.objB.flare1=!1,t.objB.flareSum=!1,t.objB.flareSum2=!1,t.objB.flareSum3=!1):2==t.objB.treeData.length&&(t.objB.flare0=e.flare0,t.objB.flare1=e.flare1,t.objB.flareSum=e.flareSum,t.objB.flareSum2=e.flareSum2,t.objB.flareSum3=e.flareSum3)},changeGlobalD(t,e){t.objD[e.key]=e.value},changeDataD(t,e){t.selected=e.selected,t.leaf=e.leaf},changeGlobal(t,e){t[e.key]=e.value},appendLine(t,e){h.select("#"+e.svg).append("line").attr("id",e.id).attr("x1",0).attr("x2",e.width).attr("y1",e.height).attr("y2",e.height).style("stroke",e.color).style("stroke-width",e.stroke)},changeSvg(t,e){h.select("#"+e.svg).attr("width",e.width).attr("height",e.height)},appendTitle(t,e){h.select("#"+e.svg).append("text").attr("id",e.id).attr("class",e.class).attr("dx",e.dx).attr("dy",e.dy).attr("font-family","sans-serif").attr("font-size",e.size).attr("font-weight","bold").style("fill","black").attr("text-anchor","start")},changeApp(t,e){h.select("#"+e.app).style("width",e.width+"px").style("height",e.height+"px").style("top",e.top+"px").style("left",e.left+"px")}}});var Gt=Xt,Ht=a(382),qt=a.n(Ht);(0,s.ri)(f).use(Gt,d(),qt()).mount("#app"),(0,s.ri)(k).use(Gt,d(),qt()).mount("#app2"),(0,s.ri)(z).use(Gt,d(),qt()).mount("#app3"),(0,s.ri)(q).use(Gt,d(),qt()).mount("#app4"),(0,s.ri)(jt).use(Gt,d(),qt()).mount("#app5"),(0,s.ri)(Pt).use(Gt,d(),qt()).mount("#app6")}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var r=e[s]={exports:{}};return t[s].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,r){if(!s){var l=1/0;for(c=0;c<t.length;c++){s=t[c][0],i=t[c][1],r=t[c][2];for(var n=!0,o=0;o<s.length;o++)(!1&r||l>=r)&&Object.keys(a.O).every((function(t){return a.O[t](s[o])}))?s.splice(o--,1):(n=!1,r<l&&(l=r));if(n){t.splice(c--,1);var h=i();void 0!==h&&(e=h)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[s,i,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,r,l=s[0],n=s[1],o=s[2],h=0;if(l.some((function(e){return 0!==t[e]}))){for(i in n)a.o(n,i)&&(a.m[i]=n[i]);if(o)var c=o(a)}for(e&&e(s);h<l.length;h++)r=l[h],a.o(t,r)&&t[r]&&t[r][0](),t[l[h]]=0;return a.O(c)},s=self["webpackChunkv_supplychain"]=self["webpackChunkv_supplychain"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(226)}));s=a.O(s)})();
//# sourceMappingURL=app.74132e7d.js.map